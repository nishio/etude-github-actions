Hatena2010-03-06
code:hatena
 <body>
 *1267849931* Petition to the King: One Man's Play #2
 Well, one thing I learned from my last play (<a href='http://d.hatena.ne.jp/nishiohirokazu/20100305/1267798278'>Petition to the King</a>). The farmer's dice-increasing effect interferes with taking the servant or philosopher, so he tries to take the servant or philosopher first, but the difference in dice count becomes overwhelming in the endgame. If you think about the endgame, when there are a lot of dice and approximately all of them are available and you try to align them as much as possible, the philosopher can align up to two dice to his target, while the servant has only one. I think it's philosopher > farmer > servant or farmer > philosopher > servant.
 
 2nd
 ** round 1
 P1: Dice 3
 [2, 4, 5]. reroll 5, philosopher for 1/2. [4]. Hmmm, you get farmer or philosopher. I still think I'm more philosopher than farmer for now. I get the philosopher.
 P1: Philosophers, 3
 
 
 P2: Dice 3
 [2, 6, 6]. I can take a philosopher. Hmmm. I guess I'll take the farmer on a dare to think about whether I'd rather be a philosopher or a farmer.
 P2: Farmer, 3
 
 **round 2
 P1: Philosophers, 3
 [5, 5, 5]. Relentless guards.
 P1: Philosopher, Guards, 3
 
 
 P2: Farmer, 3+1
 [1, 5, 6, 6]. 1,5 reroll. [1, 6]. reroll 1. [3]. There are two guards, so we can take them. The total is 21, so we can take the witness. But let's aim for more dice.
 P2: Farmer, Guards, 4
 
 **round 3
 P1: Philosopher, Guards, 3
 [1, 1, 3]. 2 with the guards. this is a 1/2 chance astronomer with the philosopher effect if you fix 1 and reroll the rest, and a farmer if it misses. Rerolls. [1, 4]. Too bad it's not an astronomer; if you confirm the 1 and reroll, you still have a 1/6 chance. You could make him the hunter, though. Reroll. [4]. Too bad. I'll just be a farmer.
 P1: Philosopher, Guards, Farmer, 4
 
 
 P2: Farmer, Guards, 4+1
 [3, 4, 4, 5, 6]. 2 in the guard. 2-6 can take the sorcerer. But what should we do? No, should we take it?
 P2: Farmer, Guardsman, Magician, 6
 
 **round 4
 P1: Philosopher, Guardsman, Farmer, 4+1
 [2, 2, 2, 3, 6], 2 at the guards. 4 set at this point. Maybe an astronomer. This one is more control-oriented.
 P1: Philosopher, Guardsman, Farmer, Astronomer, 6
 
 
 P2: Farmer, Guardsman, Magician, 6+1
 [1, 1, 2, 3, 5, 5, 6], 2 with the guards. 1 with the sorcerer to make 4, 1-6 with the alchemist.
 P2: Farmer, Guardsman, Mage, Alchemist, 8
 
 **round 5
 P1: Philosopher, Guardsman, Farmer, Astronomer, 6+1
 [1, 3, 3, 3, 4, 4, 5]. 2 for the guards, after both the sorcerer and the alchemist have already been taken. I should probably give priority to increasing the number of dice, since the control performance in the early game is easily turned upside down if the alchemist is taken. Should I increase the number of dice now? If you turn 2,4 into 3,3 with a philosopher, you can get a lord if you get at least one 3 on the remaining 3 rerolls. The probability is 1-(5/6)**6, which is 67%. Rerolls [2,3,5]. ok.
 P1: Philosophers, Guards, Farmers, Astronomers, Lords, 8
 
 
 P2: Farmer, Guardsman, Mage, Alchemist, 8+1
 [2, 3, 3, 4, 4, 4, 5, 5, 5, 5, 6]. 2 with the guards...now what to do? I think I can take the king if I go for the king; P1 has taken the lord, so even if I take the dice increase card this turn, I'll still catch up by one each turn. So I guess I should go for the win while I still have the lead.
 [2, 2, 3, 3, 4, 4, 5, 5, 5, 5, 6]. The most common is 5, but the only value exceeded is one 6, so it's not good to make this the goal, so let's make it 4. 
 [2, 3, 3, 4, 4, 4, 4, 4, 5, 6]. reroll 5 cards. [1, 2, 4, 4, 4, 4]. Cheat...reroll with a definite 4. [2, 6]. Make one of them a 4 under the sorcerer's effect and reroll the other one. [1].
 [1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4] Nine 4s. King won.
 P2: Farmer, Guardsman, Mage, Alchemist, King, Queen, 10
 
 **round 6
 P1: Philosopher, Guardsman, Farmer, Astronomer, Lord, 8+1+2
 The number of dice has increased all at once: eleven.
 [1, 1, 1, 1, 2, 3, 3, 4, 5, 5, 5, 6]. 2 for the guards, 4 for 1...should we go for 10 for 1? But that doesn't make good use of the philosopher... 5... let's go for 9 with 5... lock 5 and reroll.
 [1, 2, 3, 3, 4, 6, 6, 6, 6, 6, 6]. Guha. 4,6 is changed to 5,5 by the effect of the philosopher and fixed. Reroll the remaining 8.
 [1, 3, 4, 4, 4, 5, 6, 6].Fix 5 and reroll the remaining 7.
 [1, 1, 3, 3, 5, 5, 6].Fix 5 and reroll the remaining 5.
 [1, 1, 2, 3, 6]. The astronomer's effect makes 5, confirms that, and rerolls the remaining 4.
 [1, 4, 5, 6]. ok, that makes 9 5s. The rest are rerolls, just for the sake of it. [1, 3, 3]. [5, 6]. [1].
 Finally, 5 became 10. The king's takeover.
 P1: Philosopher, Guards, Farmer, Astronomer, Lord, King, 12
 
 
 P2: Farmer, Guardsman, Mage, Alchemist, Queen, 10+1
 Hmmm, well, can we get 10 5s? Maybe you can.
 [1, 1, 1, 1, 1, 2, 2, 2, 3, 3, 3, 6, 6]. That's a lot of ends again. It's a waste, but let's give up on 1 and collect on 2. There are also guards. 8 rerolls.
 [2, 3, 4, 4, 4, 4, 4, 5, 5]. 2 locked and reroll.
 [4, 4, 4, 4, 4, 4, 5, 6]. Add 2 more at the guard and lock that. 5 now.
 [1, 2, 3, 3, 4, 6, 6]. 2 locked and reroll.
 [2, 3, 4, 4, 6, 6]. 2 locked and reroll.
 [1, 2, 5, 5, 6]. 2 locked and reroll.
 [3, 3, 4, 5]. So we have 8 now, and if we make 3 more, we can recapture them. Then change 3 to 1 with the sorcerer. Add 1 with the queen. Change 1, 1, 4 to 2, 2, 2, 2 with the alchemist. Now we have 11. Reroll the remaining 2. [2, 2]. Cheat, right?
 Finally, there were 13 2s. Recapture of the King.
 P2: Farmer, Guardsman, Mage, Alchemist, Queen, 13
 
 ** round 7
 I think it's the end, but I dare to continue.
 P1: Philosopher, Guardsman, Farmer, Astronomer, Lord, 12+1+2
 [1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 5, 5, 5, 5, 5, 6, 6]. Lock 2. 5 in the guard and reroll. 4 now.
 [1, 1, 2, 2, 2, 2, 3, 4, 5, 5, 5, 5, 5, 6]. 5 locked and reroll. Now 8 pieces.
 [2, 2, 2, 3, 4, 4, 5, 6]. 5 locked and reroll. Nine now.
 [2, 3, 3, 3, 3, 3, 6, 6]. Changed to 5 in the Astronomer and locked. 10 now.
 [2, 2, 3, 5, 5, 6]. 5 locked and reroll. Now 12.
 [1, 2, 2, 5]. 5 locked and reroll. Now 13.
 [4, 4, 6]. Kita Kita. Change 4,6 to 5,5 in the philosopher. 15 now.
 [1]. Termination.
 Now, let's say that the king is taken by 15 5s.
 P1: Philosopher, Guardsman, Farmer, Astronomer, Lord, 16
 
 
 P2: Farmer, Guardsman, Mage, Alchemist, Queen, 13+1
 Hmmm. It's tough to get 15 dice, because of the number of dice. With the addition of the guards and the queen, there are barely 16.
 [2, 2, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, 6]. Lock 2. 5 in the guard and reroll. 5 now.
 [2, 2, 2, 3, 3, 3, 4, 5, 5, 6, 6]. Alchemist changed 3, 6, 6 to 5, 5, 5, 5 and locked. 10 now.
 [1, 3, 4, 5, 5]. 5 locked and reroll. Now 12.
 [1, 5, 6]. 5 locked and reroll. Now 13.
 [2, 5]. 5 locked and rerolled. 14 now.
 [5]. Cheat. lol Add 5 with the queen and lock. 16.
 The 5 is now 16 and the king is recaptured.
 P2: Farmer, Guardsman, Mage, Alchemist, Queen, 16
 
 ** round 8
 P1: Philosopher, Guardsman, Farmer, Astronomer, Lord, 16+1+2
 The number of dice is overwhelming.
 [1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 5, 5, 5, 6]. let's go with 2. Five now.
 [2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 6, 6, 6]. Now seven.
 [1, 1, 1, 2, 3, 3, 4, 4, 5, 5, 5, 6, 6]. Now 8 pieces.
 [1, 1, 3, 3, 4, 4, 4, 5, 6, 6, 6]. The effect of the philosopher changed 1,3 to 2,2. Now 10.
 [1, 1, 1, 2, 2, 2, 3, 3, 5, 6]. Now 12.
 [1, 1, 2, 3, 4, 5, 6]. Now 13.
 [2, 2, 2, 4, 6, 6]. Now 16.
 [3, 4, 6]. Add 2 more in the guard and now 17.
 [2, 2, 5]. End up changing 5 to 2 in the Astronomer. 20 now.
 2 for 20 and the King's takeover.
 P1: Philosopher, Guards, Farmer, Astronomer, Lord, King, 20
 
 
 P2: Farmer, Guardsman, Mage, Alchemist, Queen, 16+1
 I can't physically do 20 of them lol.
 Ended.
 
 ** Finally
 
 I'm tired of it.
 
 *1267851705* Simulation of Petition to the King
 With no control over the number of rolls, how many rows can be made on average when there are n dice?
 >||
 3 1.8281
 4 2.419
 5 3.0692
 6 3.7438
 7 4.5061
 8 5.2729
 9 6.1047
 10 6.9652
 11 7.8432
 12 8.7563
 13 9.6634
 14 10.6325
 15 11.5703
 16 12.5577
 17 13.527
 18 14.4711
 19 15.4639
 ||<
 So cards that add dice bring a +0.6 expectation increase effect even in the early stages of the game. And it does so every turn. Dice roll controls can be purchased to immediately increase the expected value, but only by +3 at best.
 
 The first hand has an 80% chance of taking a farmer, and once the farmer is taken and the die roll is four, even without rerolling, there is a 44% chance that the total will be 15 or more, and the chance of taking a guard is also quadrupled. It is a game where it is a prerequisite to hold all the cards that increase the die roll.
 
 Source code below
 >|python|
 from random import choice
 
 NUM_TRIAL = 10000
 DICE = range(6)
 
 def test(NUM_DICE):
     sum = 0
     for _trial in range(NUM_TRIAL):
         dice = [choice(DICE) for _i in range(NUM_DICE)]
         counts = [dice.count(d) for d in DICE]
         counts.sort()
         most = counts[-1]
         score = most
         num_dice = NUM_DICE - most
 
         while num_dice:
             dice = [choice(DICE) for _i in range(num_dice)]
             v = dice.count(0) # WLOG
             if v == 0:
                 score += 0
                 num_dice -= 1
             else:
                 score += v
                 num_dice -= v
 
         sum += score
 
     print float(sum) / NUM_TRIAL
 
 for i in range(3, 20):
     print i,
     test(i)
 ||<
 </body>

[Hatena Diary 2010-03-06 https://nishiohirokazu.hatenadiary.org/archive/2010/03/06]