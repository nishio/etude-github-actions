{
  "id": "6090ec0da287e6002291a2d0",
  "title": "Hatena2014-01-07",
  "created": 1389020400,
  "updated": 1389020400,
  "lines": [
    {
      "id": "6090ec30aff09e00003dec8e",
      "text": "Hatena2014-01-07",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec8f",
      "text": "code:hatena",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec90",
      "text": " <body>",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec91",
      "text": " *1389063822*MacPortがハングする→原因はxcrunだった",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec92",
      "text": " MacPortsがinstall/uninstallをすると何も言わずにハングするようになってしまい、どうやって直したものかとしばらく悩んだ。",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec93",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec94",
      "text": " - 一晩放置しても何も進展せずメッセージも出ない",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec95",
      "text": " - Ctrl-Cで死なず、他のターミナルや電源OFFダイアログまで固まる",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec96",
      "text": " - rm /opt/local/var/macports/registry/.registry.lockで解決しない",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec97",
      "text": " - mv /opt/local/var/macports/ ... してMacPortをパッケージから再インストールしても状況は変わらず",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec98",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec99",
      "text": " 諦めてHomebrewを入れたら、あっさり答えがわかった。「Error: Your xcode-select path is currently set to '/'. 」だそうな。",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec9a",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec9b",
      "text": " >||",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec9c",
      "text": " $ brew search scikit-learn ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec9d",
      "text": " Error: Your xcode-select path is currently set to '/'. ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec9e",
      "text": " This causes the `xcrun` tool to hang, and can render Homebrew unusable. ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003dec9f",
      "text": " If you are using Xcode, you should: ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deca0",
      "text": "   sudo xcode-select -switch /Applications/Xcode.app ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deca1",
      "text": " Otherwise, you should: ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deca2",
      "text": "   sudo rm -rf /usr/share/xcode-select ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deca3",
      "text": " ||<",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deca4",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deca5",
      "text": " sudo xcode-select -switch /Applications/Xcode.app したらMacPortもちゃんと動くようになった。",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deca6",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deca7",
      "text": " *1389084079*scikit-learnをインストールした",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deca8",
      "text": " MacOSX(10.7.5)で<a href='http://scikit-learn.org/stable/install.html'>Installing scikit-learn</a>を見ながらpip installしたらあっさり成功したので喜んでいたのだが、いざ使ってみるとsoを読もうとしてATLで始まるシンボルを見つけられずにエラーになる。",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deca9",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decaa",
      "text": " import sklearnが成功しただけで満足して、ちゃんと「nosetests sklearn --exe」しなかったのがいけない。動的に読み込まれるものがちゃんと動くかどうかテストすることが必要だった。",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decab",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decac",
      "text": " 今回の問題は、振る舞いとしてはこれと同じ：<a href='http://stackoverflow.com/questions/14861169/scikit-learn-fails-to-load'>python - scikit-learn fails to load - Stack Overflow</a>",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decad",
      "text": " >||",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decae",
      "text": " from .cd_fast import sparse_std",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decaf",
      "text": " ImportError: sklearn/linear_model/cd_fast.so: undefined symbol: ATL_dcopy",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decb0",
      "text": " ||<",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decb1",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decb2",
      "text": " で、こちらではワークアラウンドのスクリプトが紹介されている。<a href='https://github.com/scikit-learn/scikit-learn/issues/1247'>Linking problem with atlas on OS X &#183; Issue #1247 &#183; scikit-learn/scikit-learn</a>",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decb3",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decb4",
      "text": " このスクリプトは「-L/opt/local/libが付いているコマンドを、全部-L/opt/local/libを削って再実行」というもの。しかし、あれはportでいれて、これはpipで入れて、それはソースからワークアラウンドスクリプト噛ませて入れて、というのはなるべくしたくないなぁ。",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decb5",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decb6",
      "text": " MacPortで入っているATLASが悪さをしている風だったので、まずMacPortをバッサリ削除して、そこからport install py27-scikit-learnで入れたらどうなるかを確認してみた。テストでATLAS系の問題が引っかからなくなった。めでたしめでたし。",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decb7",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decb8",
      "text": " でもテストは1個エラーになる。",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decb9",
      "text": " >||",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decba",
      "text": " ======================================================================",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decbb",
      "text": " ERROR: sklearn.cluster.bicluster.tests.test_utils.test_get_submatrix",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decbc",
      "text": " ----------------------------------------------------------------------",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decbd",
      "text": " Traceback (most recent call last):",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decbe",
      "text": "   File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nose/case.py\", line 197, in runTest",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decbf",
      "text": "     self.test(*self.arg)",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decc0",
      "text": "   File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/sklearn/cluster/bicluster/tests/test_utils.py\", line 43, in test_get_submatrix",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decc1",
      "text": "     assert_true(np.all(X != -1))",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decc2",
      "text": "   File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py\", line 422, in assertTrue",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decc3",
      "text": "     if not expr:",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decc4",
      "text": "   File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/sparse/base.py\", line 183, in __bool__",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decc5",
      "text": "     raise ValueError(\"The truth value of an array with more than one \"",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decc6",
      "text": " ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all().",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decc7",
      "text": " ",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decc8",
      "text": " ----------------------------------------------------------------------",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decc9",
      "text": " ||<",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decca",
      "text": " >|python|",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deccb",
      "text": " def test_get_submatrix():",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deccc",
      "text": "     data = np.arange(20).reshape(5, 4)",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deccd",
      "text": "     rows = [True, True, False, False, True]",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decce",
      "text": "     cols = [False, False, True, True]",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003deccf",
      "text": "     for X in (data, csr_matrix(data)):",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decd0",
      "text": "         submatrix = get_submatrix(rows, cols, X)",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decd1",
      "text": "         if issparse(submatrix):",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decd2",
      "text": "             submatrix = submatrix.todense()",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decd3",
      "text": "         assert_array_equal(submatrix, [[2, 3],",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decd4",
      "text": "                                        [6, 7],",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decd5",
      "text": "                                        [18, 19]])",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decd6",
      "text": "         submatrix[:] = -1",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decd7",
      "text": "         assert_true(np.all(X != -1))",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decd8",
      "text": " ||<",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decd9",
      "text": " これcsr_matrix(data)がsparse matrixを返して、X != -1でブロードキャストされてboolのsparse matrixになって、 *それがnp.allに渡されてもなぜかboolではなくsparse matrixが返る* という現象なのでsparse matrixのバグかnp.allの設計がイケてないのかじゃないかと疑っているが、まあ続きは今度気が向いたら追いかける。",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decda",
      "text": " </body>",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decdb",
      "text": "",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec30aff09e00003decdc",
      "text": "[はてなダイアリー 2014-01-07 https://nishiohirokazu.hatenadiary.org/archive/2014/01/07]",
      "created": 1389020400,
      "updated": 1389020400,
      "userId": "582e63d27c56960011aff09e"
    }
  ]
}