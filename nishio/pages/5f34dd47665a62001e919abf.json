{
  "id": "5f34dd47665a62001e919abf",
  "title": "F値はなぜ調和平均なのか",
  "created": 1597300040,
  "updated": 1597300745,
  "lines": [
    {
      "id": "5f34dd47665a62001e919abf",
      "text": "F値はなぜ調和平均なのか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de721f",
      "text": "from [F値]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7220",
      "text": "F値はなぜ調和平均なのか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7221",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7222",
      "text": "F値とは http://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7223",
      "text": " `F1 = 2 * (precision * recall) / (precision + recall)`",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7224",
      "text": " 最大1最小0",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7225",
      "text": " precision == recall の時にはF値も同じ値",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7226",
      "text": " precision と recall のどちらかが0の時にはF1も0になる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7227",
      "text": "[https://gyazo.com/5645c89ab5b98065c1903cee82c3c507]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7228",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7229",
      "text": " TP: True Positive",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de722a",
      "text": " FP: False Positive",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de722b",
      "text": " FN: False Negative",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de722c",
      "text": " TN: True Negative",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de722d",
      "text": " Precision:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de722e",
      "text": " [$ P = \\frac{TP}{TP+FP}]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de722f",
      "text": " Recall:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7230",
      "text": " [$ R=\\frac{TP}{TP+FN}]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7231",
      "text": " 逆数の和",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7232",
      "text": " [$ \\frac{1}{P} + \\frac{1}{R} = \\frac{2TP+FP+FN}{TP}]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7233",
      "text": " F1 scoreはPとRの調和平均",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34de67aff09e0000b92739",
      "text": " [$ F1 = \\frac{2 P R}{P + R} = \\frac{2 \\frac{TP}{TP + FP} \\frac{TP}{TP + FN} }{\\frac{TP}{TP + FP} +\\frac{TP}{TP + FN}} = \\frac{2 TP}{(TP + FN) + (TP + FP)} = \\frac{2 TP}{2TP + FN+ FP}]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300328,
      "updated": 1597300710
    },
    {
      "id": "5f34dd47aff09e0000de7234",
      "text": " [$ \\frac{2}{\\frac{1}{P} + \\frac{1}{R}} = \\frac{2TP}{2TP + FP + FN}]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300472
    },
    {
      "id": "5f34dd47aff09e0000de7235",
      "text": " Normalized Symmetric Difference http://www.dcs.gla.ac.uk/Keith/pdf/Chapter7.pdf p.128",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7236",
      "text": " [$ E = \\frac{FP + FN}{2TP + FP + FN} ]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7237",
      "text": " F1とEを足すと1: F1 + E = 1",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7238",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7239",
      "text": " Fβスコア",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de723a",
      "text": " [$ F_\\beta = \\frac{(1 + \\beta ^ 2) TP}{(1 + \\beta^2) TP + \\beta^2 FN + FP}]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de723b",
      "text": " [$ \\frac{1}{P} + \\frac{\\beta^2}{R} = \\frac{(TP+FP)+\\beta^2(TP+FN)}{TP}]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de723c",
      "text": " 要するにRecallに[$ \\beta^2]の重みを付けた調和平均",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de723d",
      "text": " なぜ[$ \\beta]ではなく[$ \\beta^2]なのか？？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de723e",
      "text": " [$ F_\\beta = \\frac{(1 + \\beta ^ 2) TP}{(1 + \\beta^2) TP + \\beta^2 FN + FP} = \\frac{1+\\beta^2}{\\frac{1}{P} + \\frac{\\beta^2}{R}}]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de723f",
      "text": "\t係数は省略してZと書くと",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7240",
      "text": "\t[$ \\frac{\\partial F_\\beta}{\\partial R} = Z \\frac{\\beta^2}{R^2}, \\frac{\\partial F_\\beta}{\\partial P} = Z \\frac{1}{P^2}]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7241",
      "text": " つまり[$ \\beta P = R] の時勾配が一致する",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7242",
      "text": " 勾配が一致するということは「PやRを同じだけ動かした時のスコアに対する影響が同じ」ということ。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    },
    {
      "id": "5f34dd47aff09e0000de7243",
      "text": " RがPよりβ倍大きいときに均衡するということ？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1597300040,
      "updated": 1597300040
    }
  ]
}