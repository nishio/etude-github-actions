{
  "id": "6090ec03a287e6002291a08c",
  "title": "Hatena2010-04-02",
  "created": 1270134000,
  "updated": 1270134000,
  "lines": [
    {
      "id": "6090ec27aff09e00003d5386",
      "text": "Hatena2010-04-02",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5387",
      "text": "code:hatena",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5388",
      "text": " <body>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5389",
      "text": " *1270200370*覆面算",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d538a",
      "text": " http://www16.atwiki.jp/tokoroten/pages/1211.html を見ていたら僕も書きたくなったので。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d538b",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d538c",
      "text": " MacBookに10分くらい頑張ってもらって、ZERO + ZERO = ZERO から TEN + TEN == TWENTY までの全問題について総当たりをしたのだけども、結局あんまり面白い問題は見つからなかった。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d538d",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d538e",
      "text": " 答えのある問題だけ抜粋列挙しておくと:",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d538f",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5390",
      "text": " Q: FOUR + FIVE = NINE",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5391",
      "text": " num_answer: 72",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5392",
      "text": " Q: FOUR + FOUR = EIGHT",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5393",
      "text": " num_answer: 56",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5394",
      "text": " Q: TWO + FIVE = SEVEN",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5395",
      "text": " num_answer: 36",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5396",
      "text": " Q: ONE + FOUR = FIVE",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5397",
      "text": " num_answer: 1200",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5398",
      "text": " Q: TWO + TWO = FOUR",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5399",
      "text": " num_answer: 19",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d539a",
      "text": " Q: ONE + ONE = TWO",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d539b",
      "text": " num_answer: 18",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d539c",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d539d",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d539e",
      "text": " 以下ソースコード。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d539f",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53a0",
      "text": " >|python|",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53a1",
      "text": " # -*- coding: utf-8 -*-",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53a2",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53a3",
      "text": " WORDS = \"\"\"ZERO ONE TWO THREE FOUR FIVE SIX SEVEN EIGHT NINE TEN",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53a4",
      "text": " ELEVEN TWELVE THIRTEEN FOURTEEN FIFTEEN SIZTEEN SEVENTEEN EIGHTEEN NINETEEN TWENTY\"\"\".split()",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53a5",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53a6",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53a7",
      "text": " def compile_word(w):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53a8",
      "text": "     \"e.g. ZERO => (((Z) * 10 + E) * 10 + R) * 10 + O\"",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53a9",
      "text": "     body = w[0]",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53aa",
      "text": "     for c in w[1:]:",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ab",
      "text": "         body = \"(%(body)s) * 10 + %(c)s\" % locals()",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ac",
      "text": "     return body",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ad",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ae",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53af",
      "text": " def perm(n, result):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53b0",
      "text": "     n -= 1",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53b1",
      "text": "     for i in range(10):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53b2",
      "text": "         if i not in result:",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53b3",
      "text": "             if n > 0:",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53b4",
      "text": "                 for r in perm(n, result + [i]):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53b5",
      "text": "                     yield r",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53b6",
      "text": "                 ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53b7",
      "text": "             else:",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53b8",
      "text": "                 yield result + [i]",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53b9",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ba",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53bb",
      "text": " def solve(v0, v1, sum_):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53bc",
      "text": "     print \"Q: %s + %s = %s\" % (v0, v1, sum_)",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53bd",
      "text": "     if len(sum_) > max(len(v0), len(v1)) + 1: return # no answer",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53be",
      "text": "     if len(sum_) < max(len(v0), len(v1)): return # no answer",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53bf",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53c0",
      "text": "     used_chars = set((v0 + v1 + sum_))",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53c1",
      "text": "     if len(used_chars) > 10: return # unsolvable",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53c2",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53c3",
      "text": "     args = \", \".join(used_chars)",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53c4",
      "text": "     body = \"%s + %s == %s\" % (",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53c5",
      "text": "         compile_word(v0), compile_word(v1), compile_word(sum_))",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53c6",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53c7",
      "text": "     prod = eval(\"lambda %(args)s: %(body)s\" % locals())",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53c8",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53c9",
      "text": "     _to_str = lambda w: \" + \".join(\"str(%s)\" % c for c in w)",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ca",
      "text": "     to_str_body = \"%s + ' + ' + %s + ' = ' + %s\" % (",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53cb",
      "text": "         _to_str(v0), _to_str(v1), _to_str(sum_))",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53cc",
      "text": "     to_str_func = eval(\"lambda %(args)s: %(to_str_body)s\" % locals())",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53cd",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ce",
      "text": "     num_answer = 0",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53cf",
      "text": "     for xs in perm(len(used_chars), []):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53d0",
      "text": "         if prod(*xs):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53d1",
      "text": "             print to_str_func(*xs)",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53d2",
      "text": "             num_answer += 1",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53d3",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53d4",
      "text": "     if num_answer: print \"num_answer:\", num_answer",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53d5",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53d6",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53d7",
      "text": " def main():",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53d8",
      "text": " #    for sum_ in range(10, -1, -1):# real\t2m13.308s",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53d9",
      "text": "     for sum_ in range(20, 10, -1):# real\t7m20.159s",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53da",
      "text": "         for v0 in range(sum_ / 2 + 1):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53db",
      "text": "             v1 = sum_ - v0",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53dc",
      "text": "             # 0 <= v0 <= v1 <= N",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53dd",
      "text": "             solve(WORDS[v0], WORDS[v1], WORDS[sum_])",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53de",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53df",
      "text": " main()",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53e0",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53e1",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53e2",
      "text": " *1270203965*迷路最短経路問題",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53e3",
      "text": " <a href='http://okajima.air-nifty.com/b/2010/01/post-abc6.html'>人生を書き換える者すらいた。: 人材獲得作戦・４　試験問題ほか</a>の話",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53e4",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53e5",
      "text": " 僕が受験者で、こういう問題を出されとしたら、まず確認することがひとつある。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53e6",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53e7",
      "text": " 「迷路のサイズの上限が設定されていませんが、4TBのテキストファイルで迷路が与えられる可能性を考慮すべきですか？」考慮しなくていいと書いていない以上、デフォルトでは考慮すべきであり、で考慮するととてもめんどくさいので後で「あ、そこまで要求してなかったのに」とか言われないために出題者が自覚しているか確認する必要がある。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53e8",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53e9",
      "text": " で、「yes」って言われたら…なかなか歯ごたえのある問題だな！",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ea",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53eb",
      "text": " 迷路が正方形とはどこにも書いていない以上、縦4マス横1テラマスの迷路でもvalid。だから「迷路のデータファイルを1行読んで」なんて書いてたらその時点でアウト。最初にすべきことは安全な文字数ずつ頭から読んでいって最初に現れる改行の位置を調べること。改行の文字コードがなんであるかは指定されていないのでCRが見つかった場合はLFが続くかどうか確認する必要があるだろう。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ec",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ed",
      "text": " そうやって1行の長さLINE_WIDTHと改行コードの長さNLがわかれば、あとは任意の座標(x, y)の値が読みたければx + y * (LINE_WIDTH + NL)の位置にシークすればいいので、メモリに迷路データを持たずに処理ができる。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ee",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ef",
      "text": " 次に考慮すべきは「探索の縁のサイズが最大どれくらいになるか」だろう。探索の縁ってのは幅優先探索の「次に探索すべきものリスト」と同じ意味にとってもいい。どちらにせよ、これは障害物が全くないときに1ステップに4ずつ増える。縦横2メガマスずつの正方形の真ん中にスタートがある時の1メガステップ目が一番大きくなり、そのサイズは4メガマス。ということは探索の縁1マスあたり500KBくらいまではメモリに乗せても大丈夫そう。当たり前だけども「そこまでの最短経路」全体をメモリに乗せてはいけない(最悪の場合4テラマスの一本道があり得る)",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53f0",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53f1",
      "text": " ここらでそろそろ擬似コードを考え始める。まず最初の改行コードサーチの時に最悪の場合データ全体を舐めるはめになるので、スタートを探すのも同時にしておこう。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53f2",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53f3",
      "text": " LINE_WIDTH, NL, START_POS = initial_search()",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53f4",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53f5",
      "text": " でもって、3つのリストを作る。prevとcurとnext。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53f6",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53f7",
      "text": " prev = []",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53f8",
      "text": " cur = [(START_POS, None)]",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53f9",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53fa",
      "text": " 繰り返しスタート: curの各要素posについての4方向の隣の座標を計算する。そのそれぞれにつき、それpがprevに含まれていないかを確認する。含まれていなかったものについて、データファイルを見に行ってそれが障害物やゴールでないかを確認する。どちらでもなければnextに(p, pos)を追加する。ゴールだった場合の処理は後で書く。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53fb",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53fc",
      "text": " curの全要素の探索が終わったら、",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53fd",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53fe",
      "text": " prevをファイルに書き出し",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d53ff",
      "text": " prev = cur",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5400",
      "text": " cur = next",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5401",
      "text": " next = []",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5402",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5403",
      "text": " する。prevのファイルへの書き出しは、後で戻しやすいように連番整数などを振っていく。ここでメモリ使用量を念のため確認するけど、xやyの値が最大4テラになりうると言うことはまあ6バイトあれば足りるので、2メガマス * 3 * 4 * 6バイトで28MB。十分十分。たぶんPythonで書いても大丈夫なレベルだ。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5404",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5405",
      "text": " さて、ここで繰り返しスタートへ戻る。こうやって「スタート」「スタートから1ステップで到達できるマス(とその1歩前のマス)」「2ステップで到達出来るマス(とその1歩前のマス)」というファイルが順に出力されていく。ループを抜けるのは先ほど説明を省いた「ファイルの指定座標を読んだらゴールだった」の場合。その時には書き出して行ったファイルを逆の順番に読みながら1歩ずつ遡っていけば最短経路がわかる。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5406",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5407",
      "text": " とここまでを自然言語で説明した上で、最後にもうひとつ確認する。「で、これを実際にコードに落とす必要がありますか？」…だってここまで考え終わった時点でもう飽きちゃったもん。書かないでいいなら書かない(笑)",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5408",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5409",
      "text": " <hr>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d540a",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d540b",
      "text": " >>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d540c",
      "text": " id:showyou   2010/04/03 11:50  4テラバイトとかいうともはやファイルシステムの仕様すら気にした方が良いレベルだなぁ。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d540d",
      "text": " <<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d540e",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d540f",
      "text": " とりあえず<a href='http://en.wikipedia.org/wiki/NTFS'>NTFS</a>のMax file sizeは16 エクサバイト弱なので余裕かと思った。だけど迷路サイズが16エクサバイトだと探索の縁はいくらになるのかな。8ギガマスくらいになっちゃうのかな。だとすると「メモリに乗せていい」という判断は間違いってことになるか。nextとcurに関してはファイルに追記で書き出したり、ファイルの頭からシーケンシャルに読んで行くので構わないからメモリに持つ必要はないけど、prevをファイルに置いてcurの1マスごとに全探索したのではかなり遅くなるだろうなぁ。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5410",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5411",
      "text": " *1270212193*Jinja2のfilterとmacroをいじる",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5412",
      "text": " filterはsettingsで指定して、テンプレートのどこからでも使える。macroはテンプレートの中で直接定義するか、定義しているテンプレートをimportして使う。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5413",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5414",
      "text": " filterで色々定義してあるもののうち、macroにする方がいいに違いないものを移動して行く。一番シンプルなフィルタ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5415",
      "text": " >|python|",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5416",
      "text": " def q2img(q):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5417",
      "text": "     return '<img src=\"/q/image/%s.png\">' % q.short_key",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5418",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5419",
      "text": " 使われ方。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d541a",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d541b",
      "text": " {{ q|q2img|safe() }}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d541c",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d541d",
      "text": " これをマクロに変える。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d541e",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d541f",
      "text": " {% macro to_img(q) -%}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5420",
      "text": " <img src=\"/q/image/{{ q.short_key }}.png\">'",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5421",
      "text": " {%- endmacro %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5422",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5423",
      "text": " 冒頭でimport",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5424",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5425",
      "text": " {% import \"main/macro_for_quiz.html\" as macro4q %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5426",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5427",
      "text": " で、こう使う。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5428",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5429",
      "text": " {{ macro4q.to_img(q) }}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d542a",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d542b",
      "text": " ふむふむ。この件に関してはマクロの方が自然だな。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d542c",
      "text": " <hr>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d542d",
      "text": " その他のフィルタもマクロにすべきだったらマクロにしようと思ったのだが、なんというかこれifとか算術演算とかクエリとか含んでるし、最初の2つに関してはマクロでもかけるけどダークサイドな気がするので",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d542e",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d542f",
      "text": " あえてやる！",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5430",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5431",
      "text": " 元のフィルタ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5432",
      "text": " >|python|",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5433",
      "text": " def q2buttons(q):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5434",
      "text": "     result = []",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5435",
      "text": "     w = 100 / len(q.answer_arrangement.split()[0])",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5436",
      "text": "     for c in q.answer_arrangement:",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5437",
      "text": "         if c == \" \":",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5438",
      "text": "             result.append(\"<br/>\")",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5439",
      "text": "         else:",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d543a",
      "text": "             result.append('<input type=submit name=\"answer\" value=\"%s\" style=\"width:%d%%;font-size:200%%;\">' % (c, w))",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d543b",
      "text": "     ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d543c",
      "text": "     return \"\".join(result)",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d543d",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d543e",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d543f",
      "text": " 作ったマクロ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5440",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5441",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5442",
      "text": " {% macro to_buttons(q) -%}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5443",
      "text": " {% set width = 100 / q.answer_arrangement.split()[0].__len__() %} ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5444",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5445",
      "text": " {% for c in q.answer_arrangement -%}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5446",
      "text": "     {%- if c == \" \" -%}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5447",
      "text": "         <br/>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5448",
      "text": "     {%- else -%}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5449",
      "text": "         <input type=submit name=\"answer\" value=\"{{ c }}\"",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d544a",
      "text": " \t       style=\"width:{{ width }}%; font-size:200%;\">",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d544b",
      "text": "     {%- endif -%}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d544c",
      "text": " {%- endfor %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d544d",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d544e",
      "text": " {%- endmacro %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d544f",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5450",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5451",
      "text": " おお、なんかできてしまった。そして意外と醜くない。加減乗除やifの条件式が「普通の文法」だからだなぁ。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5452",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5453",
      "text": " len(xs)しようとして怒られたのでかわりに__len__を使ったけど、builtin filtersにlengthってのがあるからxs.__len__()のかわりにxs|lengthでいいんだな。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5454",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5455",
      "text": " <hr>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5456",
      "text": " もう一歩ダークサイドに足を踏み入れてみる。元のフィルタ。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5457",
      "text": " >|python|",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5458",
      "text": " def adj_quiz(q, typ):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5459",
      "text": "     \"typ: newer | older\"",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d545a",
      "text": "     from models import Question",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d545b",
      "text": "     assert isinstance(q, Question)",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d545c",
      "text": "     if typ == \"newer\":",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d545d",
      "text": "         adj = Question.all().filter(\"published_on >\", q.published_on).order(\"published_on\").get()",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d545e",
      "text": "     else:",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d545f",
      "text": "         adj = Question.all().filter(\"published_on <\", q.published_on).order(\"-published_on\").get()",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5460",
      "text": "     ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5461",
      "text": "     if not adj:",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5462",
      "text": "         return \"\"",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5463",
      "text": "     if typ == \"newer\":",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5464",
      "text": "         return '<<<a href=\"/q/%s/\">Newer Quiz</a>' % adj.short_key",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5465",
      "text": "     else:",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5466",
      "text": "         return '<a href=\"/q/%s/\">Older Quiz</a>>>' % adj.short_key",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5467",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5468",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5469",
      "text": " assertがないから、予期しない値が渡されたときにデバッグに苦労しそうな気がするなぁ。filterでassert_isinstance(cls)とかがあれば解決するのか(そんなものをテンプレートに書くのかよと)",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d546a",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d546b",
      "text": " from models import Questionができないが、まあなんとでもなる(ぇ) 今回は引数がQuestionのインスタンスだから__class__で取れるし、そうじゃなくてもクラスをインポートするフィルタを(マテ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d546c",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d546d",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d546e",
      "text": " {% macro adj_quiz(q, typ) -%}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d546f",
      "text": "     {% if typ == \"newer\" %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5470",
      "text": "         {% set adj = q.__class__.all().filter(\"published_on >\", q.published_on).order(\"published_on\").get() %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5471",
      "text": "     {% else %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5472",
      "text": "         {% set adj = q.__class__.all().filter(\"published_on <\", q.published_on).order(\"-published_on\").get() %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5473",
      "text": "     {% endif %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5474",
      "text": "     ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5475",
      "text": "     {% if not adj %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5476",
      "text": "     {% elif typ == \"newer\" %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5477",
      "text": "         <<<a href=\"/q/{{ adj.short_key }}/\">Newer Quiz</a>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5478",
      "text": "     {% else %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5479",
      "text": "         <a href=\"/q/{{ adj.short_key }}/\">Older Quiz</a>>>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d547a",
      "text": "     {% endif %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d547b",
      "text": " {%- endmacro %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d547c",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d547d",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d547e",
      "text": " おいおいおいおい、できちゃうよ。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d547f",
      "text": " >|python|",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5480",
      "text": " def as_class(class_name):",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5481",
      "text": "     import models",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5482",
      "text": "     return getattr(models, class_name)",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5483",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5484",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5485",
      "text": " >||",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5486",
      "text": " {% set adj = \"Question\"|as_class().all().filter(\"published_on <\", q.published_on).order(\"-published_on\").get() %}",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5487",
      "text": " ||<",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5488",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5489",
      "text": " できちゃうよ。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d548a",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d548b",
      "text": " <hr>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d548c",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d548d",
      "text": " 結論。Jinja2はすごい。自由度がものすごく高い。Pythonをよくわかっている人間がテンプレートを書く場合にはとても便利。自重せずにPythonの機能を使ってしまうような人間(e.g. 僕)にJinja2でテンプレートを書かせると、PythonでメタプログラミングできるくらいのPythonの知識がなければ修正できないようなテンプレートが出来上がる。しかも黒魔術にしか見えないas_classフィルタなんかが「(僕にとっては)ソースやフィルタの名前を見れば一目瞭然だろ」という理由でドキュメント化されない！",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d548e",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d548f",
      "text": " 危険だ！危険な匂いがプンプンとする！Jinja2はテンプレートエンジンに見えるけど実はHTMLとかを出力するのが簡単なようにドメイン特化したプログラミング言語じゃないか！自制心を強く持たないと新たなシスの暗黒卿が生まれてしまう！！",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5490",
      "text": " ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5491",
      "text": " *1270221382*iPhone + jQuery",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5492",
      "text": " iPhoneでjQueryを使えるのかどうか分からなかったので調べているナウ",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5493",
      "text": " - iPhone UI http://iphone.hohli.com/",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5494",
      "text": " - jQTouch &#8212; jQuery plugin for mobile web development http://www.jqtouch.com/",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5495",
      "text": " このあたりを明日調べる。",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5496",
      "text": " </body>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5497",
      "text": " <comments>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5498",
      "text": " <comment>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d5499",
      "text": " <username>TOKOROTEN</username>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d549a",
      "text": " <body>http://www.aoky.net/articles/david_pickett/stupid_interview_questions.htm<br>これ置いときますね。</body>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d549b",
      "text": " <timestamp>1270222980</timestamp>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d549c",
      "text": " </comment>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d549d",
      "text": " <comment>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d549e",
      "text": " <username>showyou</username>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d549f",
      "text": " <body>4テラバイトとかいうともはやファイルシステムの仕様すら気にした方が良いレベルだなぁ。</body>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d54a0",
      "text": " <timestamp>1270263001</timestamp>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d54a1",
      "text": " </comment>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d54a2",
      "text": " <comment>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d54a3",
      "text": " <username>通りすがり</username>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d54a4",
      "text": " <body>いまjinja2のmacroでModelFormをtwitter bootstrap用の<form>として出力するコードをちまちま書いています。いやー、これ便利ですわ。にしても、上ではすごいことやってますねー。小さなサイトならviews.pyなど書かないで、全部macroでコーディングってことも可能な気がしてきますｗ</body>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d54a5",
      "text": " <timestamp>1355424217</timestamp>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d54a6",
      "text": " </comment>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d54a7",
      "text": " </comments>",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d54a8",
      "text": "",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d54a9",
      "text": "[はてなダイアリー 2010-04-02 https://nishiohirokazu.hatenadiary.org/archive/2010/04/02]",
      "created": 1270134000,
      "updated": 1270134000,
      "userId": "582e63d27c56960011aff09e"
    }
  ]
}