{
  "id": "6101992e0ae57f001c87e2b4",
  "title": "選択範囲をKeichoに尋ねるPopupMenu",
  "created": 1627494704,
  "updated": 1627506618,
  "lines": [
    {
      "id": "6101992e0ae57f001c87e2b4",
      "text": "選択範囲をKeichoに尋ねるPopupMenu",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627494704,
      "updated": 1627494707
    },
    {
      "id": "61019d98aff09e0000ce5742",
      "text": "[ScrapboxでKeichoを使う拡張]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627495833,
      "updated": 1627495833
    },
    {
      "id": "6101992faff09e0000fe4301",
      "text": "[/takker/選択範囲をKeichoに尋ねるPopupMenu]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627494704,
      "updated": 1627494704
    },
    {
      "id": "6101992faff09e0000fe4302",
      "text": "　を試してみた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627494704,
      "updated": 1627506618
    },
    {
      "id": "6101993caff09e0000fe4303",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627494716,
      "updated": 1627494716
    },
    {
      "id": "6101a48eaff09e0000e56cab",
      "text": "2021-07-29時点のバージョンをコピペして動かしてみる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497615,
      "updated": 1627497635
    },
    {
      "id": "61019e13aff09e0000fe431d",
      "text": "code:js",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627495956,
      "updated": 1627495965
    },
    {
      "id": "61019e1baff09e0000fe431f",
      "text": " import {insertText} from '../scrapbox-insert-text-2/script.js';",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627495963,
      "updated": 1627495966
    },
    {
      "id": "61019e14aff09e0000fe431e",
      "text": "`https://scrapbox.io/api/code/nishio/scrapbox-insert-text-2/script.js net::ERR_ABORTED 404 (Not Found)`",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627495956,
      "updated": 1627497549
    },
    {
      "id": "61019e38aff09e0000fe4321",
      "text": "そりゃそうだ、絶対パスに修正",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627495993,
      "updated": 1627497581
    },
    {
      "id": "6101a46daff09e000064ccd4",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497581,
      "updated": 1627497581
    },
    {
      "id": "61019e7eaff09e00006b7521",
      "text": "`Uncaught (in promise) ReferenceError: getTalkId is not defined`",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627496063,
      "updated": 1627497596
    },
    {
      "id": "61019e7eaff09e00006b7522",
      "text": "スクリプト二つあるのを見落としてた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627496063,
      "updated": 1627497606
    },
    {
      "id": "6101a486aff09e000064ccd5",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497606,
      "updated": 1627497606
    },
    {
      "id": "61019f40aff09e0000c2c81a",
      "text": "`Uncaught (in promise) SyntaxError: Unexpected token ')'`",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627496257,
      "updated": 1627497661
    },
    {
      "id": "61019f41aff09e0000c2c81b",
      "text": "[/takker/scrapboxのページ中の同名のcode blockを結合して取り出]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627496258,
      "updated": 1627497662
    },
    {
      "id": "6101a4beaff09e0000e56cac",
      "text": "からコピペして修正",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497663,
      "updated": 1627497678
    },
    {
      "id": "6101a4c4aff09e000064ccd6",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497668,
      "updated": 1627497668
    },
    {
      "id": "61019fe2aff09e00004877e2",
      "text": "`Uncaught (in promise) ReferenceError: askKeicho is not defined`",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627496418,
      "updated": 1627497683
    },
    {
      "id": "6101a229aff09e00004877e4",
      "text": "[TamperMonkey]に下記にあるUserScriptを入れる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497002,
      "updated": 1627497706
    },
    {
      "id": "6101a23faff09e00004877e5",
      "text": "\t[/takker/askKeicho]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497023,
      "updated": 1627497024
    },
    {
      "id": "6101a240aff09e00004877e6",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497025,
      "updated": 1627497025
    },
    {
      "id": "61019cb3aff09e000076add7",
      "text": "テスト",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627495603,
      "updated": 1627497056
    },
    {
      "id": "6101a25faff09e0000971710",
      "text": "code:keicho.json",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497056,
      "updated": 1627497091
    },
    {
      "id": "6101a282aff09e0000971711",
      "text": " {\"talk\": \"Cl72730A3VXGskCtZ6gL\"}",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497091,
      "updated": 1627497091
    },
    {
      "id": "6101a282aff09e0000971712",
      "text": "[/nishio/nisbot.icon]その「テスト」は、どんな「テスト」ですか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497091,
      "updated": 1627497129
    },
    {
      "id": "61019e61aff09e00006b7520",
      "text": "おっ、Scrapbox上でKeichoと話せるようになった",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627496034,
      "updated": 1627497258
    },
    {
      "id": "6101a329aff09e0000971715",
      "text": "[/nishio/nisbot.icon]その「Keicho」は、どんな「Keicho」ですか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497258,
      "updated": 1627497260
    },
    {
      "id": "6101a306aff09e000064ccd3",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627497222,
      "updated": 1627497222
    },
    {
      "id": "61019cb5aff09e000076add8",
      "text": "[/takker/KeichoとのチャットするUserScript]でも既に書かれてるが「選択範囲を決めることなく、回答を送信したい/ボタン一つやキー一発で送信したい」",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627495606,
      "updated": 1627498121
    },
    {
      "id": "6101a690aff09e000064ccd8",
      "text": "　選択しなくてもページ全体のコンテンツにアクセスすることはできてる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498129,
      "updated": 1627498151
    },
    {
      "id": "6101a6a7aff09e000064ccd9",
      "text": "　`[nisbot.icon]`とは別に`[ask_keicho.icon]`みたいなものを作って、ホットキーでそのアイコンより手前の空行でない行を入力とし、アイコンの手前に回答を挿入したらどうか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498151,
      "updated": 1627498330
    },
    {
      "id": "6101a76eaff09e0000a5859b",
      "text": "　code:1",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498351,
      "updated": 1627498355
    },
    {
      "id": "6101a773aff09e0000a5859c",
      "text": "　 テスト(カーソル)[ask_keicho.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498355,
      "updated": 1627498463
    },
    {
      "id": "6101a62faff09e000064ccd7",
      "text": "\tcode:2",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498031,
      "updated": 1627498373
    },
    {
      "id": "6101a788aff09e0000a5859f",
      "text": "　 テスト",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498377,
      "updated": 1627498377
    },
    {
      "id": "6101a7b3aff09e0000a585a1",
      "text": "　 [nisbot.icon]その「テスト」は、どんな「テスト」ですか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498419,
      "updated": 1627498424
    },
    {
      "id": "6101a7c1aff09e0000a585a2",
      "text": "　 (カーソル)[ask_keicho.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498434,
      "updated": 1627498437
    },
    {
      "id": "6101a785aff09e0000a5859e",
      "text": "\tcode:2",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498374,
      "updated": 1627498443
    },
    {
      "id": "6101a7cbaff09e0000a585a3",
      "text": "　 テスト",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498443,
      "updated": 1627498443
    },
    {
      "id": "6101a7cbaff09e0000a585a4",
      "text": "　 [nisbot.icon]その「テスト」は、どんな「テスト」ですか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498443,
      "updated": 1627498443
    },
    {
      "id": "6101a7cbaff09e0000a585a5",
      "text": "　 次の文章(カーソル)[ask_keicho.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498443,
      "updated": 1627498479
    },
    {
      "id": "6101a7cbaff09e0000a585a6",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498443,
      "updated": 1627498443
    },
    {
      "id": "6101a7fdaff09e000064ccda",
      "text": "　むしろこれなら「カーソルのある行」でいいのか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498494,
      "updated": 1627498535
    },
    {
      "id": "6101a826aff09e000064ccdc",
      "text": "　　ホットキーが「質問してくれ改行」になるイメージ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498535,
      "updated": 1627498551
    },
    {
      "id": "6101a874aff09e000064ccdd",
      "text": "　いまKeichoは人間に見せるチャット的UIと密結合に「直前以外の文章に質問するときだけ引用をつける」って振る舞いをしてるけど、常に入力文をレスポンスに含めるようにしてもいい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498613,
      "updated": 1627498700
    },
    {
      "id": "6101a8ccaff09e000064ccde",
      "text": "　　そうするとUserScriptの側はそれを見て挿入位置を決めれる…のかな？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498700,
      "updated": 1627498743
    },
    {
      "id": "6101a8f6aff09e000064ccdf",
      "text": "　　　Scrapboxに非同期で文字を入れてる仕組みをまだ理解してないや",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498743,
      "updated": 1627498758
    },
    {
      "id": "6101a9e8aff09e000064cce0",
      "text": "　　あー、カーソル位置にtextareaが挿入されてるのを使ってるのか、じゃあユーザのカーソル位置にしか書き込めないなぁ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498984,
      "updated": 1627499021
    },
    {
      "id": "6101aa21aff09e000064cce1",
      "text": "　　これは任意の場所にプログラムが書き込むAPIを用意しないScrapboxの思想があるから難しそう、ユーザが自分で移動するしかないか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627499041,
      "updated": 1627499094
    },
    {
      "id": "6101a7fdaff09e000064ccdb",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627498494,
      "updated": 1627498494
    },
    {
      "id": "6101ac57aff09e0000a585a7",
      "text": "　カーソルのある行",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627499607,
      "updated": 1627499613
    },
    {
      "id": "6101ac58aff09e0000a585aa",
      "text": "　　うわ、Textareaってposition: absoluteで浮かべてるのか ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627499608,
      "updated": 1627499959
    },
    {
      "id": "6101ac57aff09e0000a585a8",
      "text": "\t\tXPath",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627499608,
      "updated": 1627500666
    },
    {
      "id": "6101b07baff09e0000a585ab",
      "text": "\t\t\t`$x(\"//span[@class='text' and contains(.,'[ask_keicho.icon]')]\").slice(-1)[0].innerText`",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627500668,
      "updated": 1627500676
    },
    {
      "id": "6101b07faff09e0000a585ac",
      "text": "\t\t\t`\"\\t\\n [nisbot.icon] とは別に [ask_keicho.icon] みたいなものを作って、ホットキーでそのアイコンより手前の空行でない行を入力とし、アイコンの手前に回答を挿入したらどうか\"`",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627500672,
      "updated": 1627500680
    },
    {
      "id": "6101b0e1aff09e0000a585af",
      "text": "\t\thttps://developer.mozilla.org/en-US/docs/Web/API/Document/evaluate",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627500770,
      "updated": 1627501029
    },
    {
      "id": "6101b683aff09e000023b553",
      "text": "\t\t`document.evaluate(\"//span[@class='text' and contains(.,'[ask_keicho.icon]')]\", document).iterateNext().innerText`",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627502211,
      "updated": 1627502213
    },
    {
      "id": "6101b0e1aff09e0000a585b0",
      "text": "アイコンだからこれで取れるのでは？→誤り",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627500770,
      "updated": 1627502302
    },
    {
      "id": "6101b442aff09e000023b540",
      "text": "\t`document.querySelector(\"span.text img[alt='ask_keicho']\").parentElement.parentElement.parentElement.parentElement.innerText`",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627501635,
      "updated": 1627501637
    },
    {
      "id": "6101b6dfaff09e000064cce2",
      "text": "\t誤り: カーソルがアイコンの手前にあるときその行は編集モードになってるのでテキストになってる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627502304,
      "updated": 1627502347
    },
    {
      "id": "6101b264aff09e000023b53e",
      "text": "\tctrl+Enterで起動",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627501157,
      "updated": 1627502354
    },
    {
      "id": "6101b6aeaff09e000023b554",
      "text": "　　[https://gyazo.com/ef790c7995282a347141378543f0201d]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627502254,
      "updated": 1627502371
    },
    {
      "id": "6101b6b0aff09e000023b555",
      "text": "　　おっと…",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627502256,
      "updated": 1627502378
    },
    {
      "id": "6101b72baff09e000064cce3",
      "text": "　　角括弧で囲われてるとき、それを明示されたキーワードと解釈するKeichoの仕様",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627502380,
      "updated": 1627502439
    },
    {
      "id": "6101b767aff09e000064cce4",
      "text": "　　じゃあ`(keicho)`でいいか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627502440,
      "updated": 1627502458
    },
    {
      "id": "6101b264aff09e000023b53f",
      "text": "[test]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627501157,
      "updated": 1627501194
    },
    {
      "id": "6101b148aff09e0000118f75",
      "text": "できた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627500873,
      "updated": 1627503242
    },
    {
      "id": "6101ba8aaff09e000064cce7",
      "text": "　[ScrapboxでCtrl+EnterしてKeichoに質問させる]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627503242,
      "updated": 1627503272
    },
    {
      "id": "6101ba86aff09e000064cce5",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627503239,
      "updated": 1627503239
    },
    {
      "id": "6101ba86aff09e000064cce6",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627503239,
      "updated": 1627503239
    }
  ]
}