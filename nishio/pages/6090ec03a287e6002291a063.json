{
  "id": "6090ec03a287e6002291a063",
  "title": "Hatena2010-02-06",
  "created": 1265382000,
  "updated": 1265382000,
  "lines": [
    {
      "id": "6090ec27aff09e00003d47d3",
      "text": "Hatena2010-02-06",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47d4",
      "text": "code:hatena",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47d5",
      "text": " <body>",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47d6",
      "text": " *1265436304*ドミニオンのシミュレーション",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47d7",
      "text": " **概要",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47d8",
      "text": " ドミニオンのコインを買う戦略をする際に、初手で礼拝堂を買うべきかどうかについて。",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47d9",
      "text": " 初手終了後10ターンの間「礼拝堂が出たら屋敷を捨てる。買えるなら銀貨や金貨を買う。」という戦略をとった場合に、デッキ1枚あたりのコイン価値がどうなるかを1万回シミュレーションした。結果、「礼拝堂＋銀貨」は「銀貨＋銀貨」、「礼拝堂＋礼拝堂」、「銀貨＋堀」のいずれよりも優れていることがわかった。",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47da",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47db",
      "text": " **動機",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47dc",
      "text": " <a href='http://d.hatena.ne.jp/takerunba/20091102/p1'>タケルンバのドミニオン戦略 - その4 アクションカード（その1） - タケルンバ卿日記</a>を読んで",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47dd",
      "text": " >>",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47de",
      "text": " コインをかき集めるというシンプルな戦法に礼拝堂がどれだけ効くかというと微妙。効果はないとは言えないし、2金ならどうせ銀貨を買えないので、とりあえず購入して屋敷を処分する考え方はアリなんだけど、屋敷3枚を都合良く処分できるかどうかは運次第だし、礼拝堂の1枚分、コインを引く可能性が下がるので、序盤にどれだけ有利になるんだろうかなあと。",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47df",
      "text": " <<",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47e0",
      "text": " これはプログラムを書けば簡単に実験できるな、と思ったのでやってみた。",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47e1",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47e2",
      "text": " **手法",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47e3",
      "text": " 初手終了後10ターンの間、「礼拝堂が出たら屋敷を捨てる。買えるなら銀貨や金貨を買う。」という戦略をとった場合に、デッキ1枚あたりのコイン価値がどうなるかを1万回シミュレーションした。ソースコードは末尾。",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47e4",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47e5",
      "text": " **結果",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47e6",
      "text": " 初手で礼拝堂と銀貨を買った場合、平均1.72、SD 0.1。銀貨だけを買った場合、平均1.62, SD 0.05。初手のコインが3-4に別れて銀貨を2枚買えた場合で平均1.68, SD 0.05。礼拝堂2枚を買った場合、平均1.60, SD 0.08。堀と銀貨を買った場合、平均1.59, SD 0.05、となった。つまり、「礼拝堂＋銀貨」は「銀貨＋銀貨」、「礼拝堂＋礼拝堂」、「銀貨＋堀」のいずれよりも優れている。なお、この実験では礼拝堂を屋敷を捨てるためだけに使っているが実戦では銅貨を捨てることに使ってもよいので「礼拝堂＋銀貨」と「礼拝堂＋礼拝堂」はより高い値になりうる。",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47e7",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47e8",
      "text": " なお+0.1の平均価値の向上と+3の勝利点を捨てることが投資として見合うかどうかは検討の余地がある。",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47e9",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47ea",
      "text": " ** ソースコード",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47eb",
      "text": " >|python|",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47ec",
      "text": " from random import shuffle",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47ed",
      "text": " from copy import copy",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47ee",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47ef",
      "text": " NUM_TRIAL = 10000",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47f0",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47f1",
      "text": " def draw(deck, used, n):",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47f2",
      "text": "     if len(deck) < n:",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47f3",
      "text": "         shuffle(used)",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47f4",
      "text": "         deck.extend(used)",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47f5",
      "text": "         used = []",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47f6",
      "text": "     hand = deck[:n]",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47f7",
      "text": "     deck = deck[n:]",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47f8",
      "text": "     return deck, used, hand",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47f9",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47fa",
      "text": " def count_money(cards):",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47fb",
      "text": "     return cards.count(\"1\") + cards.count(\"2\") * 2 + cards.count(\"3\") * 3",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47fc",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47fd",
      "text": " def test(initial_deck):",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47fe",
      "text": "     sum = 0",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d47ff",
      "text": "     sumsq = 0.0",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4800",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4801",
      "text": "     for triel in range(NUM_TRIAL):",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4802",
      "text": "         deck = copy(initial_deck)",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4803",
      "text": "         shuffle(deck)",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4804",
      "text": "         used = []",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4805",
      "text": "         for i in range(10):",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4806",
      "text": "             deck, used, hand = draw(deck, used, 5)",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4807",
      "text": "             if \"C\" in hand:",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4808",
      "text": "                 while \"E\" in hand:",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4809",
      "text": "                     hand.remove(\"E\")",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d480a",
      "text": "             elif \"M\" in hand:",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d480b",
      "text": "                 deck, used, got = draw(deck, used, 2)",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d480c",
      "text": "                 hand += got",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d480d",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d480e",
      "text": "             money = count_money(hand)",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d480f",
      "text": "             if money >= 6:",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4810",
      "text": "                 used.append(\"3\")",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4811",
      "text": "             elif money >= 3:",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4812",
      "text": "                 used.append(\"2\")",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4813",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4814",
      "text": "             used += hand",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4815",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4816",
      "text": "         deck += used",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4817",
      "text": "         money = count_money(deck)",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4818",
      "text": "         x = float(money) / len(deck)",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4819",
      "text": "         sum += x",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d481a",
      "text": "         sumsq += x * x",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d481b",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d481c",
      "text": "     from math import sqrt",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d481d",
      "text": "     print sum / NUM_TRIAL, sqrt(sumsq / NUM_TRIAL - (sum / NUM_TRIAL) ** 2)",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d481e",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d481f",
      "text": " ",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4820",
      "text": " print \"a silver only\"",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4821",
      "text": " test(list(\"1111111EEE2\"))",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4822",
      "text": " print \"silver and chapel\"",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4823",
      "text": " test(list(\"1111111EEE2C\"))",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4824",
      "text": " print \"two silvers\"",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4825",
      "text": " test(list(\"1111111EEE22\"))",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4826",
      "text": " print \"two chapels\"",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4827",
      "text": " test(list(\"1111111EEECC\"))",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4828",
      "text": " print \"silver and moat\"",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d4829",
      "text": " test(list(\"1111111EEE2M\"))",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d482a",
      "text": " ||<",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d482b",
      "text": " </body>",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d482c",
      "text": "",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec27aff09e00003d482d",
      "text": "[はてなダイアリー 2010-02-06 https://nishiohirokazu.hatenadiary.org/archive/2010/02/06]",
      "created": 1265382000,
      "updated": 1265382000,
      "userId": "582e63d27c56960011aff09e"
    }
  ]
}