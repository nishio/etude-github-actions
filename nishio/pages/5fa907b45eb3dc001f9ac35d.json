{
  "id": "5fa907b45eb3dc001f9ac35d",
  "title": "PAST4K",
  "created": 1604913076,
  "updated": 1604922122,
  "lines": [
    {
      "id": "5fa907b45eb3dc001f9ac35d",
      "text": "PAST4K",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8948",
      "text": "from [第四回 アルゴリズム実技検定]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8949",
      "text": "PAST4K",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e894a",
      "text": "[K - 転倒数 https://atcoder.jp/contests/past202010-open/tasks/past202010_k]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e894b",
      "text": " 考えたこと",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e894c",
      "text": "  [転倒数]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e894d",
      "text": "  　結合した時にどうなるか考察",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa9281aaff09e00008ba3d3",
      "text": "  　　結合した列の転倒数はそれぞれの転倒数と頻度表から求められる [ACLPC L]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604921370,
      "updated": 1604921885
    },
    {
      "id": "5fa907b4aff09e00003e894e",
      "text": " 　　結合する前に単独で計算する時のnが最大で10^5だ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e894f",
      "text": " 　　どうするのか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8950",
      "text": " 　　　https://ikatakos.com/pot/programming_algorithm/dynamic_programming/inversion",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8951",
      "text": " 　　　[フェニック木]らしい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8952",
      "text": " 　　サンプルは通ったがWA",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8953",
      "text": " 　　 TLEもしてる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8954",
      "text": " 　　1ずらしてWAが消えるかテスト",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8955",
      "text": " 　　　だめ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8956",
      "text": " 　　あまりが10^9だった！",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8957",
      "text": " 　WA消えたが3TLE",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8958",
      "text": " 　 インライン展開した、これでだめならダメ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8959",
      "text": " 　 ダメだった",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e895a",
      "text": " 　これ以上に何ができるのか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e895b",
      "text": " 　　そもそも3×10^5なのに、なぜ5秒もあるのがタイムアウトするのか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e895c",
      "text": " 　30万だとダメだが10万ずつだとOKなのか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e895d",
      "text": " 　　それでも3TLE",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e895e",
      "text": " 　Cythonにしてみたけどダメ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e895f",
      "text": " 　C++で書くべきか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8960",
      "text": "　公式解説",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604913076
    },
    {
      "id": "5fa907b4aff09e00003e8961",
      "text": "　　方針は良い",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604921242
    },
    {
      "id": "5fa92799aff09e00004c2017",
      "text": "　　同じ列が繰り返し使われる時に毎回フェニック木で転倒数を求めていたのがよくない",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604921242,
      "updated": 1604922001
    },
    {
      "id": "5fa927dcaff09e00004c2019",
      "text": "\t　　転倒数と頻度表を前処理すべきだった",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604921309,
      "updated": 1604921987
    },
    {
      "id": "5fa92794aff09e00004c2016",
      "text": "　　列の長さの和が小さく抑えられているのは、前処理でフェニック木を使うのはTLEしないが、クエリのたびに使うとクエリが長い列ばかり選ぶ場合があってNGという意図",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604921237,
      "updated": 1604921317
    },
    {
      "id": "5fa907b4aff09e00003e8964",
      "text": "\tAC",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604913076,
      "updated": 1604920919
    },
    {
      "id": "5fa92657aff09e00002f45ca",
      "text": "\t\tcode:python",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920919,
      "updated": 1604920922
    },
    {
      "id": "5fa9265aaff09e00002f45cb",
      "text": "\t\t def solve(K, seqs, Q, BS):",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920922,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45cc",
      "text": "       MOD = 10 ** 9",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45cd",
      "text": "       N = 20",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45ce",
      "text": "   ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45cf",
      "text": "       invs = []",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45d0",
      "text": "       freqs = []",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45d1",
      "text": "       for i in range(K):",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45d2",
      "text": "           init(N)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45d3",
      "text": "           freq = [0] * 21",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45d4",
      "text": "           inv = 0",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45d5",
      "text": "           for a in seqs[i]:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45d6",
      "text": "               bit_add(a, 1)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45d7",
      "text": "               inv += bit_sum(N) - bit_sum(a)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45d8",
      "text": "               freq[a] += 1",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45d9",
      "text": "           invs.append(inv)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45da",
      "text": "           freqs.append(freq)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45db",
      "text": "   ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45dc",
      "text": "       ret = 0",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45dd",
      "text": "       freq = [0] * 21",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45de",
      "text": "       for b in BS:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45df",
      "text": "           ret += invs[b - 1]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45e0",
      "text": "           f = freqs[b - 1]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45e1",
      "text": "           for i in range(1, 21):",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45e2",
      "text": "               for j in range(i + 1, 21):",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45e3",
      "text": "                   ret += f[i] * freq[j]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45e4",
      "text": "   ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45e5",
      "text": "           for i in range(1, 21):",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45e6",
      "text": "               freq[i] += f[i]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45e7",
      "text": "           ret %= MOD",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45e8",
      "text": "   ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45e9",
      "text": "       return ret",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920923
    },
    {
      "id": "5fa9265aaff09e00002f45ea",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920923,
      "updated": 1604920924
    },
    {
      "id": "5fa92656aff09e00002f45c9",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1604920919,
      "updated": 1604920919
    }
  ]
}