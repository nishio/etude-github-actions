{
  "id": "5e6f71fa2a5309001741fc26",
  "title": "WebWorker + react-create-app --typescript",
  "created": 1584361980,
  "updated": 1584366371,
  "lines": [
    {
      "id": "5e6f71fa2a5309001741fc26",
      "text": "WebWorker + react-create-app --typescript",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584361980,
      "updated": 1584361992
    },
    {
      "id": "5e6f8318aff09e0000871386",
      "text": "see Github",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584366361,
      "updated": 1584366370
    },
    {
      "id": "5e6f8322aff09e000087138c",
      "text": "https://github.com/nishio/tutorial-webworker-with-react/blob/master/README.md",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584366370,
      "updated": 1584366371
    },
    {
      "id": "5e6f8318aff09e0000871387",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584366361,
      "updated": 1584366361
    },
    {
      "id": "5e6f831daff09e0000871389",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584366365,
      "updated": 1584366365
    },
    {
      "id": "5e6f831daff09e000087138a",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584366365,
      "updated": 1584366365
    },
    {
      "id": "5e6f831daff09e000087138b",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584366365,
      "updated": 1584366365
    },
    {
      "id": "5e6f8318aff09e0000871388",
      "text": "---draft",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584366361,
      "updated": 1584366364
    },
    {
      "id": "5e6f777baff09e0000871338",
      "text": "create react app",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584363395,
      "updated": 1584365269
    },
    {
      "id": "5e6f76c7aff09e0000871334",
      "text": "$ npx create-react-app tutorial-webworker-with-react --typescript",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584363208,
      "updated": 1584363308
    },
    {
      "id": "5e6f7779aff09e0000871337",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584363385,
      "updated": 1584363385
    },
    {
      "id": "5e6f7855aff09e000087133a",
      "text": "install worker-loader",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584363606,
      "updated": 1584363613
    },
    {
      "id": "5e6f77dfaff09e0000871339",
      "text": "$ cd tutorial-webworker-with-react/",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584363487,
      "updated": 1584363487
    },
    {
      "id": "5e6f772daff09e0000871336",
      "text": "$ npm install worker-loader --save-dev",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584363309,
      "updated": 1584363378
    },
    {
      "id": "5e6f7208aff09e00005abb57",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584361992,
      "updated": 1584361992
    },
    {
      "id": "5e6f785faff09e000087133b",
      "text": "add a heavy task",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584363615,
      "updated": 1584364147
    },
    {
      "id": "5e6f7a73aff09e0000871348",
      "text": "code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364147,
      "updated": 1584365290
    },
    {
      "id": "5e6f7ee9aff09e000087137e",
      "text": " export const heavyTask = (target: string) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365290,
      "updated": 1584365290
    },
    {
      "id": "5e6f7eeaaff09e000087137f",
      "text": "   console.log(\"hello,\", target);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365290,
      "updated": 1584365290
    },
    {
      "id": "5e6f7eeaaff09e0000871380",
      "text": "   const startTime = Date.now();",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365290,
      "updated": 1584365290
    },
    {
      "id": "5e6f7eeaaff09e0000871381",
      "text": "   while (Date.now() - startTime < 3000) {}",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365290,
      "updated": 1584365290
    },
    {
      "id": "5e6f7eeaaff09e0000871382",
      "text": "   console.log(\"bye,\", target);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365290,
      "updated": 1584365290
    },
    {
      "id": "5e6f7eeaaff09e0000871383",
      "text": "   return 42;",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365290,
      "updated": 1584365290
    },
    {
      "id": "5e6f7eeaaff09e0000871384",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365290,
      "updated": 1584365290
    },
    {
      "id": "5e6f7eebaff09e0000871385",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365291,
      "updated": 1584365291
    },
    {
      "id": "5e6f7a9baff09e0000871349",
      "text": "see the heavy task blocks UI",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364187,
      "updated": 1584364224
    },
    {
      "id": "5e6f7ac0aff09e000087134b",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364224,
      "updated": 1584364224
    },
    {
      "id": "5e6f7b0daff09e000087134c",
      "text": "add webworker",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364302,
      "updated": 1584364368
    },
    {
      "id": "5e6f7b50aff09e000087134d",
      "text": "code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364368,
      "updated": 1584364370
    },
    {
      "id": "5e6f7b51aff09e000087134e",
      "text": " import { heavyTask } from \"./common\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364370,
      "updated": 1584364370
    },
    {
      "id": "5e6f7b52aff09e000087134f",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364370,
      "updated": 1584364370
    },
    {
      "id": "5e6f7b52aff09e0000871350",
      "text": " onmessage = (e: any) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364370,
      "updated": 1584364370
    },
    {
      "id": "5e6f7b52aff09e0000871351",
      "text": "   const result = heavyTask(\"webworker\");",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364370,
      "updated": 1584364370
    },
    {
      "id": "5e6f7b52aff09e0000871352",
      "text": "   // @ts-ignore",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364370,
      "updated": 1584364370
    },
    {
      "id": "5e6f7b52aff09e0000871353",
      "text": "   postMessage(result);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364370,
      "updated": 1584364370
    },
    {
      "id": "5e6f7b52aff09e0000871354",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364370,
      "updated": 1584364370
    },
    {
      "id": "5e6f7b52aff09e0000871355",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364370,
      "updated": 1584364371
    },
    {
      "id": "5e6f7b54aff09e0000871356",
      "text": "Unless @ts-ignore, I saw following error:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364373,
      "updated": 1584364427
    },
    {
      "id": "5e6f7b8aaff09e0000871358",
      "text": "code::",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364427,
      "updated": 1584364429
    },
    {
      "id": "5e6f7b8caff09e0000871359",
      "text": " function postMessage(message: any, targetOrigin: string, transfer?: Transferable[] | undefined): void",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364429,
      "updated": 1584364429
    },
    {
      "id": "5e6f7b8daff09e000087135a",
      "text": " Expected 2-3 arguments, but got 1.ts(2554)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364429,
      "updated": 1584364429
    },
    {
      "id": "5e6f7b8daff09e000087135b",
      "text": " lib.dom.d.ts(19636, 44): An argument for 'targetOrigin' was not provided.",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364429,
      "updated": 1584364429
    },
    {
      "id": "5e6f7aa3aff09e000087134a",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584364196,
      "updated": 1584364196
    },
    {
      "id": "5e6f7dedaff09e0000871362",
      "text": "Add button to call webworker",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365037,
      "updated": 1584365054
    },
    {
      "id": "5e6f7dfeaff09e0000871363",
      "text": "code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365054,
      "updated": 1584365111
    },
    {
      "id": "5e6f7e20aff09e0000871369",
      "text": " // eslint-disable-next-line import/no-webpack-loader-syntax",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e20aff09e000087136a",
      "text": " import Worker from \"worker-loader!./webworker\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e20aff09e000087136b",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e20aff09e000087136c",
      "text": " export const runOnWebWorker = (e: any) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e20aff09e000087136d",
      "text": "   status = \"running...\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e20aff09e000087136e",
      "text": "   const worker = new Worker();",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e20aff09e000087136f",
      "text": "   worker.postMessage(\"heavyTask\");",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e20aff09e0000871370",
      "text": "   worker.onmessage = function(event: any) {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e20aff09e0000871371",
      "text": "     status = \"finished\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e20aff09e0000871372",
      "text": "   };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e20aff09e0000871373",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365088
    },
    {
      "id": "5e6f7e2baff09e0000871375",
      "text": " ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365100,
      "updated": 1584365102
    },
    {
      "id": "5e6f7e2daff09e0000871376",
      "text": " <button onClick={runOnWebWorker}>on WebWorker</button>",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365102,
      "updated": 1584365102
    },
    {
      "id": "5e6f7e20aff09e0000871374",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365088,
      "updated": 1584365090
    },
    {
      "id": "5e6f7dfeaff09e0000871364",
      "text": "It works. But you may see following error:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365054,
      "updated": 1584365162
    },
    {
      "id": "5e6f7e0aaff09e0000871368",
      "text": "code::",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365066,
      "updated": 1584365154
    },
    {
      "id": "5e6f7e61aff09e0000871377",
      "text": " Cannot find module 'worker-loader!./webworker'.",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365154,
      "updated": 1584365154
    },
    {
      "id": "5e6f7e61aff09e0000871378",
      "text": "To fix it...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365154,
      "updated": 1584365236
    },
    {
      "id": "5e6f7eb3aff09e000087137a",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365236,
      "updated": 1584365236
    },
    {
      "id": "5e6f7eb3aff09e000087137b",
      "text": "Add custom type definition",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365236,
      "updated": 1584365243
    },
    {
      "id": "5e6f7ec8aff09e000087137d",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365256,
      "updated": 1584365256
    },
    {
      "id": "5e6f7ebdaff09e000087137c",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365245,
      "updated": 1584365245
    },
    {
      "id": "5e6f7ea7aff09e0000871379",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1584365224,
      "updated": 1584365224
    }
  ]
}