{
  "id": "6090ec01a287e60022919ffb",
  "title": "Hatena2009-08-31",
  "created": 1251644400,
  "updated": 1251644400,
  "lines": [
    {
      "id": "6090ec25aff09e00003d3518",
      "text": "Hatena2009-08-31",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3519",
      "text": "code:hatena",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d351a",
      "text": " <body>",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d351b",
      "text": " *1251717795*最中限プログラムのサンプル",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d351c",
      "text": " これは古いversion",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d351d",
      "text": " >|python|",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d351e",
      "text": " # -*- coding: utf-8 -*-",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d351f",
      "text": " \"\"\"",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3520",
      "text": " 最中限サーバに接続してプレイするクライアントのサンプル",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3521",
      "text": " 単純に接続してランダムにプレイをして終了するだけ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3522",
      "text": " \"\"\"",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3523",
      "text": " from urllib import urlopen, urlencode",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3524",
      "text": " from random import shuffle",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3525",
      "text": " import logging",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3526",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3527",
      "text": " logging.basicConfig(level=logging.DEBUG, format=\"%(message)s\")",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3528",
      "text": " API_ROOT = \"http://nishiotools.appspot.com/saichugen/api/text/\"",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3529",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d352a",
      "text": " # 以下2行は自分で作ったActive Playerのものを入れること",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d352b",
      "text": " API_KEY = \"apikey_bacbada52bef74422ae2a4a2016b28fc\"",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d352c",
      "text": " PLAYER_ID = \"player_50300b770bb5030b2031af2a503f90f4\"",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d352d",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d352e",
      "text": " def do_GET(api, params=None):",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d352f",
      "text": "     if params == None: params = {}",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3530",
      "text": "     logging.debug(\"GET %s %s\", api, params)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3531",
      "text": "     params[\"api_key\"] = API_KEY",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3532",
      "text": "     url = API_ROOT + api + \"?\" + urlencode(params)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3533",
      "text": "     return urlopen(url).read()",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3534",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3535",
      "text": "  ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3536",
      "text": " def do_POST(api, params):",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3537",
      "text": "     logging.debug(\"POST %s %s\", api, params)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3538",
      "text": "     params[\"api_key\"] = API_KEY",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3539",
      "text": "     url = API_ROOT + api ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d353a",
      "text": "     return urlopen(url, urlencode(params)).read()",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d353b",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d353c",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d353d",
      "text": " def my_ai_random(hand, played):",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d353e",
      "text": "     \"盤面状況に関係なく自分の手札からランダムに出すAI\"",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d353f",
      "text": "     from random import choice",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3540",
      "text": "     logging.debug(\"hand: %s\", hand)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3541",
      "text": "     assert hand != [\"\"]",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3542",
      "text": "     return choice(hand)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3543",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3544",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3545",
      "text": " passive_players = do_GET(\"passive_players/\").split()",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3546",
      "text": " # opp := opponent(s). Take 2 opp randomly.",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3547",
      "text": " shuffle(passive_players)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3548",
      "text": " opp_player1, opp_player2 = passive_players[:2]",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3549",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d354a",
      "text": " game_id = do_GET(\"start_game/\")",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d354b",
      "text": " logging.debug(\"game_id: %s\", game_id)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d354c",
      "text": " seat_id = do_GET(\"join/%(game_id)s/%(PLAYER_ID)s/\" % globals())",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d354d",
      "text": " logging.debug(\"seat_id: %s\", seat_id)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d354e",
      "text": " opp_seat_id1 = do_GET(\"add_player/%(game_id)s/%(opp_player1)s/\" % globals())",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d354f",
      "text": " logging.debug(\"opp 1: %s\", opp_seat_id1)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3550",
      "text": " opp_seat_id2 = do_GET(\"add_player/%(game_id)s/%(opp_player2)s/\" % globals())",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3551",
      "text": " logging.debug(\"opp 2: %s\", opp_seat_id2)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3552",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3553",
      "text": " # 1手分のプレイをする",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3554",
      "text": " def play_a_turn():",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3555",
      "text": "     # 盤面状況を取得する",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3556",
      "text": "     seat = do_GET(\"seat/%(seat_id)s/\" % globals(), {})",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3557",
      "text": "     if seat.count(\"\\n\") > 2:",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3558",
      "text": "         raise RuntimeError(\"invalid result\")",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3559",
      "text": "     state, hand, played = seat.split(\"\\n\")",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d355a",
      "text": "     assert state == \"TO_PLAY\"",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d355b",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d355c",
      "text": "     hand = hand.split(\",\")",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d355d",
      "text": "     played = [segment.split(\",\") for segment in played.split(\".\")]",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d355e",
      "text": "     logging.debug(\"hand: %s\", hand)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d355f",
      "text": "     logging.debug(\"played: %s\", played)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3560",
      "text": "     # 思考する",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3561",
      "text": "     play = my_ai_random(hand, played)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3562",
      "text": "     # カードをプレイする",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3563",
      "text": "     do_POST(\"play/%(seat_id)s/\" % globals(), {\"play\": play})",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3564",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3565",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3566",
      "text": " for i in range(15):",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3567",
      "text": "     play_a_turn()",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3568",
      "text": " ",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d3569",
      "text": " logging.debug(\"result: http://nishiotools.appspot.com/saichugen/game/%s/\",game_id)",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d356a",
      "text": " ||<",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d356b",
      "text": " </body>",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d356c",
      "text": "",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec25aff09e00003d356d",
      "text": "[はてなダイアリー 2009-08-31 https://nishiohirokazu.hatenadiary.org/archive/2009/08/31]",
      "created": 1251644400,
      "updated": 1251644400,
      "userId": "582e63d27c56960011aff09e"
    }
  ]
}