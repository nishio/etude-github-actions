{
  "id": "5ba88707b9610e0013bdbdef",
  "title": "PDFからのテキスト抽出",
  "created": 1537771273,
  "updated": 1648482389,
  "lines": [
    {
      "id": "5ba88707b9610e0013bdbdef",
      "text": "PDFからのテキスト抽出",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537771273,
      "updated": 1537771276
    },
    {
      "id": "6241cf65aff09e0000e2945c",
      "text": "2022-03-29 3行まとめ:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1648480101,
      "updated": 1648480107
    },
    {
      "id": "6241cf6daff09e0000e2945e",
      "text": "\t$ pip3 install pdf2txt.py",
      "userId": "582e63d27c56960011aff09e",
      "created": 1648480110,
      "updated": 1648480120
    },
    {
      "id": "6241cf83aff09e0000e2945f",
      "text": "\t$ pdf2txt.py -V -o <outfile> <infile>",
      "userId": "582e63d27c56960011aff09e",
      "created": 1648480131,
      "updated": 1648480132
    },
    {
      "id": "6241d840aff09e0000e37fc8",
      "text": "\t新しいスクリプトを作ろうと考えてるので詳しいことはできてから加筆する",
      "userId": "582e63d27c56960011aff09e",
      "created": 1648482369,
      "updated": 1648482389
    },
    {
      "id": "6241cf83aff09e0000e29460",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1648480132,
      "updated": 1648480132
    },
    {
      "id": "6241cf66aff09e0000e2945d",
      "text": "2020/09/28 3行まとめ:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1648480102,
      "updated": 1648480129
    },
    {
      "id": "5f6d5de4aff09e000093934b",
      "text": "\t$ pip install pdfminer.six",
      "userId": "582e63d27c56960011aff09e",
      "created": 1601002980,
      "updated": 1601002984
    },
    {
      "id": "5f6d5de4aff09e000093934c",
      "text": "\t$ pdf2txt.py -V -o <outfile> <infile>",
      "userId": "582e63d27c56960011aff09e",
      "created": 1601002980,
      "updated": 1601003011
    },
    {
      "id": "5f6d5de4aff09e000093934a",
      "text": " https://github.com/nishio/ja_pdf_to_text",
      "userId": "582e63d27c56960011aff09e",
      "created": 1601002980,
      "updated": 1601014644
    },
    {
      "id": "5f6d8b74aff09e000093934d",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1601014645,
      "updated": 1601014645
    },
    {
      "id": "5f6d8b75aff09e000093934e",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1601014645,
      "updated": 1601014645
    },
    {
      "id": "5ba8d5d5aff09e0000783714",
      "text": "2018/09/24 1行まとめ: PDFMiner.sixのリポジトリをcloneしてCMapを生成してからsetup.py install",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791446,
      "updated": 1601002932
    },
    {
      "id": "5ba8d5d5aff09e0000783713",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791446,
      "updated": 1537791446
    },
    {
      "id": "5ba8870caff09e0000440827",
      "text": "以前[word2vecによる自然言語処理]を書いた時には[PDFMiner https://www.unixuser.org/~euske/python/pdfminer/]を使った。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537771276,
      "updated": 1537791873
    },
    {
      "id": "5ba8d61baff09e0000783715",
      "text": "単なるテキスト抽出には当時のスクリプトを使い回していたがいろいろ新しいことをやりたくなった。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791516,
      "updated": 1537791516
    },
    {
      "id": "5ba88da3aff09e000044082c",
      "text": "2018年現在、PDFMinerはPython2のみサポートなので、2/3対応の[PDFMiner.six https://github.com/pdfminer/pdfminer.six]を使う。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537772963,
      "updated": 1537791534
    },
    {
      "id": "5ba8d227aff09e000020b775",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790504,
      "updated": 1537791538
    },
    {
      "id": "5ba8d21caff09e000020b773",
      "text": "まとめ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790493,
      "updated": 1537790506
    },
    {
      "id": "5ba8d229aff09e000020b776",
      "text": "\tPython3で使いたいのでPDFMiner.sixを使う",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790506,
      "updated": 1537790529
    },
    {
      "id": "5ba8d241aff09e000020b777",
      "text": " 日本語PDFを扱う上ではCMapの生成が必要",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790529,
      "updated": 1537790711
    },
    {
      "id": "5ba8d2f6aff09e000020b778",
      "text": " \tpipでインストールするとどうやって生成するかわからないのでリポジトリからcloneする",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790711,
      "updated": 1537790729
    },
    {
      "id": "5ba8d30aaff09e000020b779",
      "text": "  `make cmap`せよと書いてあるが`make: Nothing to be done for cmap.`と言われる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790730,
      "updated": 1537790802
    },
    {
      "id": "5ba8d351aff09e000020b77a",
      "text": "  Makefileに書かれているコマンドを明示的に叩いた(下記) #CMapの再生成",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790802,
      "updated": 1537800283
    },
    {
      "id": "5ba8d7a4aff09e00006af8e4",
      "text": "  \tmake cmap_cleanでもよかったかもしれないが試してない",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791909,
      "updated": 1537791910
    },
    {
      "id": "5ba8d39baff09e000020b77d",
      "text": "\t$ python setup.py install",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790876,
      "updated": 1537790919
    },
    {
      "id": "5ba8d39baff09e000020b77e",
      "text": "\t\t先にpipで入れてた場合はuninstallしとくこと",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790876,
      "updated": 1537790947
    },
    {
      "id": "5ba8d650aff09e0000783716",
      "text": " $ pdf2txt.py -V -o <outfile> <infile>",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791569,
      "updated": 1537791589
    },
    {
      "id": "5ba8d3e2aff09e000020b784",
      "text": "これで綺麗なテキストファイルが得られるようになった",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790947,
      "updated": 1537791669
    },
    {
      "id": "5ba8d6b5aff09e0000783717",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791670,
      "updated": 1537791670
    },
    {
      "id": "5ba8d6b5aff09e0000783718",
      "text": "備考",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791670,
      "updated": 1537791685
    },
    {
      "id": "5ba8d6c5aff09e0000783719",
      "text": "\t[poppler]に同梱されている[pdftotext]だと、一見すんなり変換できたように見えるが、行の順番に直感的ではない乱れが発生する。(おそらく脚注やページ端の章見出しなどのイレギュラーなバウンディングボックスで混乱している)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791685,
      "updated": 1537791799
    },
    {
      "id": "5ba8d3f0aff09e000020b786",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790961,
      "updated": 1537790961
    },
    {
      "id": "5ba8d3efaff09e000020b785",
      "text": "CMap生成コマンド",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790959,
      "updated": 1537791605
    },
    {
      "id": "5ba8d21caff09e000020b774",
      "text": "code:sh",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790493,
      "updated": 1537790879
    },
    {
      "id": "5ba8d3a1aff09e000020b77f",
      "text": " python tools/conv_cmap.py -c B5=cp950 -c UniCNS-UTF8=utf-8 pdfminer/cmap Adobe-CNS1 cmaprsrc/cid2code_Adobe_CNS1.txt",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790881,
      "updated": 1537790883
    },
    {
      "id": "5ba8d3a1aff09e000020b780",
      "text": " python tools/conv_cmap.py -c GBK-EUC=cp936 -c UniGB-UTF8=utf-8 pdfminer/cmap Adobe-GB1 cmaprsrc/cid2code_Adobe_GB1.txt",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790883,
      "updated": 1537790883
    },
    {
      "id": "5ba8d3a1aff09e000020b781",
      "text": " python tools/conv_cmap.py -c RKSJ=cp932 -c EUC=euc-jp -c UniJIS-UTF8=utf-8 pdfminer/cmap Adobe-Japan1 cmaprsrc/cid2code_Adobe_Japan1.txt",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790883,
      "updated": 1537790883
    },
    {
      "id": "5ba8d3a1aff09e000020b782",
      "text": " python tools/conv_cmap.py -c KSC-EUC=euc-kr -c KSC-Johab=johab -c KSCms-UHC=cp949 -c UniKS-UTF8=utf-8 pdfminer/cmap Adobe-Korea1 cmaprsrc/cid2code_Adobe_Korea1.txt",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790883,
      "updated": 1537790883
    },
    {
      "id": "5ba8d21caff09e000020b772",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790493,
      "updated": 1537790493
    },
    {
      "id": "5ba8d219aff09e000020b771",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790490,
      "updated": 1537791367
    },
    {
      "id": "5ba88746aff09e0000440829",
      "text": "抽出例",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537771335,
      "updated": 1537791120
    },
    {
      "id": "5ba88d79aff09e0000e4861d",
      "text": "[https://gyazo.com/ace0fa36a067600a48c2ea4e4b9391db]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537772921,
      "updated": 1537772921
    },
    {
      "id": "5ba8d454aff09e00007836fd",
      "text": "cmap生成後のPDFMinerでの結果",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791060,
      "updated": 1537791075
    },
    {
      "id": "5ba8d463aff09e00007836fe",
      "text": ">この本の目的",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791075,
      "updated": 1537791082
    },
    {
      "id": "5ba8d46aaff09e00007836ff",
      "text": "> ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791082,
      "updated": 1537791082
    },
    {
      "id": "5ba8d46aaff09e0000783700",
      "text": "> 　私は、知的生産術の良い参考書が欲しいです。人に知的生産術を教える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791082,
      "updated": 1537791082
    },
    {
      "id": "5ba8d46aaff09e0000783701",
      "text": "> ときに、お勧めできる本が欲しいです。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791082,
      "updated": 1537791082
    },
    {
      "id": "5ba8d46aaff09e0000783702",
      "text": "> 　私は、サイボウズで知的生産性の研究に10年間従事してきました注1。業",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791082,
      "updated": 1537791082
    },
    {
      "id": "5ba8d46aaff09e0000783703",
      "text": "> 務の一環として、京都大学サマーデザインスクールで、考えを整理してア",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791082,
      "updated": 1537791082
    },
    {
      "id": "5ba8d46aaff09e0000783704",
      "text": "> ウトプットする方法のワークショップを行ったり、首都大学東京の非常勤",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791082,
      "updated": 1537791082
    },
    {
      "id": "5ba8d46aaff09e0000783705",
      "text": "> 講師として、大学生に研究によって新たな知識を生み出すことについて教",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791082,
      "updated": 1537791082
    },
    {
      "id": "5ba8d46aaff09e0000783706",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791082,
      "updated": 1537791107
    },
    {
      "id": "5ba8d589aff09e0000783712",
      "text": "-----以下失敗ログ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791370,
      "updated": 1537791376
    },
    {
      "id": "5ba8d413aff09e000020b788",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537790996,
      "updated": 1537790996
    },
    {
      "id": "5ba88dc6aff09e000044082d",
      "text": "pipで入れたPDFMinerでの結果",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537772999,
      "updated": 1537791000
    },
    {
      "id": "5ba88dc6aff09e000044082e",
      "text": ">この本の目的",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537772999,
      "updated": 1537773014
    },
    {
      "id": "5ba88dd5aff09e000044082f",
      "text": "> ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773014,
      "updated": 1537773014
    },
    {
      "id": "5ba88dd5aff09e0000440830",
      "text": "> 　私(cid:888)、知的生産術(cid:887)良(cid:845)参考書(cid:853)欲(cid:864)(cid:845)(cid:880)(cid:866)。人(cid:884)知的生産術(cid:923)教(cid:849)(cid:916)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773014,
      "updated": 1537773014
    },
    {
      "id": "5ba88dd5aff09e0000440831",
      "text": "> (cid:881)(cid:854)(cid:884)、(cid:851)勧(cid:906)(cid:880)(cid:854)(cid:916)本(cid:853)欲(cid:864)(cid:845)(cid:880)(cid:866)。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773014,
      "updated": 1537773014
    },
    {
      "id": "5ba88dd5aff09e0000440832",
      "text": "> 　私(cid:888)、(cid:945)(cid:928)(cid:984)(cid:930)(cid:950)(cid:880)知的生産性(cid:887)研究(cid:884)10年間従事(cid:864)(cid:879)(cid:854)(cid:903)(cid:864)(cid:872)(cid:2987)1。業",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773014,
      "updated": 1537773014
    },
    {
      "id": "5ba88dd5aff09e0000440833",
      "text": "> 務(cid:887)一環(cid:881)(cid:864)(cid:879)、京都大学(cid:945)(cid:986)(cid:660)(cid:963)(cid:946)(cid:928)(cid:1007)(cid:949)(cid:939)(cid:660)(cid:999)(cid:880)、考(cid:849)(cid:923)整理(cid:864)(cid:879)(cid:926)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773014,
      "updated": 1537773014
    },
    {
      "id": "5ba88dd5aff09e0000440834",
      "text": "うーん、CIDフォントの埋め込みになっているぞ。[CID問題]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773014,
      "updated": 1537791349
    },
    {
      "id": "5ba8ce4faff09e00007836ed",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537789519,
      "updated": 1537789519
    },
    {
      "id": "5ba88748aff09e000044082a",
      "text": "[poppler]に同梱されている[pdftotext]だとこうなる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537771336,
      "updated": 1537773546
    },
    {
      "id": "5ba88feaaff09e0000440839",
      "text": ">この本の目的",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773546,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e000044083a",
      "text": "> 私は、知的生産術の良い参考書が欲しいです。人に知的生産術を教える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e000044083b",
      "text": "> ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e000044083c",
      "text": "> ときに、お勧めできる本が欲しいです。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e000044083d",
      "text": "> 私は、サイボウズで知的生産性の研究に 10 年間従事してきました注 1。業",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e000044083e",
      "text": "> 務の一環として、京都大学サマーデザインスクールで、考えを整理してア",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e000044083f",
      "text": "> ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e0000440840",
      "text": "> ウトプットする方法のワークショップを行ったり、首都大学東京の非常勤",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e0000440841",
      "text": "> 講師として、大学生に研究によって新たな知識を生み出すことについて教",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e0000440842",
      "text": "> ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e0000440843",
      "text": "> えたりしてきました。しかし、限られた時間では伝えたいことが伝えきれ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e0000440844",
      "text": "> えません。私の伝えたいことが 1 冊にまとまった本が欲しいです。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e0000440845",
      "text": "> でも、ちょうど良い本がないんです。何か 1 冊だけお勧めするなら川喜",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e0000440846",
      "text": "> 『発想法』注 2 ですが、これは 1966 年の本です。抽象的な考え方は今",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e0000440847",
      "text": "> 田二郎の",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e0000440848",
      "text": "> ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e0000440849",
      "text": "> この本の目的",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e000044084a",
      "text": "> ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e000044084b",
      "text": "> ません。参考書を紹介しても、たくさん紹介したのでは全部は読んでもら",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537773587
    },
    {
      "id": "5ba89012aff09e000044084c",
      "text": "一見良いように見えるかもしれないが、最終行の「ません。参考書を紹介しても〜」はその8行上の「限られた時間では伝えたいことが伝えきれ」の続き。「川喜」「田二郎の」「『発想法』注 2」という並びもおかしくなっている。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537773587,
      "updated": 1537791278
    },
    {
      "id": "5ba8d52eaff09e0000783710",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791278,
      "updated": 1537791279
    },
    {
      "id": "5ba8d4caaff09e0000783708",
      "text": "PDFMinerでは同じ範囲が適切に並べられている。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791178,
      "updated": 1537791290
    },
    {
      "id": "5ba8d4d8aff09e0000783709",
      "text": "> えたりしてきました。しかし、限られた時間では伝えたいことが伝えきれ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791193,
      "updated": 1537791207
    },
    {
      "id": "5ba8d4daaff09e000078370a",
      "text": "> ません。参考書を紹介しても、たくさん紹介したのでは全部は読んでもら",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791194,
      "updated": 1537791194
    },
    {
      "id": "5ba8d4daaff09e000078370b",
      "text": "> えません。私の伝えたいことが1冊にまとまった本が欲しいです。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791194,
      "updated": 1537791194
    },
    {
      "id": "5ba8d4daaff09e000078370c",
      "text": "> 　でも、ちょうど良い本がないんです。何か1冊だけお勧めするなら川喜",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791194,
      "updated": 1537791194
    },
    {
      "id": "5ba8d4daaff09e000078370d",
      "text": "> 田二郎の『発想法』注2ですが、これは1966年の本です。抽象的な考え方は今",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791194,
      "updated": 1537791194
    },
    {
      "id": "5ba8d4daaff09e000078370e",
      "text": "> でも十分有効ですが、具体的な方法論が50年前の技術水準を前提にしてい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791194,
      "updated": 1537791194
    },
    {
      "id": "5ba8d55baff09e0000783711",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791323,
      "updated": 1537791323
    },
    {
      "id": "5ba8d4daaff09e000078370f",
      "text": "[PDFMinerの座標系解析]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1537791194,
      "updated": 1537791338
    }
  ]
}