{
  "id": "5fe08bf96942aa0022c14852",
  "title": "PAST3M",
  "created": 1608551418,
  "updated": 1609662046,
  "lines": [
    {
      "id": "5fe08bf96942aa0022c14852",
      "text": "PAST3M",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe445c1aff09e000042e249",
      "text": "[https://gyazo.com/03933bba41c9b05e4ac79210321a5771]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608795585,
      "updated": 1608795600
    },
    {
      "id": "5fe445d0aff09e000042e24a",
      "text": "[M - 行商計画問題 https://atcoder.jp/contests/past202005-open/tasks/past202005_m]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608795600,
      "updated": 1608795666
    },
    {
      "id": "5fe44612aff09e000042e24b",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608795667,
      "updated": 1608795667
    },
    {
      "id": "5fe08bf9aff09e00000db205",
      "text": "from [第三回 アルゴリズム実技検定]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db206",
      "text": "PAST3M",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db207",
      "text": " 考えたこと",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db208",
      "text": " 　一見、[巡回セールスマン問題]だが、頂点数が多いのでもっと効率的なアルゴリズムが使えるのだろうか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608795683
    },
    {
      "id": "5fe08bf9aff09e00000db209",
      "text": " 　特徴的な問題条件",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db20a",
      "text": " 　　辺のコストが一定",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db20b",
      "text": " 　　同じ頂点や辺を何度も使っていい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db20c",
      "text": " 　　辺が10^5で抑えられてる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db20d",
      "text": " 　[最小全域木]が最小コストか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db20e",
      "text": " 　　違う。例えば4つの頂点を回る時、Y字の中心にsがあったらコスト5、パスの端にsがあったら3",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db20f",
      "text": " 　木であるか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db210",
      "text": " 　　たぶんそうだと思うが…",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db211",
      "text": " 問題条件見落とし",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db212",
      "text": " 　N個の街を巡るのではなくK個の街を巡るのだった",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608551418
    },
    {
      "id": "5fe08bf9aff09e00000db213",
      "text": " 　先にK個の各頂点間の距離を求めて巡回セールスマン問題？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608795678
    },
    {
      "id": "5fe08bf9aff09e00000db214",
      "text": "　改めて考える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608551418,
      "updated": 1608795898
    },
    {
      "id": "5fe446f9aff09e0000e638d6",
      "text": "　　Kは高々16",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608795898,
      "updated": 1608795915
    },
    {
      "id": "5fe44743aff09e0000e638d7",
      "text": "　　　16!は全探索できない",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608795975,
      "updated": 1608795985
    },
    {
      "id": "5fe44751aff09e0000e638d8",
      "text": "　　　既に訪問済みの都市2^16と、最後に訪問した都市16の積なら大丈夫",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608795985,
      "updated": 1608796057
    },
    {
      "id": "5fe4479aaff09e0000e638d9",
      "text": "　　　→[bitDP]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608796058,
      "updated": 1608796067
    },
    {
      "id": "5fe447a8aff09e0000e638da",
      "text": "　　頂点は10^5",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608796073,
      "updated": 1608797440
    },
    {
      "id": "5fe447b5aff09e0000e638db",
      "text": "　　　[ワーシャルフロイド法]O(V^3)は無理",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608796085,
      "updated": 1608797473
    },
    {
      "id": "5fe44d01aff09e0000e638ea",
      "text": "　　 辺が10^5で抑えられてる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608797442,
      "updated": 1608797442
    },
    {
      "id": "5fe44d3baff09e0000e638ec",
      "text": "　　 この制約のおかげで[ダイクストラ法]O((E+V)log V)が使える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608797499,
      "updated": 1608797514
    },
    {
      "id": "5fe44d4aaff09e0000e638ed",
      "text": "　　 　[辺が10^5ならダイクストラ使える]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608797515,
      "updated": 1608797538
    },
    {
      "id": "5fe446f5aff09e0000e638d5",
      "text": "　　16個の頂点からのone to all最短距離をダイクストラで求める",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608795894,
      "updated": 1608797733
    },
    {
      "id": "5fe45aeaaff09e0000e638f9",
      "text": "　　16の頂点間の距離を元に巡回セールスマン問題",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608801002,
      "updated": 1608801022
    },
    {
      "id": "5fe45afeaff09e0000e638fa",
      "text": "　　　スタートに戻ってこないパターンなことに注意が必要",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608801022,
      "updated": 1608801036
    },
    {
      "id": "5fe44df2aff09e0000e638f4",
      "text": "\tAC",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608797683,
      "updated": 1608800974
    },
    {
      "id": "5fe45acfaff09e0000132ea6",
      "text": "\t\tcode:python",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800975,
      "updated": 1608800979
    },
    {
      "id": "5fe45ad1aff09e0000132ea7",
      "text": "\t \tdef solve(N, M, edges, S, K, TS):",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800978,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ea8",
      "text": "       cc = CoordinateCompression(TS)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ea9",
      "text": "       v2i, _i2v = cc.compress()",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eaa",
      "text": "   ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eab",
      "text": "       # dijkstra",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eac",
      "text": "       from collections import defaultdict",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ead",
      "text": "       distances = defaultdict(dict)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eae",
      "text": "       ds = one_to_all(S, N, edges)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eaf",
      "text": "       from_start = {}",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eb0",
      "text": "       for t in TS:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eb1",
      "text": "           from_start[v2i[t]] = ds[t]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eb2",
      "text": "   ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eb3",
      "text": "       for t in TS:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eb4",
      "text": "           ds = one_to_all(t, N, edges)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eb5",
      "text": "           for t2 in TS:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eb6",
      "text": "               distances[v2i[t]][v2i[t2]] = ds[t2]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eb7",
      "text": "   ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eb8",
      "text": "       # tsp",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eb9",
      "text": "       num_vertex = K",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eba",
      "text": "       SUBSETS = 2 ** num_vertex",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ebb",
      "text": "       INF = 9223372036854775807",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ebc",
      "text": "       memo = [[INF] * num_vertex for _s in range(SUBSETS)]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ebd",
      "text": "   ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ebe",
      "text": "       for subset in range(1, SUBSETS):",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ebf",
      "text": "           for v in range(num_vertex):  # new vertex",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ec0",
      "text": "               mask = 1 << v",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ec1",
      "text": "               if subset == 1 << v:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ec2",
      "text": "                   # previous vertex is start",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ec3",
      "text": "                   memo[subset][v] = min(",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ec4",
      "text": "                       memo[subset][v],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ec5",
      "text": "                       from_start[v])",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ec6",
      "text": "               elif subset & mask:  # new subset includes v",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ec7",
      "text": "                   for u in range(num_vertex):",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ec8",
      "text": "                       memo[subset][v] = min(",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ec9",
      "text": "                           memo[subset][v],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132eca",
      "text": "                           memo[subset ^ mask][u] + distances[u][v])",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ecb",
      "text": "       return min(memo[-1])",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800981
    },
    {
      "id": "5fe45ad4aff09e0000132ecc",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800981,
      "updated": 1608800982
    },
    {
      "id": "5fe45aceaff09e0000132ea5",
      "text": "[辺が10^5の制約]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1608800974,
      "updated": 1609662046
    },
    {
      "id": "5ff17e5aaff09e0000b4ce1b",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1609662042,
      "updated": 1609662042
    }
  ]
}