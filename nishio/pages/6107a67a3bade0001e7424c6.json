{
  "id": "6107a67a3bade0001e7424c6",
  "title": "2021-08-02Movidea/Kozaneba開発日記",
  "created": 1627891324,
  "updated": 1627983352,
  "lines": [
    {
      "id": "6107a67a3bade0001e7424c6",
      "text": "2021-08-02Movidea/Kozaneba開発日記",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627891324,
      "updated": 1627983352
    },
    {
      "id": "6107d663aff09e0000f99a33",
      "text": "Windowsのユーザ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903588,
      "updated": 1627903593
    },
    {
      "id": "6107d66baff09e0000f99a34",
      "text": "　4 本指ジェスチャーまで認識するタイプのタッチパッド",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903596,
      "updated": 1627903626
    },
    {
      "id": "6107d68aaff09e0000ebb9ee",
      "text": "　操作できるか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903627,
      "updated": 1627903681
    },
    {
      "id": "6107d695aff09e0000f99a35",
      "text": "不確実なものほど素早く検証するべき",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903637,
      "updated": 1627903661
    },
    {
      "id": "6107d6acaff09e0000f99a36",
      "text": "　認証とクラウド保存は一旦脇に置いて、操作できるのかどうかの検証をするべき",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903661,
      "updated": 1627903706
    },
    {
      "id": "6107d6daaff09e0000f99a37",
      "text": "　そのためには",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903707,
      "updated": 1627903709
    },
    {
      "id": "6107d6c3aff09e0000ebb9f7",
      "text": "  デプロイをする",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903683,
      "updated": 1627903712
    },
    {
      "id": "6107d6c3aff09e0000ebb9fa",
      "text": "　 Movideaで行くか、落ち着いたら変えようと思ってたKozanebaに今変えるか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903683,
      "updated": 1627904046
    },
    {
      "id": "6107d838aff09e0000ebba08",
      "text": "　 \t[2021-07-15Movidea開発日記#60effb2baff09e00003b7dcd]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627904057,
      "updated": 1629299541
    },
    {
      "id": "6107d6c3aff09e0000ebb9fb",
      "text": " 　　リポジトリやNetlifyの設定を後からまた変えるのは二度手間なので今Kozanebaにする",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903683,
      "updated": 1627904110
    },
    {
      "id": "6107d86eaff09e0000f99a39",
      "text": " 　　ソースやタイトルバーなどは後ほど変える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627904111,
      "updated": 1627904131
    },
    {
      "id": "6107d6c3aff09e0000ebb9fd",
      "text": "　 操作できるかのテストのための小さいサンプルを作る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903683,
      "updated": 1627903726
    },
    {
      "id": "6107d758aff09e0000ebba02",
      "text": "　 \thttps://kozaneba.netlify.app/#tinysample",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903833,
      "updated": 1627903834
    },
    {
      "id": "6107d6f0aff09e0000f99a38",
      "text": "　 二本指ジェスチャーで操作してるところを動画に撮ってみた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903728,
      "updated": 1627903743
    },
    {
      "id": "6107d728aff09e0000ebba00",
      "text": "　 \t[https://youtu.be/FvZvZ1jVKrk]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903784,
      "updated": 1627903785
    },
    {
      "id": "6107d728aff09e0000ebba01",
      "text": "\tWindowsのChromeでは最初に垂直または水平に動かした時にその方向の移動にロックされる振る舞いがある",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903785,
      "updated": 1627903940
    },
    {
      "id": "6107d77caff09e0000ebba06",
      "text": "\t\t980479 - two-finger trackpad movement locks in as horizontal or vertical - chromium",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903869,
      "updated": 1627903870
    },
    {
      "id": "6107d77daff09e0000ebba07",
      "text": "  https://bugs.chromium.org/p/chromium/issues/detail?id=980479",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903870,
      "updated": 1627903870
    },
    {
      "id": "6107d75faff09e0000ebba03",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903840,
      "updated": 1627903840
    },
    {
      "id": "6107d75faff09e0000ebba04",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903840,
      "updated": 1627903840
    },
    {
      "id": "6107d760aff09e0000ebba05",
      "text": "認証",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903840,
      "updated": 1627903945
    },
    {
      "id": "6107ab00aff09e0000a889af",
      "text": "　匿名認証",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627892481,
      "updated": 1627903958
    },
    {
      "id": "6107ab00aff09e0000a889b0",
      "text": "　　[https://gyazo.com/85e7eba0fd4c3bd40818c6694c063ec9]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627892481,
      "updated": 1627903960
    },
    {
      "id": "6107ab02aff09e0000a889b1",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627892484,
      "updated": 1627893050
    },
    {
      "id": "6107ad2caff09e0000a889ba",
      "text": "[https://firebase.google.com/docs/auth/web/anonymous-auth?hl=ja JavaScript を使用して Firebase 匿名認証を行う]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627893036,
      "updated": 1627893040
    },
    {
      "id": "6107ab7faff09e0000a889b3",
      "text": "\t>匿名アカウントを永久アカウントに変換する",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627892608,
      "updated": 1627892620
    },
    {
      "id": "6107ab8caff09e0000a889b4",
      "text": " > 匿名ユーザーがアプリへ登録した後、新しいアカウントの下で引き続き従来の作業を行えるようにしなければならない場合があります。たとえば、アプリへの登録前にユーザーがショッピング カートに追加したアイテムを、新しいアカウントのショッピング カートにも入れておく、といったケースです。手順は次のとおりです。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627892620,
      "updated": 1627892620
    },
    {
      "id": "6107ab7eaff09e0000a889b2",
      "text": "\t> ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627892607,
      "updated": 1627892916
    },
    {
      "id": "6107acaeaff09e0000a889b9",
      "text": "\t>link の呼び出しが成功したら、ユーザーの新しいアカウントが匿名アカウントの Firebase データにアクセスできるようになります。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627892911,
      "updated": 1627892912
    },
    {
      "id": "6107ac33aff09e0000a889b5",
      "text": "　リンクしたらuser.uidが同一になるのかな",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627892789,
      "updated": 1627892994
    },
    {
      "id": "6107ad43aff09e0000a889bc",
      "text": "\t\t[https://firebase.google.com/docs/auth/web/account-linking?hl=ja JavaScript を使用してアカウントに複数の認証プロバイダをリンクする | Firebase]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627893060,
      "updated": 1627893071
    },
    {
      "id": "6107ad4faff09e0000a889bf",
      "text": "  >ログインに使用した認証プロバイダに関係なく、同じ Firebase ユーザー ID でユーザーを識別できます。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627893071,
      "updated": 1627893096
    },
    {
      "id": "6107ad43aff09e0000a889bd",
      "text": "　　はー、なるほど。ユーザと認証プロバイダが1対他の対応になってるわけか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627893060,
      "updated": 1627893156
    },
    {
      "id": "6107ad44aff09e0000a889be",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627893060,
      "updated": 1627893060
    },
    {
      "id": "6107af50aff09e0000a889c0",
      "text": "[https://firebase.google.com/docs/auth/web/auth-state-persistence?hl=ja 認証状態の永続性 | Firebase]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627893585,
      "updated": 1627893593
    },
    {
      "id": "6107af58aff09e0000a889c1",
      "text": "　デフォルトでログインしっぱなしになるみたい、それでいい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627893593,
      "updated": 1627895506
    },
    {
      "id": "6107b6d2aff09e0000f99a28",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627895506,
      "updated": 1627895507
    },
    {
      "id": "6107b6d4aff09e0000f99a29",
      "text": "とりあえず「現在のユーザ: null」まではできた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627895509,
      "updated": 1627895530
    },
    {
      "id": "6107b6eaaff09e0000f99a2c",
      "text": " ✅匿名でログインして、ブラウザをリロードしてもログイン済み",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627895530,
      "updated": 1627895758
    },
    {
      "id": "6107b7d2aff09e0000f99a2d",
      "text": " ログアウトのメニューを作らねば",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627895762,
      "updated": 1627895789
    },
    {
      "id": "6107b932aff09e0000f99a2e",
      "text": " ✅ログアウトして再度匿名ログインしたら別のuidになる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627896114,
      "updated": 1627896138
    },
    {
      "id": "6107b951aff09e0000f99a2f",
      "text": "\t✅Google OAuth",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627896145,
      "updated": 1627897274
    },
    {
      "id": "6107bdb3aff09e0000a889c2",
      "text": "\t\t[https://gyazo.com/c22edbc879ea0a5937af97351b2b59be]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627897268,
      "updated": 1627897271
    },
    {
      "id": "6107be22aff09e0000f99a30",
      "text": "\t\t\t[https://cloud.google.com/identity-platform/docs/show-custom-domain Showing a custom domain during sign in]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627897378,
      "updated": 1627904468
    },
    {
      "id": "6107d9d4aff09e0000ebba09",
      "text": "   \t[https://firebase.google.com/docs/hosting/custom-domain Connect a custom domain | Firebase]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627904468,
      "updated": 1627904517
    },
    {
      "id": "6107da39aff09e0000ebba0b",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627904569,
      "updated": 1627904569
    },
    {
      "id": "6107be24aff09e0000f99a31",
      "text": "コンソール",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627897381,
      "updated": 1627897384
    },
    {
      "id": "6107bdb6aff09e0000a889c3",
      "text": "\t[https://gyazo.com/582157f59c7c6dad53f159fa3b8e7d98]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627897271,
      "updated": 1627897360
    },
    {
      "id": "6107be0faff09e0000a889c4",
      "text": "　はー、なるほど、こうなるのか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627897360,
      "updated": 1627897391
    },
    {
      "id": "6107b6d7aff09e0000f99a2a",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627895511,
      "updated": 1627895511
    },
    {
      "id": "6107d56caff09e0000ebb9e5",
      "text": "code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903341,
      "updated": 1627903347
    },
    {
      "id": "6107d56eaff09e0000ebb9e7",
      "text": " import \"firebaseui\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903343,
      "updated": 1627903344
    },
    {
      "id": "6107d56faff09e0000ebb9e8",
      "text": " var ui = new firebaseui.auth.AuthUI(firebase.auth());",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903344,
      "updated": 1627903356
    },
    {
      "id": "6107d58daff09e0000ebb9ea",
      "text": " // 'firebaseui' refers to a UMD global, but the current file is a module. Consider adding an import instead. ts(2686)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903373,
      "updated": 1627903392
    },
    {
      "id": "6107d56caff09e0000ebb9e6",
      "text": "code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903341,
      "updated": 1627903523
    },
    {
      "id": "6107d622aff09e0000ebb9ec",
      "text": " import firebaseui from \"firebaseui\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903523,
      "updated": 1627903524
    },
    {
      "id": "6107de82aff09e0000ebba0c",
      "text": " // Attempted import error: 'firebaseui' does not contain a default export (imported as 'firebaseui').",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627905666,
      "updated": 1627905667
    },
    {
      "id": "6107d624aff09e0000ebb9ed",
      "text": "code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903524,
      "updated": 1627905963
    },
    {
      "id": "6107dfaaaff09e0000ebba0d",
      "text": " import * as firebaseui from \"firebaseui\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627905963,
      "updated": 1627905963
    },
    {
      "id": "6107dfacaff09e0000ebba0e",
      "text": " // Import may be converted to a default import. ts(80003)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627905964,
      "updated": 1627905979
    },
    {
      "id": "6107d591aff09e0000ebb9eb",
      "text": "[https://gyazo.com/f20f0b9ebab31b694a6f6233970dbcb5]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627903378,
      "updated": 1627906691
    },
    {
      "id": "6107e283aff09e0000ebba0f",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627906691,
      "updated": 1627906691
    },
    {
      "id": "6107e5d9aff09e0000ebba13",
      "text": "code:html",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627907546,
      "updated": 1627907555
    },
    {
      "id": "6107e5dcaff09e0000ebba14",
      "text": " <link type=\"text/css\" rel=\"stylesheet\" href=\"https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.css\" />",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627907548,
      "updated": 1627907549
    },
    {
      "id": "6107e286aff09e0000ebba10",
      "text": "[https://gyazo.com/4d92cd515b20dd245b8910bb42c81ccf]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627906695,
      "updated": 1627907538
    },
    {
      "id": "6107e287aff09e0000ebba11",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627906695,
      "updated": 1627906695
    },
    {
      "id": "6107ac33aff09e0000a889b7",
      "text": "https://www.npmjs.com/package/identicon",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627892789,
      "updated": 1627892789
    },
    {
      "id": "6107ac34aff09e0000a889b8",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627892789,
      "updated": 1627892789
    },
    {
      "id": "6107f03eaff09e0000a889cb",
      "text": "だいぶ部品が揃ったので改めて考える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910206,
      "updated": 1627910225
    },
    {
      "id": "6107f051aff09e0000f99a3c",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910225,
      "updated": 1627910225
    },
    {
      "id": "6107eeffaff09e0000f99a3a",
      "text": "再掲",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627909888,
      "updated": 1627910202
    },
    {
      "id": "6107f03aaff09e0000a889c5",
      "text": " 絶対にダメなこと",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910202,
      "updated": 1627910204
    },
    {
      "id": "6107f03caff09e0000a889c6",
      "text": " \tチュートリアル開始前にログインを要求する",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910204,
      "updated": 1627910204
    },
    {
      "id": "6107f03caff09e0000a889c7",
      "text": " \t閲覧オンリーで渡したURLから編集権限が得られること",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910204,
      "updated": 1627910204
    },
    {
      "id": "6107f03caff09e0000a889c8",
      "text": " 好まないこと",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910204,
      "updated": 1627910204
    },
    {
      "id": "6107f03caff09e0000a889c9",
      "text": " \t一人で使っててHandoffで渡した時に渡した先でログインが必要になること",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910204,
      "updated": 1627910204
    },
    {
      "id": "6107f03caff09e0000a889ca",
      "text": " 　\tログインが一回だけで、セッションが長く続くなら許容範囲か",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910204,
      "updated": 1627910204
    },
    {
      "id": "6107ef04aff09e0000f99a3b",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627909892,
      "updated": 1627909892
    },
    {
      "id": "6107f055aff09e0000f99a3d",
      "text": "デフォルトではURLを知っていればアクセスできる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910230,
      "updated": 1627910268
    },
    {
      "id": "6107f08baff09e0000f99a3f",
      "text": "　後からアクセス権を絞れる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910284,
      "updated": 1627910322
    },
    {
      "id": "6107f0b1aff09e0000f99a41",
      "text": "　　writeを特定のユーザに限定するとか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910322,
      "updated": 1627910370
    },
    {
      "id": "6107f0e1aff09e0000f99a42",
      "text": "　　リードオンリーのリンクを作るとか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910370,
      "updated": 1627910425
    },
    {
      "id": "6107f118aff09e0000f99a43",
      "text": "　　　これはすなわち作者一人にwriteを制限することと同じ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910425,
      "updated": 1627910449
    },
    {
      "id": "6107f135aff09e0000f99a44",
      "text": "　　この「アクセス権の変更権」をオーナーだけに持たせる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910454,
      "updated": 1627910524
    },
    {
      "id": "6107f18baff09e0000f99a45",
      "text": "　　　ここでオーナー識別のためにログインしてなくても匿名ユーザを作る？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910540,
      "updated": 1627910585
    },
    {
      "id": "6107f1b9aff09e0000f99a46",
      "text": "　　　それともクラウド保存をするためにはログインが必要とする？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910585,
      "updated": 1627910608
    },
    {
      "id": "6107f1d0aff09e0000f99a47",
      "text": "　　　　それはおかしな設計ではない、よくある",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910608,
      "updated": 1627910615
    },
    {
      "id": "6107f1d7aff09e0000f99a48",
      "text": "　　　　一方でアカウントがないと使い始められないのはイマイチに感じる？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910615,
      "updated": 1627910639
    },
    {
      "id": "6107f1efaff09e0000f99a49",
      "text": "　　　　　メールとパスワードでアカウントを作るのではなくOAuthだからそれほど気にすることでもない？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910639,
      "updated": 1627910666
    },
    {
      "id": "6107f073aff09e0000f99a3e",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627910259,
      "updated": 1627910259
    },
    {
      "id": "6107f3d4aff09e0000cb2385",
      "text": "アクセス権を絞るタイミングでは必要なのだけど、それより手前のクラウド保存するタイミングで「ログインしてね」って言われるのが自然かなぁ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627911125,
      "updated": 1627911129
    },
    {
      "id": "6107f3d5aff09e0000cb2386",
      "text": "　で、その段階ではアクセス権を絞ってないのでHandoffしたら書き込める",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627911125,
      "updated": 1627911156
    },
    {
      "id": "6107f402aff09e0000cb2388",
      "text": "　その後、リードオンリービューを作ってシェアしようとしたら書き込めてた端末が書き込めなくなっちゃう…と思ったけど、writerを記録しておいてリードオンリービューを作る時にオーナーに絞るのではなく既存のwriterに絞ればいいのでは",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627911171,
      "updated": 1627911249
    },
    {
      "id": "6107f451aff09e0000cb2389",
      "text": "　Handoffで渡された端末は匿名ログインして自分のユーザIDをwriterに書き込む",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627911249,
      "updated": 1627912088
    },
    {
      "id": "6107f7a0aff09e0000cb238a",
      "text": "　　これで「今書き込みモードで接続してる人数の可視化」もできる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627912097,
      "updated": 1627912112
    },
    {
      "id": "6107f3dbaff09e0000cb2387",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1627911131,
      "updated": 1627911131
    }
  ]
}