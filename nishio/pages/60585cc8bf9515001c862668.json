{
  "id": "60585cc8bf9515001c862668",
  "title": "✅Keichoの設定を保存する",
  "created": 1616403662,
  "updated": 1616494334,
  "lines": [
    {
      "id": "60585cc8bf9515001c862668",
      "text": "✅Keichoの設定を保存する",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616403662,
      "updated": 1616494334
    },
    {
      "id": "60585ccdaff09e0000591b58",
      "text": "　Scrapbox",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616403662,
      "updated": 1616403675
    },
    {
      "id": "60585cdbaff09e0000591b5b",
      "text": "　\tユーザアイコンを覚える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616403675,
      "updated": 1616403677
    },
    {
      "id": "60585cebaff09e0000591b5e",
      "text": "　\tプロジェクト名を覚える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616403692,
      "updated": 1616403692
    },
    {
      "id": "60586558aff09e000052d33a",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616405848,
      "updated": 1616405851
    },
    {
      "id": "60585cceaff09e0000591b59",
      "text": "　将来的にはユーザの好むスクロール位置とかも?",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616403662,
      "updated": 1616405852
    },
    {
      "id": "6059b5f7aff09e0000a66300",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492023,
      "updated": 1616492023
    },
    {
      "id": "6059b5f7aff09e0000a66301",
      "text": "code:Config.ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492023,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66303",
      "text": " import { getGlobal, setGlobal } from \"reactn\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66304",
      "text": " import { localDB } from \"./localDB\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66305",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66306",
      "text": " export const defaultConfig = {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60faff09e0000a66323",
      "text": "   ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492047,
      "updated": 1616492049
    },
    {
      "id": "6059b60aaff09e0000a66307",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492047
    },
    {
      "id": "6059b60aaff09e0000a6630b",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a6630c",
      "text": " const load = () => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a6630d",
      "text": "   return localDB.config",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a6630e",
      "text": "     .get(1)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a6630f",
      "text": "     .then((config) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66310",
      "text": "       if (config === undefined) {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492051
    },
    {
      "id": "6059b60aaff09e0000a66312",
      "text": "         return defaultConfig;",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66313",
      "text": "       }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66314",
      "text": "       return { ...defaultConfig, ...JSON.parse(config.json) };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66315",
      "text": "     })",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66316",
      "text": "     .then((config) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66317",
      "text": "       setGlobal({ config });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66318",
      "text": "     });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66319",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a6631a",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a6631b",
      "text": " const save = () => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a6631c",
      "text": "   const json = JSON.stringify(getGlobal().config);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a6631d",
      "text": "   localDB.config.put({ json }, 1);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a6631e",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a6631f",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66320",
      "text": " const Config = { load, save };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66321",
      "text": " export default Config;",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492042
    },
    {
      "id": "6059b60aaff09e0000a66322",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492042,
      "updated": 1616492066
    },
    {
      "id": "6059b63daff09e0000a66324",
      "text": "code:index.tsx",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492094,
      "updated": 1616492102
    },
    {
      "id": "6059b643aff09e0000a66325",
      "text": " import Config from \"./Config\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492099,
      "updated": 1616492099
    },
    {
      "id": "6059b643aff09e0000a66326",
      "text": " Config.load();",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492099,
      "updated": 1616492104
    },
    {
      "id": "6059b643aff09e0000a6632a",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492099,
      "updated": 1616492106
    },
    {
      "id": "6059b64daff09e0000a6632b",
      "text": "code:initializeGlobalState.ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492109,
      "updated": 1616492131
    },
    {
      "id": "6059b663aff09e0000a6632d",
      "text": " import { defaultConfig } from \"./Config\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492131,
      "updated": 1616492137
    },
    {
      "id": "6059b668aff09e0000a6632e",
      "text": " const INITIAL_GLOBAL_STATE = {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492137,
      "updated": 1616492144
    },
    {
      "id": "6059b673aff09e0000a6633a",
      "text": "   ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492148,
      "updated": 1616492149
    },
    {
      "id": "6059b66faff09e0000a6632f",
      "text": "   config: defaultConfig,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492144,
      "updated": 1616492147
    },
    {
      "id": "6059b66faff09e0000a66338",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492144,
      "updated": 1616492144
    },
    {
      "id": "6059b66faff09e0000a66339",
      "text": "[initializeGlobalState.ts]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492144,
      "updated": 1616492640
    },
    {
      "id": "6059b6b0aff09e0000a6633b",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492208,
      "updated": 1616492208
    },
    {
      "id": "6059b6caaff09e0000a6633c",
      "text": "code:localDB.ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492235,
      "updated": 1616492239
    },
    {
      "id": "6059b6cfaff09e0000a6633e",
      "text": " import Dexie from \"dexie\";",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492239,
      "updated": 1616492240
    },
    {
      "id": "6059b6cfaff09e0000a6633f",
      "text": " export interface IConfig {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492240,
      "updated": 1616492240
    },
    {
      "id": "6059b6cfaff09e0000a66340",
      "text": "   id?: number; // Primary key. Optional (autoincremented)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492240,
      "updated": 1616492240
    },
    {
      "id": "6059b6cfaff09e0000a66341",
      "text": "   json: string;",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492240,
      "updated": 1616492240
    },
    {
      "id": "6059b6cfaff09e0000a66342",
      "text": " }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492240,
      "updated": 1616492240
    },
    {
      "id": "6059b6deaff09e0000a66344",
      "text": " class MyAppDatabase extends Dexie {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66345",
      "text": "   // Declare implicit table properties.",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66346",
      "text": "   // (just to inform Typescript. Instanciated by Dexie in stores() method)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66347",
      "text": "   talks: Dexie.Table<ITalks, number>; // number = type of the primkey",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66348",
      "text": "   config: Dexie.Table<IConfig, number>;",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66349",
      "text": "   //...other tables goes here...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a6634a",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a6634b",
      "text": "   constructor() {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a6634c",
      "text": "     super(\"Keicho\");",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a6634d",
      "text": "     this.version(4).stores({",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a6634e",
      "text": "       talks: \"++id,TalkID,last_modified\",",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a6634f",
      "text": "       config: \"++id,json\",",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66350",
      "text": "       //...other tables goes here...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66351",
      "text": "     });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66352",
      "text": "     // The following line is needed if your typescript",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66353",
      "text": "     // is compiled using babel instead of tsc:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66354",
      "text": "     this.talks = this.table(\"talks\");",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66355",
      "text": "     this.config = this.table(\"config\");",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66356",
      "text": "   }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66357",
      "text": " }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492255
    },
    {
      "id": "6059b6dfaff09e0000a66358",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492255,
      "updated": 1616492283
    },
    {
      "id": "6059b6fbaff09e0000a66359",
      "text": "code:ScrapboxDialog.tsx",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492283,
      "updated": 1616492367
    },
    {
      "id": "6059b74faff09e0000a6635d",
      "text": " export const ScrapboxDialog = () => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492368,
      "updated": 1616492380
    },
    {
      "id": "6059b764aff09e0000a663e1",
      "text": "   ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492389,
      "updated": 1616492391
    },
    {
      "id": "6059b75caff09e0000a6635e",
      "text": "   const [g] = useGlobal();",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492388
    },
    {
      "id": "6059b76faff09e0000a663e2",
      "text": "   ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492399,
      "updated": 1616492405
    },
    {
      "id": "6059b75caff09e0000a66363",
      "text": "   const projectName = g.config.project_name;",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492419
    },
    {
      "id": "6059b782aff09e0000a663e3",
      "text": "   ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492419,
      "updated": 1616492487
    },
    {
      "id": "6059b75caff09e0000a66383",
      "text": "   const handleClose = () => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a66384",
      "text": "     Config.save();",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a66385",
      "text": "     setDialog(null);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a66386",
      "text": "   };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a66387",
      "text": "   ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492492
    },
    {
      "id": "6059b75caff09e0000a66388",
      "text": "   const onChangeProjectName = (e: React.ChangeEvent<HTMLInputElement>) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492424
    },
    {
      "id": "6059b75caff09e0000a66393",
      "text": "     updateGlobal((g) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a66394",
      "text": "       g.config.project_name = e.target.value;",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a66395",
      "text": "     });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a66396",
      "text": "   };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b7ceaff09e0000a663e6",
      "text": "   ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492494,
      "updated": 1616492495
    },
    {
      "id": "6059b75caff09e0000a66397",
      "text": "   return (...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492449
    },
    {
      "id": "6059b75caff09e0000a663aa",
      "text": "           <label>Project Name: </label>",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492447
    },
    {
      "id": "6059b75caff09e0000a663c6",
      "text": "           <input",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a663c7",
      "text": "             type=\"text\"",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a663c8",
      "text": "             defaultValue={projectName}",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a663c9",
      "text": "             onChange={onChangeProjectName}",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a663ca",
      "text": "           ></input>",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b7b2aff09e0000a663e5",
      "text": "           ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492466,
      "updated": 1616492467
    },
    {
      "id": "6059b7aeaff09e0000a663e4",
      "text": "   );",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492462,
      "updated": 1616492470
    },
    {
      "id": "6059b75caff09e0000a663df",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492380
    },
    {
      "id": "6059b75caff09e0000a663e0",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492380,
      "updated": 1616492475
    },
    {
      "id": "6059bed3aff09e0000b6d585",
      "text": "状態の更新には[immer]を使っている",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616494292,
      "updated": 1616494308
    },
    {
      "id": "6059b739aff09e0000a6635b",
      "text": "[updateGlobal.ts]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492345,
      "updated": 1616492349
    },
    {
      "id": "6059b739aff09e0000a6635c",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1616492345,
      "updated": 1616492345
    }
  ]
}