{
  "id": "6130254805742c0020259aed",
  "title": "Kozaneba開発日記2021-09-02",
  "created": 1630545224,
  "updated": 1643113788,
  "lines": [
    {
      "id": "6130254805742c0020259aed",
      "text": "Kozaneba開発日記2021-09-02",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630545224,
      "updated": 1643113788
    },
    {
      "id": "61302548aff09e0000647889",
      "text": "from [Kozaneba開発日記2021-09-01]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630545224,
      "updated": 1643113780
    },
    {
      "id": "61302548aff09e000064788a",
      "text": "2021-09-02Kozaneba開発日記",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630545224,
      "updated": 1630545224
    },
    {
      "id": "61302548aff09e000064788b",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630545224,
      "updated": 1630545224
    },
    {
      "id": "6130254daff09e000064788c",
      "text": "リリースノート",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630545230,
      "updated": 1630547473
    },
    {
      "id": "61302e19aff09e000064788f",
      "text": "　タイトルのついているグループをungroupした時、そのタイトルのついた空のグループが左上隅に残る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630547482,
      "updated": 1630547574
    },
    {
      "id": "61302e4aaff09e0000647890",
      "text": "　　以前はタイトルが新しいこざねになっていた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630547530,
      "updated": 1630547532
    },
    {
      "id": "61302e11aff09e000064788e",
      "text": "   これは「グループにつけたタイトル」はグループの要約として新しく生み出されたものだから消してはいけない、という思想",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630547473,
      "updated": 1630547655
    },
    {
      "id": "61302ec7aff09e0000647892",
      "text": "  こざねではなくグループとして残すことで、たとえばいくつも要素があるグループの半分を別のグループに出したい時、ungroupして、半分を選択して元のグループに入れ、もう半分を別のグループにすることができる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630547655,
      "updated": 1630560614
    },
    {
      "id": "61302e92aff09e0000647891",
      "text": "  [https://gyazo.com/c1dca0c13c52d22defed38e53e39921b]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630547603,
      "updated": 1630556515
    },
    {
      "id": "61305160aff09e0000d951e0",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630556515,
      "updated": 1630556515
    },
    {
      "id": "613034a7aff09e0000647898",
      "text": "リリースノート",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630549160,
      "updated": 1630549905
    },
    {
      "id": "6130378eaff09e000064789a",
      "text": "　ペーストのバグを修正",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630549905,
      "updated": 1630549909
    },
    {
      "id": "61306443aff09e0000d951e3",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561347,
      "updated": 1630561352
    },
    {
      "id": "613038beaff09e000064789b",
      "text": "場の削除機能をとりあえず開発者メニューに追加した",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630550207,
      "updated": 1630550229
    },
    {
      "id": "613038d5aff09e000064789d",
      "text": "　削除してリロードすると「ない」とエラーダイアログが出る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630550229,
      "updated": 1630550282
    },
    {
      "id": "6130390aaff09e000064789e",
      "text": "　変更subscriptionが切れる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630550282,
      "updated": 1630550791
    },
    {
      "id": "61303b07aff09e000064789f",
      "text": "　　これを検知してオートセーブがオフになる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630550791,
      "updated": 1630550800
    },
    {
      "id": "61303b11aff09e00006478a0",
      "text": "　　もう一度オンにすれば別のキーで新規保存される",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630550802,
      "updated": 1630550825
    },
    {
      "id": "61303b2faff09e00006478a1",
      "text": "　ユーザに直接使わせても大丈夫そうだな",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630550832,
      "updated": 1630550861
    },
    {
      "id": "613038c0aff09e000064789c",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630550209,
      "updated": 1630550209
    },
    {
      "id": "61304af0aff09e00006478a3",
      "text": "リリースノート",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630554864,
      "updated": 1630554865
    },
    {
      "id": "61304af1aff09e00006478a5",
      "text": "　場の削除機能",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630554866,
      "updated": 1630554869
    },
    {
      "id": "61304af7aff09e00006478a6",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630554871,
      "updated": 1630554871
    },
    {
      "id": "61304af7aff09e00006478a7",
      "text": "リリースノート",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630554871,
      "updated": 1630555921
    },
    {
      "id": "61304f10aff09e00006478a8",
      "text": "　リンクこざね",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630555921,
      "updated": 1630561401
    },
    {
      "id": "61306471aff09e0000d951e8",
      "text": "　\tこざねの`custom.url`が空文字列でもundefinedでもない場合:",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561394,
      "updated": 1630561413
    },
    {
      "id": "6130647faff09e0000d951e9",
      "text": "　\t\t右上隅にリンクアイコンが表示され、メニューに`visit`が追加される",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561407,
      "updated": 1630561407
    },
    {
      "id": "61304af1aff09e00006478a4",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630554865,
      "updated": 1630554865
    },
    {
      "id": "6130503caff09e00006478a9",
      "text": "グループにminSizeをつけたけど「ピッチリしてて選択しにくい」ケースが出る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630556220,
      "updated": 1630557989
    },
    {
      "id": "61305f16aff09e00006478ba",
      "text": "　どうするのが良いのか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630560025,
      "updated": 1630560027
    },
    {
      "id": "61305f6baff09e00006478bc",
      "text": "　面積で判断？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630560109,
      "updated": 1630560112
    },
    {
      "id": "6130503eaff09e00006478aa",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630556223,
      "updated": 1630556223
    },
    {
      "id": "61305b84aff09e00006478b2",
      "text": "リリースノート",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630559111,
      "updated": 1630559112
    },
    {
      "id": "61305b87aff09e00006478b4",
      "text": "　URLをペーストした時に`custom.url`を持ったこざねが作られる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630559112,
      "updated": 1630559138
    },
    {
      "id": "61305ba2aff09e00006478b5",
      "text": "　　表示する文字列は貼り付けた後コンテキストメニューからeditできる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630559138,
      "updated": 1630559194
    },
    {
      "id": "61305b87aff09e00006478b3",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630559112,
      "updated": 1630559112
    },
    {
      "id": "6130644daff09e0000d951e4",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561358,
      "updated": 1630566740
    },
    {
      "id": "61305dfbaff09e00006478b6",
      "text": "「Baの一部を別のBaにする」ができる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630559740,
      "updated": 1630566744
    },
    {
      "id": "61307958aff09e0000d951ec",
      "text": "　コピーしたものがJSONになってクリップボードに入る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630566744,
      "updated": 1630566767
    },
    {
      "id": "61307959aff09e0000d951ee",
      "text": "　他のBaにペーストすることもできる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630566745,
      "updated": 1630566767
    },
    {
      "id": "61307989aff09e00006478d4",
      "text": "　だから「選択してコピーして新規Baにペースト」すれば良い",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630566794,
      "updated": 1630566829
    },
    {
      "id": "61307959aff09e0000d951ef",
      "text": "\tこれを一つのメニューにするかどうか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630566745,
      "updated": 1630566754
    },
    {
      "id": "61305dfdaff09e00006478b7",
      "text": "　　それほど頻繁に使うものでもないよなと思う",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630559742,
      "updated": 1630566833
    },
    {
      "id": "61305e3faff09e00006478b8",
      "text": "　作るとするなら、ユーザ拡張で再利用可能なように",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630559807,
      "updated": 1630560341
    },
    {
      "id": "61306057aff09e00006478be",
      "text": "　　選択範囲のJSONとしての取得",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630560344,
      "updated": 1630560382
    },
    {
      "id": "61306063aff09e00006478bf",
      "text": "　　JSONを新規Baに書き込み、IDを得る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630560355,
      "updated": 1630560412
    },
    {
      "id": "6130609caff09e00006478c0",
      "text": "　の2つが必要",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630560412,
      "updated": 1630560419
    },
    {
      "id": "613060a3aff09e00006478c1",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630560419,
      "updated": 1630560419
    },
    {
      "id": "613060a3aff09e00006478c2",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630560419,
      "updated": 1630560419
    },
    {
      "id": "6130603caff09e00006478bd",
      "text": "他のものに使っていく",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630560316,
      "updated": 1630561121
    },
    {
      "id": "61306360aff09e00006478c4",
      "text": "　pKeichobot",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561121,
      "updated": 1630561138
    },
    {
      "id": "61306360aff09e00006478c3",
      "text": " pIntellitech",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561121,
      "updated": 1630561153
    },
    {
      "id": "6130636aaff09e00006478c5",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561131,
      "updated": 1630561131
    },
    {
      "id": "61306578aff09e00006478c6",
      "text": "選択範囲が空の場合、選択モードから抜ける",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561657,
      "updated": 1630561670
    },
    {
      "id": "6130661aaff09e00006478c8",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561819,
      "updated": 1630561819
    },
    {
      "id": "6130661caff09e00006478c9",
      "text": "名前のないグループをコピーペーストした後中のグループをungroupするとクラッシュする",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561821,
      "updated": 1630561850
    },
    {
      "id": "6130657baff09e00006478c7",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630561659,
      "updated": 1630561659
    },
    {
      "id": "61307553aff09e00006478cc",
      "text": "リリースノート",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630565716,
      "updated": 1630565718
    },
    {
      "id": "61307557aff09e00006478cd",
      "text": "　Firestoreの権限ルールのバグを修正",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630565720,
      "updated": 1630565734
    },
    {
      "id": "613074cfaff09e00006478ca",
      "text": "　　リードオンリー共有しているBaに対して、ローカルで開発サーバを起動するなどして開発メニューから削除コマンドを実行すると削除できてしまう状態にあった",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630565587,
      "updated": 1630565743
    },
    {
      "id": "6130756eaff09e00006478ce",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630565743,
      "updated": 1630565769
    },
    {
      "id": "61307589aff09e00006478cf",
      "text": "ローカルバックアップが必要だな",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630565769,
      "updated": 1630565799
    },
    {
      "id": "613075c5aff09e00006478d3",
      "text": "　JSONにする機能と、それをユーザがペーストすることで復元する機能はあるわけだから難しくなさそう",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630565830,
      "updated": 1630565867
    },
    {
      "id": "613075a7aff09e00006478d2",
      "text": "　15分に1回くらい、直前のバックアップと比較して更新されてたらローカルのIndexedDBに保存すれば良い",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630565799,
      "updated": 1630565906
    },
    {
      "id": "61307592aff09e00006478d0",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630565779,
      "updated": 1630565779
    },
    {
      "id": "61308679aff09e0000bb189a",
      "text": "リリースノート",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570105,
      "updated": 1630570105
    },
    {
      "id": "613078a1aff09e0000d951ea",
      "text": "\tこざね追加時にちょうどぴったり長方形に並ぶとグループをドラッグするために掴む場所がない問題を修正",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630566562,
      "updated": 1630570106
    },
    {
      "id": "61308289aff09e00006478d5",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630569097,
      "updated": 1630569097
    },
    {
      "id": "6130867baff09e0000bb189b",
      "text": "うーん…",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570108,
      "updated": 1630570139
    },
    {
      "id": "6130866caff09e0000bb188f",
      "text": "code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570093,
      "updated": 1630570095
    },
    {
      "id": "6130866faff09e0000bb1891",
      "text": " const p = get_group(getGlobal(), parent);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570095,
      "updated": 1630570100
    },
    {
      "id": "6130866faff09e0000bb1892",
      "text": " if (p.items.length === 0 && p.text === \"\") {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570095,
      "updated": 1630570100
    },
    {
      "id": "6130866faff09e0000bb1893",
      "text": "   updateGlobal((g) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570095,
      "updated": 1630570100
    },
    {
      "id": "6130866faff09e0000bb1894",
      "text": "     remove_item(g, parent);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570095,
      "updated": 1630570100
    },
    {
      "id": "6130866faff09e0000bb1895",
      "text": "   });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570095,
      "updated": 1630570100
    },
    {
      "id": "6130866faff09e0000bb1896",
      "text": " } else {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570095,
      "updated": 1630570100
    },
    {
      "id": "6130866faff09e0000bb1897",
      "text": "   normalize_group_position(parent);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570095,
      "updated": 1630570100
    },
    {
      "id": "6130866faff09e0000bb1898",
      "text": " }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570095,
      "updated": 1630570100
    },
    {
      "id": "6130866faff09e0000bb1899",
      "text": "部品の構造が3通りある…",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570095,
      "updated": 1630570176
    },
    {
      "id": "613086c0aff09e00006478d7",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570176,
      "updated": 1630570176
    },
    {
      "id": "613086c0aff09e00006478d8",
      "text": " A: 内部でupdateGlobalする: normalize_group_position",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570176,
      "updated": 1630570394
    },
    {
      "id": "613086ddaff09e00006478d9",
      "text": " B: draftを受け取ってそれを破壊的更新する: remove_item",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570205,
      "updated": 1630570399
    },
    {
      "id": "613086edaff09e00006478da",
      "text": " C: 破壊的更新はしないのでdraftでもそうでなくてもOK: get_group",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570222,
      "updated": 1630570406
    },
    {
      "id": "613086a1aff09e00006478d6",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570145,
      "updated": 1630570145
    },
    {
      "id": "6130873eaff09e00006478db",
      "text": "うーん、draftを受け取るの第二引数にして「省略されたら自分で作る」にしようか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570302,
      "updated": 1630570343
    },
    {
      "id": "61308749aff09e00006478dc",
      "text": "code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570314,
      "updated": 1630570624
    },
    {
      "id": "6130887faff09e0000bb189d",
      "text": " export const normalize_group_position = (gid: ItemId) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570624,
      "updated": 1630570624
    },
    {
      "id": "61308880aff09e0000bb189e",
      "text": "   updateGlobal((g) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570624,
      "updated": 1630570624
    },
    {
      "id": "61308885aff09e0000bb18ae",
      "text": "\t\t...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570629,
      "updated": 1630570632
    },
    {
      "id": "61308880aff09e0000bb189f",
      "text": "   });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570624,
      "updated": 1630570629
    },
    {
      "id": "61308880aff09e0000bb18ac",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570624,
      "updated": 1630570624
    },
    {
      "id": "61308880aff09e0000bb18ad",
      "text": "これを",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570624,
      "updated": 1630572798
    },
    {
      "id": "613090feaff09e00006478dd",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630572798,
      "updated": 1630572798
    },
    {
      "id": "61309100aff09e00006478de",
      "text": "こうする",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630572800,
      "updated": 1630572802
    },
    {
      "id": "613088d5aff09e0000bb18af",
      "text": "code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570710,
      "updated": 1630570712
    },
    {
      "id": "613088d7aff09e0000bb18b1",
      "text": " export const normalize_group_position = (gid: ItemId, draft?: State) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570712,
      "updated": 1630570713
    },
    {
      "id": "613088d8aff09e0000bb18b2",
      "text": "   const body = (g: State) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570713,
      "updated": 1630570713
    },
    {
      "id": "613088deaff09e0000bb18c7",
      "text": "     ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570718,
      "updated": 1630570720
    },
    {
      "id": "613088d8aff09e0000bb18b3",
      "text": "   };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570713,
      "updated": 1630570717
    },
    {
      "id": "613088d8aff09e0000bb18c0",
      "text": "   if (draft === undefined) {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570713,
      "updated": 1630570713
    },
    {
      "id": "613088d8aff09e0000bb18c1",
      "text": "     updateGlobal(body);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570713,
      "updated": 1630570713
    },
    {
      "id": "613088d8aff09e0000bb18c2",
      "text": "   } else {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570713,
      "updated": 1630570713
    },
    {
      "id": "613088d8aff09e0000bb18c3",
      "text": "     body(draft);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570713,
      "updated": 1630570713
    },
    {
      "id": "613088d8aff09e0000bb18c4",
      "text": "   }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570713,
      "updated": 1630570713
    },
    {
      "id": "613088d8aff09e0000bb18c5",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570713,
      "updated": 1630570713
    },
    {
      "id": "613088d8aff09e0000bb18c6",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570713,
      "updated": 1630570713
    },
    {
      "id": "613088d6aff09e0000bb18b0",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630570711,
      "updated": 1630570711
    },
    {
      "id": "613092beaff09e00006478df",
      "text": "さらにこうか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573249,
      "updated": 1630573250
    },
    {
      "id": "61309277aff09e0000bb18c8",
      "text": "code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573176,
      "updated": 1630573177
    },
    {
      "id": "61309279aff09e0000bb18ca",
      "text": " export const normalize_group_position = (gid: ItemId, draft?: State) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573177,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18cb",
      "text": "   optional_draft(draft, (g) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573232
    },
    {
      "id": "61309280aff09e0000bb18e6",
      "text": "\t\t...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573184,
      "updated": 1630573188
    },
    {
      "id": "61309279aff09e0000bb18cc",
      "text": "   });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573184
    },
    {
      "id": "61309279aff09e0000bb18d9",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18da",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18db",
      "text": " const optional_draft = (",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18dc",
      "text": "   draft: State | undefined,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18dd",
      "text": "   f: (g: State) => void",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18de",
      "text": " ): void => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18df",
      "text": "   if (draft === undefined) {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18e0",
      "text": "     updateGlobal(f);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18e1",
      "text": "   } else {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18e2",
      "text": "     f(draft);",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18e3",
      "text": "   }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18e4",
      "text": " };",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573178
    },
    {
      "id": "61309279aff09e0000bb18e5",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573178,
      "updated": 1630573253
    },
    {
      "id": "61309278aff09e0000bb18c9",
      "text": "これで`optional_draft`部分は共通化されて、既存のdraftを受け取らないユーティリティの冒頭2行を書き換えるだけで良くなる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573176,
      "updated": 1630573380
    },
    {
      "id": "613092d1aff09e00006478e0",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630573265,
      "updated": 1630573265
    },
    {
      "id": "6130a370aff09e0000bb18e7",
      "text": "https://twitter.com/nishio/status/1433356592620081155?s=20",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630577521,
      "updated": 1630577521
    },
    {
      "id": "6130a371aff09e0000bb18e9",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630577522,
      "updated": 1630577522
    },
    {
      "id": "6130a383aff09e0000bb18ea",
      "text": "[矢印は明確な関係を表現し壊れなくする方法]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630577540,
      "updated": 1630646143
    },
    {
      "id": "6131af1caff09e000015043a",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630646045,
      "updated": 1630646045
    },
    {
      "id": "6131ae9caff09e0000150426",
      "text": "[ソースコードをScrapbox的に管理]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630645916,
      "updated": 1630645937
    },
    {
      "id": "6131aea1aff09e0000150427",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630645922,
      "updated": 1630645922
    },
    {
      "id": "6130b004aff09e0000bb18eb",
      "text": "あ、そうか、なるほど",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630580741,
      "updated": 1630583413
    },
    {
      "id": "6130ba75aff09e00006478e5",
      "text": "　リードオンリー共有した(僕が編集権限を持ってる)Baを別名保存して別のユーザが編集した際、「別名保存」の段階で僕の編集権限ごと保存されてるので僕の一覧にも出るし書き換えられちゃう",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630583413,
      "updated": 1630583481
    },
    {
      "id": "6130bab9aff09e00006478e6",
      "text": "　　この挙動はおかしいな",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630583482,
      "updated": 1630583488
    },
    {
      "id": "6130ba74aff09e00006478e4",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630583413,
      "updated": 1630583413
    },
    {
      "id": "6131856eaff09e0000b1e954",
      "text": "next: [Kozaneba開発日記2021-09-03]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630635374,
      "updated": 1643113798
    },
    {
      "id": "6131980caff09e0000150421",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1630640141,
      "updated": 1630640141
    }
  ]
}