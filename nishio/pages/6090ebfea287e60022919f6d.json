{
  "id": "6090ebfea287e60022919f6d",
  "title": "Hatena2009-04-09",
  "created": 1239202800,
  "updated": 1239202800,
  "lines": [
    {
      "id": "6090ec22aff09e00003d05b1",
      "text": "Hatena2009-04-09",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05b2",
      "text": "code:hatena",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05b3",
      "text": " <body>",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05b4",
      "text": " *1239251617*ContextFreeArtとNodeBox",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05b5",
      "text": " <a href='http://d.hatena.ne.jp/nishiohirokazu/20090403/1238707279'>Context Free Art - 西尾泰和のはてなダイアリー</a>で書いたものをNodeBoxでも書いてみた。",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05b6",
      "text": " >|python|",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05b7",
      "text": " def circle():",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05b8",
      "text": "     oval(0, 0, 1, 1)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05b9",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05ba",
      "text": " scale(200)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05bb",
      "text": " translate(1, 1)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05bc",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05bd",
      "text": " def egg(level=0):",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05be",
      "text": "     if level == 8: return",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05bf",
      "text": "     circle()",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05c0",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05c1",
      "text": "     push()",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05c2",
      "text": "     fill(1, 1, 1)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05c3",
      "text": "     scale(0.9)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05c4",
      "text": "     circle()",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05c5",
      "text": "     fill(0, 0, 0)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05c6",
      "text": "     pop()",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05c7",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05c8",
      "text": "     push()",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05c9",
      "text": "     translate(0.3, 0)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05ca",
      "text": "     scale(0.6)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05cb",
      "text": "     rotate(10)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05cc",
      "text": "     egg(level + 1)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05cd",
      "text": "     pop()",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05ce",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05cf",
      "text": "     push()",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05d0",
      "text": "     translate(-0.3, 0)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05d1",
      "text": "     scale(0.6)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05d2",
      "text": "     rotate(10)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05d3",
      "text": "     egg(level + 1)",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05d4",
      "text": "     pop()",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05d5",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05d6",
      "text": " egg()",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05d7",
      "text": " ||<",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05d8",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05d9",
      "text": " <img src=\"http://gyazo.com/98e0281d6332e155395b8f2a296ecca7.png\">",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05da",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05db",
      "text": " <a href='http://d.hatena.ne.jp/nishiohirokazu/20090403/1238742197'>Context Free Artは教育用途にむいているか？ - 西尾泰和のはてなダイアリー</a>で書いたように「再起呼び出しの終了条件」「回転、スケール、色などのコンテキストのpushとpop」が明示的に追加されています。",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05dc",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05dd",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05de",
      "text": " あと、絵を見るとわかるのですけどオリジナルと違って腕の一部が隠れてますね。素朴に再起呼び出しで書いてしまうと深さ優先、つまりまず右の腕を全部かいてから左の腕をかき始めるのですが、ContextFreeArtでは再起呼び出しのその場で描画せずに「どこに何を描くべき」という情報をためておいて最後にまとめて呼び出しの浅い順に描いています。これが「直接カンバスに描きながら再起呼び出しをするだけではなく、Zオーダーでソートしてから描き直す処理を自動でやってくれる」という長所。これを実装しようと思うと、「現在のどういうスケール、回転、平行移動になっているか」の情報を取得して保存しておくことが必要になるわけですが…NodeBoxのヘルプを軽く眺めただけではそういう関数が見つかりませんでした。それがあれば再起の終了条件も「スケールが一定以下だったら」という切り方にしたりできるはず。",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05df",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05e0",
      "text": " ",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05e1",
      "text": " TODO: 気がむいたらInkscapeとProcessingでも同じものを描く。",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05e2",
      "text": " </body>",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05e3",
      "text": "",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec22aff09e00003d05e4",
      "text": "[はてなダイアリー 2009-04-09 https://nishiohirokazu.hatenadiary.org/archive/2009/04/09]",
      "created": 1239202800,
      "updated": 1239202800,
      "userId": "582e63d27c56960011aff09e"
    }
  ]
}