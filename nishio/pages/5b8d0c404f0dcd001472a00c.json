{
  "id": "5b8d0c404f0dcd001472a00c",
  "title": "PCAを使わないでPCAを実装",
  "created": 1535970372,
  "updated": 1540440200,
  "lines": [
    {
      "id": "5b8d0c404f0dcd001472a00c",
      "text": "PCAを使わないでPCAを実装",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970372,
      "updated": 1535970379
    },
    {
      "id": "5b8d0c61aff09e000008e92c",
      "text": "code:python",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970402,
      "updated": 1535970405
    },
    {
      "id": "5b8d0c6aaff09e000008e92d",
      "text": " import numpy as np",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970410,
      "updated": 1535970415
    },
    {
      "id": "5b8d0ce0aff09e000008e931",
      "text": " # 適当なデータを用意する 5次元6件のデータを用意した",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970528,
      "updated": 1535970733
    },
    {
      "id": "5b8d0c5daff09e000008e90a",
      "text": "\tdata = np.random.random((6, 5))",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970406
    },
    {
      "id": "5b8d0ce7aff09e000008e932",
      "text": " # 平均を引く",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970535,
      "updated": 1535970540
    },
    {
      "id": "5b8d0c5daff09e000008e90b",
      "text": "\td2 = data - data.mean(axis=0)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970407
    },
    {
      "id": "5b8d0cedaff09e000008e933",
      "text": " # 共分散行列を作る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970541,
      "updated": 1535970548
    },
    {
      "id": "5b8d0c5daff09e000008e90c",
      "text": "\tcov = np.einsum(\"ij,ik->jk\", d2, d2)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970408
    },
    {
      "id": "5b8d0c76aff09e000008e92e",
      "text": "\t",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970423,
      "updated": 1535970424
    },
    {
      "id": "5b8d0d84aff09e000008e93a",
      "text": " # 共分散行列はデータの次元の正方行列",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970692,
      "updated": 1535970710
    },
    {
      "id": "5b8d0c5daff09e000008e90e",
      "text": "\t>>> cov.shape",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970419
    },
    {
      "id": "5b8d0c5daff09e000008e90f",
      "text": "\t(5, 5)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970421
    },
    {
      "id": "5b8d0cf7aff09e000008e934",
      "text": "\t",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970551,
      "updated": 1535970553
    },
    {
      "id": "5b8d0c5daff09e000008e910",
      "text": "\t# 共分散行列を固有値分解する",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970569
    },
    {
      "id": "5b8d0c5daff09e000008e911",
      "text": "\t>>> np.linalg.eig(cov)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970429
    },
    {
      "id": "5b8d0c5daff09e000008e912",
      "text": " (array([1.34012189, 0.77663231, 0.58201555, 0.08694709, 0.03991043]),",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970444
    },
    {
      "id": "5b8d0c5daff09e000008e913",
      "text": "  array([[ 0.67869952,  0.35340645, -0.37436676,  0.50602025,  0.13514392],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970441,
      "updated": 1535970444
    },
    {
      "id": "5b8d0c5daff09e000008e914",
      "text": "         [ 0.45792096,  0.20519401,  0.77490418, -0.08403411, -0.37505412],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970441,
      "updated": 1535970444
    },
    {
      "id": "5b8d0c5daff09e000008e915",
      "text": "         [-0.46695028,  0.17178326,  0.04681577,  0.68316922, -0.53248104],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970441,
      "updated": 1535970444
    },
    {
      "id": "5b8d0c5daff09e000008e916",
      "text": "         [-0.26671759,  0.89310368, -0.08178549, -0.34559589,  0.07142937],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970441,
      "updated": 1535970444
    },
    {
      "id": "5b8d0c5daff09e000008e917",
      "text": "         [-0.20123254,  0.07652205,  0.50049221,  0.38823327,  0.74325791]]))",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970441,
      "updated": 1535970444
    },
    {
      "id": "5b8d0c5daff09e000008e918",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970441,
      "updated": 1535970448
    },
    {
      "id": "5b8d0d10aff09e000008e935",
      "text": " # 比較対象のPCA実装",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970577,
      "updated": 1535970587
    },
    {
      "id": "5b8d0c97aff09e000008e92f",
      "text": " from sklearn.decomposition import PCA",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970456,
      "updated": 1535970480
    },
    {
      "id": "5b8d0d22aff09e000008e936",
      "text": " # データにフィットさせる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970595,
      "updated": 1535970599
    },
    {
      "id": "5b8d0c5daff09e000008e919",
      "text": " m = PCA().fit(data)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970483
    },
    {
      "id": "5b8d0cb5aff09e000008e930",
      "text": "\t",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970485,
      "updated": 1535970602
    },
    {
      "id": "5b8d0d29aff09e000008e937",
      "text": " # 主成分軸を表示 ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970602,
      "updated": 1535970611
    },
    {
      "id": "5b8d0c5daff09e000008e91a",
      "text": " >>> m.components_",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970451
    },
    {
      "id": "5b8d0c5daff09e000008e91b",
      "text": " array([[ 0.67869952,  0.45792096, -0.46695028, -0.26671759, -0.20123254],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970503
    },
    {
      "id": "5b8d0c5daff09e000008e91c",
      "text": "         [ 0.35340645,  0.20519401,  0.17178326,  0.89310368,  0.07652205],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970496
    },
    {
      "id": "5b8d0c5daff09e000008e91d",
      "text": "         [-0.37436676,  0.77490418,  0.04681577, -0.08178549,  0.50049221],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970496
    },
    {
      "id": "5b8d0c5daff09e000008e91e",
      "text": "         [ 0.50602025, -0.08403411,  0.68316922, -0.34559589,  0.38823327],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970496
    },
    {
      "id": "5b8d0c5daff09e000008e91f",
      "text": "         [ 0.13514392, -0.37505412, -0.53248104,  0.07142937,  0.74325791]])",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970496
    },
    {
      "id": "5b8d0c5daff09e000008e920",
      "text": "\t",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970498
    },
    {
      "id": "5b8d0d35aff09e000008e938",
      "text": " # 共分散行列の固有値分解の結果と、PCAの主成分軸を比較すると、差がほぼゼロ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970614,
      "updated": 1535970651
    },
    {
      "id": "5b8d0c5daff09e000008e921",
      "text": " >>> np.linalg.eig(cov)[1] - m.components_.T",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970507
    },
    {
      "id": "5b8d0c5daff09e000008e922",
      "text": " array([[-4.44089210e-16,  1.11022302e-16,  4.99600361e-16,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970510
    },
    {
      "id": "5b8d0c5daff09e000008e923",
      "text": "          1.11022302e-16,  1.66533454e-16],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970517
    },
    {
      "id": "5b8d0c5daff09e000008e924",
      "text": "        [-2.22044605e-16, -6.66133815e-16,  4.44089210e-16,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970517
    },
    {
      "id": "5b8d0c5daff09e000008e925",
      "text": "         -3.88578059e-16, -1.11022302e-16],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970517
    },
    {
      "id": "5b8d0c5daff09e000008e926",
      "text": "        [ 1.11022302e-16, -3.05311332e-16, -2.56739074e-16,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970517
    },
    {
      "id": "5b8d0c5daff09e000008e927",
      "text": "         -3.33066907e-16,  3.33066907e-16],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970517
    },
    {
      "id": "5b8d0c5daff09e000008e928",
      "text": "        [-2.22044605e-16,  0.00000000e+00,  2.08166817e-15,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970517
    },
    {
      "id": "5b8d0c5daff09e000008e929",
      "text": "          3.33066907e-16, -3.60822483e-16],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970517
    },
    {
      "id": "5b8d0c5daff09e000008e92a",
      "text": "        [ 2.22044605e-16, -1.02695630e-15, -1.11022302e-16,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970517
    },
    {
      "id": "5b8d0c5daff09e000008e92b",
      "text": "          6.66133815e-16,  0.00000000e+00]])",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970397,
      "updated": 1535970517
    },
    {
      "id": "5b8d0d5faff09e000008e939",
      "text": "\t",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970655,
      "updated": 1535971381
    },
    {
      "id": "5b8d103daff09e000008e94b",
      "text": " # 特異値分類(SVD)との関係(軸の一部の符号が反転していることを除けば同じもの)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971389,
      "updated": 1540440099
    },
    {
      "id": "5b8d1035aff09e000008e93c",
      "text": " >>> -np.linalg.svd(d2)[2]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971381,
      "updated": 1535971388
    },
    {
      "id": "5b8d1036aff09e000008e93d",
      "text": " array([[ 0.67869952,  0.45792096, -0.46695028, -0.26671759, -0.20123254],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971401
    },
    {
      "id": "5b8d1036aff09e000008e93f",
      "text": "        [ 0.35340645,  0.20519401,  0.17178326,  0.89310368,  0.07652205],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971383
    },
    {
      "id": "5b8d1036aff09e000008e940",
      "text": "        [-0.37436676,  0.77490418,  0.04681577, -0.08178549,  0.50049221],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971383
    },
    {
      "id": "5b8d1036aff09e000008e941",
      "text": "        [-0.50602025,  0.08403411, -0.68316922,  0.34559589, -0.38823327],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971383
    },
    {
      "id": "5b8d1036aff09e000008e942",
      "text": "        [-0.13514392,  0.37505412,  0.53248104, -0.07142937, -0.74325791]])",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971383
    },
    {
      "id": "5b8d1036aff09e000008e943",
      "text": " ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971383
    },
    {
      "id": "5b8d1036aff09e000008e944",
      "text": " >>> m.components_",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971405
    },
    {
      "id": "5b8d1036aff09e000008e945",
      "text": " array([[ 0.67869952,  0.45792096, -0.46695028, -0.26671759, -0.20123254],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971406
    },
    {
      "id": "5b8d1036aff09e000008e947",
      "text": "        [ 0.35340645,  0.20519401,  0.17178326,  0.89310368,  0.07652205],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971383
    },
    {
      "id": "5b8d1036aff09e000008e948",
      "text": "        [-0.37436676,  0.77490418,  0.04681577, -0.08178549,  0.50049221],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971383
    },
    {
      "id": "5b8d1036aff09e000008e949",
      "text": "        [ 0.50602025, -0.08403411,  0.68316922, -0.34559589,  0.38823327],",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971383
    },
    {
      "id": "5b8d1036aff09e000008e94a",
      "text": "        [ 0.13514392, -0.37505412, -0.53248104,  0.07142937,  0.74325791]])",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971383,
      "updated": 1535971383
    },
    {
      "id": "5b8d109baff09e000008e94c",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535971483,
      "updated": 1535971483
    },
    {
      "id": "5b8d0c4baff09e000008e908",
      "text": "#主成分分析 #特異値分解 #共分散行列 #PCA",
      "userId": "582e63d27c56960011aff09e",
      "created": 1535970379,
      "updated": 1535971515
    },
    {
      "id": "5bd14039aff09e0000432a78",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1540440121,
      "updated": 1540440121
    },
    {
      "id": "5bd14039aff09e0000432a79",
      "text": " [共分散行列]を作る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1540440121,
      "updated": 1540440132
    },
    {
      "id": "5bd1403aaff09e0000432a7b",
      "text": "\t 共分散行列はデータの次元の正方行列",
      "userId": "582e63d27c56960011aff09e",
      "created": 1540440123,
      "updated": 1540440134
    },
    {
      "id": "5bd1403aaff09e0000432a7e",
      "text": "\t共分散行列を[固有値分解]する",
      "userId": "582e63d27c56960011aff09e",
      "created": 1540440123,
      "updated": 1540440143
    },
    {
      "id": "5bd1403aaff09e0000432a82",
      "text": "\t [PCA]の[主成分軸]を表示 ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1540440123,
      "updated": 1540440174
    },
    {
      "id": "5bd1403aaff09e0000432a90",
      "text": "\t共分散行列の固有値分解の結果と、PCAの主成分軸を比較すると、差がほぼゼロ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1540440123,
      "updated": 1540440164
    },
    {
      "id": "5bd1403aaff09e0000432a98",
      "text": " [特異値分類]([SVD])との関係(軸の一部の符号が反転していることを除けば同じもの)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1540440123,
      "updated": 1540440188
    }
  ]
}