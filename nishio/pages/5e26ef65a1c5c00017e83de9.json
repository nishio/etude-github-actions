{
  "id": "5e26ef65a1c5c00017e83de9",
  "title": "2020-01-21",
  "created": 1579609958,
  "updated": 1579612505,
  "lines": [
    {
      "id": "5e26ef65a1c5c00017e83de9",
      "text": "2020-01-21",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579609958,
      "updated": 1579610087
    },
    {
      "id": "5e26f02aaff09e00004d895c",
      "text": "[pKakidashi]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610154,
      "updated": 1579610163
    },
    {
      "id": "5e26efebaff09e00004d895b",
      "text": "Wifiオフで8を投稿",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610092,
      "updated": 1579610116
    },
    {
      "id": "5e26ef66aff09e00004d8956",
      "text": "[https://gyazo.com/f5cfee5cbf5ba5f1df286690462e009d]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579609958,
      "updated": 1579609961
    },
    {
      "id": "5e26ef68aff09e00004d8957",
      "text": "Wifiオン",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579609961,
      "updated": 1579610143
    },
    {
      "id": "5e26ef6faff09e00004d8958",
      "text": "[https://gyazo.com/b3b1633e4edab4d48542c9746ccab3df]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579609967,
      "updated": 1579609968
    },
    {
      "id": "5e26ef70aff09e00004d8959",
      "text": "\t自動でクラウド保存されてる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579609968,
      "updated": 1579610218
    },
    {
      "id": "5e26f06aaff09e00004d895e",
      "text": "\tそのタイミングで(local save ok)のフラグが消えてる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610218,
      "updated": 1579610294
    },
    {
      "id": "5e26f17aaff09e00004d8961",
      "text": "\tcode:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610490,
      "updated": 1579610497
    },
    {
      "id": "5e26f180aff09e00004d8962",
      "text": "  setGlobal({ items: [...global.items, item] });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610497,
      "updated": 1579610503
    },
    {
      "id": "5e26f181aff09e00004d8963",
      "text": "  local_db.items.add(item).then(() => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610497,
      "updated": 1579610503
    },
    {
      "id": "5e26f181aff09e00004d8964",
      "text": "    const new_item = { ...item, saved_local: true }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610497,
      "updated": 1579610503
    },
    {
      "id": "5e26f181aff09e00004d8965",
      "text": "    setGlobal({ items: [...global.items, new_item] });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610497,
      "updated": 1579610503
    },
    {
      "id": "5e26f181aff09e00004d8966",
      "text": "  })",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610497,
      "updated": 1579610503
    },
    {
      "id": "5e26f181aff09e00004d8967",
      "text": "  addItemToFirestore(item).then(() => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610497,
      "updated": 1579610503
    },
    {
      "id": "5e26f181aff09e00004d8968",
      "text": "    const new_item = { ...item, saved_cloud: true }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610497,
      "updated": 1579610503
    },
    {
      "id": "5e26f181aff09e00004d8969",
      "text": "    setGlobal({ items: [...global.items, new_item] });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610497,
      "updated": 1579610503
    },
    {
      "id": "5e26f181aff09e00004d896a",
      "text": "  })",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610497,
      "updated": 1579610503
    },
    {
      "id": "5e26f19baff09e00004d896c",
      "text": "\tcode:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610524,
      "updated": 1579610719
    },
    {
      "id": "5e26f25faff09e00004d896d",
      "text": "    const updateItem = (index: number, diff: { [key: string]: any }) => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610719,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d897d",
      "text": "      const global = getGlobal();",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d897e",
      "text": "      const new_item = { ...global.items[index], ...diff }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d897f",
      "text": "      const new_items = [...global.items]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d8980",
      "text": "      new_items[index] = new_item;",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d8981",
      "text": "      setGlobal({ items: new_items });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d8982",
      "text": "    }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d8983",
      "text": "  ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d8984",
      "text": "    const index = global.items.length;",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d8985",
      "text": "    setGlobal({ items: [...global.items, item] });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d8986",
      "text": "    local_db.items.add(item).then(() => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d8987",
      "text": "      updateItem(index, { saved_local: true })",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d8988",
      "text": "    })",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d8989",
      "text": "    addItemToFirestore(item).then(() => {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d898a",
      "text": "      updateItem(index, { saved_cloud: true })",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d898b",
      "text": "      local_db.items.update(item.created, { saved_cloud: true })",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f4f9aff09e00004d898c",
      "text": "    })",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611386,
      "updated": 1579611396
    },
    {
      "id": "5e26f183aff09e00004d896b",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610499,
      "updated": 1579611908
    },
    {
      "id": "5e26f0b6aff09e00004d8960",
      "text": "\tクラウド保存されないままリロードされたものはリトライされない",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610294,
      "updated": 1579610377
    },
    {
      "id": "5e26f044aff09e00004d895d",
      "text": "\t\tリロード時にローカルから復元されたものは即座にリトライ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579610180,
      "updated": 1579612493
    },
    {
      "id": "5e26f954aff09e00004d898f",
      "text": "\t\tした",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579612501,
      "updated": 1579612505
    },
    {
      "id": "5e26f741aff09e00004d898e",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1579611969,
      "updated": 1579611969
    }
  ]
}