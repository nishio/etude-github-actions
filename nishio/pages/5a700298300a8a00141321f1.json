{
  "id": "5a700298300a8a00141321f1",
  "title": "速習スクレイピング",
  "created": 1517290143,
  "updated": 1522462871,
  "lines": [
    {
      "id": "5a700298300a8a00141321f1",
      "text": "速習スクレイピング",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517290143,
      "updated": 1517290145
    },
    {
      "id": "5a70a915aff09e0000a15524",
      "text": " 「Web上で公開されているデータを集めたい」というニーズ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517332758,
      "updated": 1517332814
    },
    {
      "id": "5a70a900aff09e0000a15523",
      "text": " 試行錯誤してものづくりをできるスキルのある人を想定",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517332737,
      "updated": 1517332817
    },
    {
      "id": "5a70a950aff09e0000a15526",
      "text": " 知識のポインタを示す",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517332817,
      "updated": 1517332822
    },
    {
      "id": "5a70a955aff09e0000a15528",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517332822,
      "updated": 1517332822
    },
    {
      "id": "5a70a955aff09e0000a15527",
      "text": "\t「集めるフェーズ」と「集めたものから必要なデータだけ抜き出すフェーズ」を分けて考える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517332822,
      "updated": 1517333106
    },
    {
      "id": "5a70aafcaff09e0000a15530",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333244,
      "updated": 1517333244
    },
    {
      "id": "5a70aafcaff09e0000a15531",
      "text": "[# 集めるフェーズ]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333244,
      "updated": 1517333251
    },
    {
      "id": "5a70aaf1aff09e0000a1552e",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333233,
      "updated": 1517333233
    },
    {
      "id": "5a70ab05aff09e0000a15532",
      "text": " データがHTMLに載っているのか、HTMLをロードした後JavaScriptが別途データをダウンロードして表示しているのか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333253,
      "updated": 1517333283
    },
    {
      "id": "5a70ab23aff09e0000a15534",
      "text": " 後者は上級編",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333283,
      "updated": 1517333329
    },
    {
      "id": "5a70ab52aff09e0000a15535",
      "text": " 見分け方は必要があれば書く",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333330,
      "updated": 1517333392
    },
    {
      "id": "5a70abc2aff09e0000a1553a",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333442,
      "updated": 1517333442
    },
    {
      "id": "5a70abc2aff09e0000a1553b",
      "text": "\tデータがHTMLに載っている場合",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333442,
      "updated": 1517333449
    },
    {
      "id": "5a70ab05aff09e0000a15533",
      "text": "  要はHTMLファイルをダウンロードすればよい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333253,
      "updated": 1517333417
    },
    {
      "id": "5a70abb1aff09e0000a15538",
      "text": "\t\t目的のHTMLはGETで得られるのかPOSTが必要なのかを区別する",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333426,
      "updated": 1517333466
    },
    {
      "id": "5a70abdaaff09e0000a1553c",
      "text": "  前者が初級編で、後者が中級編",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333466,
      "updated": 1517333473
    },
    {
      "id": "5a70abedaff09e0000a1553d",
      "text": "  ブラウザのURLをコピペして別のブラウザに張り付けた時に同じものが表示されるならGET",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333485,
      "updated": 1517333513
    },
    {
      "id": "5a70ac0aaff09e0000a1553e",
      "text": "  \tあー、ログインが必要なページって言う別の中級編もあるな",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333515,
      "updated": 1517333527
    },
    {
      "id": "5a70ac41aff09e0000a15541",
      "text": "  GETなら",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333570,
      "updated": 1517333572
    },
    {
      "id": "5a70ac17aff09e0000a1553f",
      "text": "   `wget`を使うことを検討",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333527,
      "updated": 1517333586
    },
    {
      "id": "5a70ac36aff09e0000a15540",
      "text": "   `wget -r -l N URL` で指定したURLからN回のリンクをたどって到達できるページを根こそぎダウンロードする",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333558,
      "updated": 1517333623
    },
    {
      "id": "5a70aaf1aff09e0000a1552f",
      "text": "\t\t\tたとえば[これ https://1000ya.isis.ne.jp/0487.html]を見て、このコンテンツを手元に保存したいと思ったら",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333233,
      "updated": 1517333688
    },
    {
      "id": "5a70acbaaff09e0000a15544",
      "text": "    えたいコンテンツの一覧ページがあるか探す",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333691,
      "updated": 1517333763
    },
    {
      "id": "5a70ad02aff09e0000a15545",
      "text": "    \tあった [一覧 http://1000ya.isis.ne.jp/souran/index.php?vol=102]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333763,
      "updated": 1517333772
    },
    {
      "id": "5a70ad0faff09e0000a15546",
      "text": "    リンク1回でコンテンツにたどりつけそうだから `wget -r -l 1 http://1000ya.isis.ne.jp/souran/index.php?vol=102`でよさそう",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333776,
      "updated": 1517333810
    },
    {
      "id": "5a70aa71aff09e0000a1552a",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333106,
      "updated": 1517333106
    },
    {
      "id": "5a70aa71aff09e0000a15529",
      "text": "[# 抜き出すフェーズ]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333106,
      "updated": 1517333241
    },
    {
      "id": "5a70adb3aff09e0000a15547",
      "text": "\t\t正規表現で切り出す",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333940,
      "updated": 1517333946
    },
    {
      "id": "5a70aeb3aff09e0000a15549",
      "text": "   「同じフォーマットで書かれたHTMLをかき集めて来た」はずなので枯れたツールである正規表現で切るのは手",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517334196,
      "updated": 1517334251
    },
    {
      "id": "5a70aa7daff09e0000a1552b",
      "text": " \tPython3でBeautifulSoup4を使う",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333118,
      "updated": 1517333208
    },
    {
      "id": "5a70aad7aff09e0000a1552c",
      "text": "   [マニュアル https://www.crummy.com/software/BeautifulSoup/bs4/doc/]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333208,
      "updated": 1517333214
    },
    {
      "id": "5a70aeeeaff09e0000a1554a",
      "text": "   HTMLの構造として、たとえば「id=contentなdivの中に本文が入っている」みたいなきれいなHTMLだったらこれでサクッといく",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517334254,
      "updated": 1517334305
    },
    {
      "id": "5a70af21aff09e0000a1554b",
      "text": "   逆に「div?何それ？brで改行するよ！」みたいなページだとあんまりメリットがないｗ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517334305,
      "updated": 1517334341
    },
    {
      "id": "5a70af56aff09e0000a1554c",
      "text": "   HTMLタグ交じりのものをプレーンテキストにする機能はニーズありそう",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517334358,
      "updated": 1517334386
    },
    {
      "id": "5a70b087aff09e0000a1554d",
      "text": "    code:python",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517334663,
      "updated": 1517334735
    },
    {
      "id": "5a70b09caff09e0000a1554f",
      "text": "     import requests",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517334684,
      "updated": 1517334705
    },
    {
      "id": "5a70b0b1aff09e0000a15550",
      "text": "     from bs4 import BeautifulSoup",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517334705,
      "updated": 1517334705
    },
    {
      "id": "5a70b0b1aff09e0000a15551",
      "text": "     r = requests.get(\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\")",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517334705,
      "updated": 1517334705
    },
    {
      "id": "5a70b0b1aff09e0000a15552",
      "text": "     print(r.content)  # 取得したHTMLが表示される",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517334705,
      "updated": 1517334719
    },
    {
      "id": "5a70b1e1aff09e0000a15556",
      "text": "     s = BeautifulSoup(r.content, \"lxml\")",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517335010,
      "updated": 1517335028
    },
    {
      "id": "5a70b0bfaff09e0000a15553",
      "text": "     q = s.find(id=\"quick-start\")  # idが\"quick-start\"なものを取り出す",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517334719,
      "updated": 1517335179
    },
    {
      "id": "5a70b1ddaff09e0000a15554",
      "text": "     print(q.find(\"p\"))  # <p>Here’s an HTML document ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517335005,
      "updated": 1517335208
    },
    {
      "id": "5a70b2e5aff09e0000a1555b",
      "text": "     # quickstartの最初のpタグを取りだしている",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517335269,
      "updated": 1517335285
    },
    {
      "id": "5a70b2f9aff09e0000a1555d",
      "text": "     ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517335289,
      "updated": 1517335289
    },
    {
      "id": "5a70b2a8aff09e0000a15559",
      "text": "     print(q.find(\"p\").getText())  # Here’s an HTML document ...",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517335208,
      "updated": 1517335306
    },
    {
      "id": "5a70b30daff09e0000a1555e",
      "text": "     # HTMLタグを取り除いたプレーンテキストになっている",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517335309,
      "updated": 1517335321
    },
    {
      "id": "5a70b2a0aff09e0000a15558",
      "text": "\t\t\tこの説明では[requests http://docs.python-requests.org/en/master/]を直接使ってプログラム中で直接インターネットに取りに行ってるけど、ローカルファイルに保存してから解析する方が実行時間も短いし相手のサーバにも優しい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517335201,
      "updated": 1517335456
    },
    {
      "id": "5a70adbbaff09e0000a15548",
      "text": "\t\t[本文抽出ライブラリ https://github.com/petitviolet/python-extractcontent]を使う",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333947,
      "updated": 1517334192
    },
    {
      "id": "5a70a950aff09e0000a15525",
      "text": "\t\tその他",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517332817,
      "updated": 1517333228
    },
    {
      "id": "5a72977eaff09e0000e705f2",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459327,
      "updated": 1517459327
    },
    {
      "id": "5a72977eaff09e0000e705f3",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459327,
      "updated": 1517459327
    },
    {
      "id": "5a72977eaff09e0000e705f4",
      "text": "[# その他]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459327,
      "updated": 1517459331
    },
    {
      "id": "5a729785aff09e0000e705f5",
      "text": "\t情報収集という意味で「スクレイピング」とは一般的には言わないんだけど色々なニーズがあるのでメモしておく。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459333,
      "updated": 1517459500
    },
    {
      "id": "5a72982baff09e0000e705fb",
      "text": "  「スクレイピングという単語の定義は～」とか議論しても無益だからね。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459500,
      "updated": 1517459523
    },
    {
      "id": "5a729842aff09e0000e705fc",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459523,
      "updated": 1517459524
    },
    {
      "id": "5a729797aff09e0000e705f7",
      "text": "\tブラウザ上で画像は表示されているがCSSで背景画像として読まれてて右クリックからの保存ができない、なんとかならないか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459351,
      "updated": 1517459474
    },
    {
      "id": "5a729812aff09e0000e705f9",
      "text": "  ブラウザキャッシュから取ればよい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459474,
      "updated": 1517459480
    },
    {
      "id": "5a729817aff09e0000e705fa",
      "text": "  [Google Chromeのキャッシュから一度見た画像・動画・htmlファイルを取得する - Lowaivill Tech Blog http://blog.lowaivill.com/web/google-chrome-cache/]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459480,
      "updated": 1517459480
    },
    {
      "id": "5a729796aff09e0000e705f6",
      "text": "\t画面全体のスクリーンショットを取る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459350,
      "updated": 1517459375
    },
    {
      "id": "5a7297aeaff09e0000e705f8",
      "text": "  [スクリーンショットを撮るのはChromeがいちばん?! ｜ Developers.IO https://dev.classmethod.jp/tool/chrome-de-screen-shot/]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517459375,
      "updated": 1517459375
    },
    {
      "id": "5abef026aff09e0000bcd397",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1522462759,
      "updated": 1522462759
    },
    {
      "id": "5a70aaecaff09e0000a1552d",
      "text": "\t動的なページのスクレイピングに関しては、基本的にはブラウザ自動化を使うことになる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517333228,
      "updated": 1522462779
    },
    {
      "id": "5abef050aff09e0000bcd399",
      "text": " Seleniumと、たとえばChromeのHeadlessモード(画面を表示しない)を使う方法とがある",
      "userId": "582e63d27c56960011aff09e",
      "created": 1522462801,
      "updated": 1522462823
    },
    {
      "id": "5abef066aff09e0000bcd39a",
      "text": " 前者は多くのブラウザに対応していて、後者はChromeなど特定のブラウザだけ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1522462823,
      "updated": 1522462840
    },
    {
      "id": "5abef078aff09e0000bcd39b",
      "text": " ソフトウェアテストの文脈では一つのコードで多くのブラウザをサポートしたいから前者を選ぶことになるが、スクレイピングの文脈ではその必要はない",
      "userId": "582e63d27c56960011aff09e",
      "created": 1522462840,
      "updated": 1522462871
    },
    {
      "id": "5abef03baff09e0000bcd398",
      "text": " https://qiita.com/tomi_shinwatec/items/a68cf7840c3da002c6e0",
      "userId": "582e63d27c56960011aff09e",
      "created": 1522462779,
      "updated": 1522462781
    },
    {
      "id": "5a7002a1aff09e000042c73e",
      "text": "#TODO",
      "userId": "582e63d27c56960011aff09e",
      "created": 1517290145,
      "updated": 1517301594
    }
  ]
}