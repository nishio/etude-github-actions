{
  "id": "60462b77698d6a001ca5d3ab",
  "title": "Google Analyticsで何でもカウント",
  "created": 1615211385,
  "updated": 1618371382,
  "lines": [
    {
      "id": "6075e10baff09e0000ace004",
      "text": "Google Analyticsで何でもカウント",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338059,
      "updated": 1618338082
    },
    {
      "id": "6075e123aff09e0000ace005",
      "text": "ある特定の操作をした人が何人いるのか知りたい。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338083,
      "updated": 1618338284
    },
    {
      "id": "6075e1ecaff09e0000ace009",
      "text": "その操作が行われた時に自分の書いたJavaScriptプログラムから直接Google Analyticsを呼び出してイベントを記録することができる。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338284,
      "updated": 1618338284
    },
    {
      "id": "6075e1b1aff09e0000ace006",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338226,
      "updated": 1618338226
    },
    {
      "id": "6075e1b1aff09e0000ace007",
      "text": "この機能はいろいろ凝った使い方ができるが、シンプルに回数をカウントするならこれだけでいい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338226,
      "updated": 1618338671
    },
    {
      "id": "6075e366aff09e0000ace00a",
      "text": " code:ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338662,
      "updated": 1618338765
    },
    {
      "id": "6075e376aff09e0000a64e6d",
      "text": " \twindow.gtag(\"event\", \"harvest\");",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338679,
      "updated": 1618338765
    },
    {
      "id": "6075f0d4aff09e0000a64e84",
      "text": " harvestの部分は自分がつけたわかりやすいイベントの名前",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618342101,
      "updated": 1618342101
    },
    {
      "id": "6075e377aff09e0000a64e6e",
      "text": " JavaScriptの人は`window.`がなくても動くと思う",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338679,
      "updated": 1618338990
    },
    {
      "id": "6075e3f0aff09e0000ace00b",
      "text": " これがGoogle AnalyticsのEngagementのページにこう表示される",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338801,
      "updated": 1618338847
    },
    {
      "id": "6075e37daff09e0000a64e6f",
      "text": "\t\t[https://gyazo.com/0f3b5eaacb1d22186e322fc505ecf513]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338685,
      "updated": 1618338858
    },
    {
      "id": "6075e42aaff09e0000a64e70",
      "text": "　そこからたどっていくと、いつどれくらい使われたかがわかる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338858,
      "updated": 1618338931
    },
    {
      "id": "6075e46faff09e0000ace00c",
      "text": "　　[https://gyazo.com/9e7c70fbee8a2144a28e47d6d1174a1d]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338928,
      "updated": 1618338942
    },
    {
      "id": "6075e47daff09e0000a64e71",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618338942,
      "updated": 1618338942
    },
    {
      "id": "6075e4c4aff09e0000ace00e",
      "text": "---",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339013,
      "updated": 1618339023
    },
    {
      "id": "6075e4cfaff09e0000ace010",
      "text": "詳しい話",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339023,
      "updated": 1618339027
    },
    {
      "id": "6075e4faaff09e0000a64e7c",
      "text": "\tこのgtagって関数は最初にGoogle Analyticsの設定をした時にHTMLに貼り付けるように指示されたコードの中で定義されている",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339066,
      "updated": 1618339482
    },
    {
      "id": "6075e6c9aff09e0000ace011",
      "text": "\tdataLayerってリストに追加しているだけ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339529,
      "updated": 1618339595
    },
    {
      "id": "6075e70baff09e0000ace012",
      "text": "\tたぶんこのリストの中身を定期的にチェックしてサーバに送る仕組みになってるのだろう",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339596,
      "updated": 1618339659
    },
    {
      "id": "6075e4c7aff09e0000ace00f",
      "text": " code:html",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339015,
      "updated": 1618339065
    },
    {
      "id": "6075e4e1aff09e0000a64e72",
      "text": "   <script async src=\"https://www.googletagmanager.com/gtag/js?id=G-GBX75RXXXX\"></script>",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339041,
      "updated": 1618339431
    },
    {
      "id": "6075e4e2aff09e0000a64e73",
      "text": "   <script>",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339043,
      "updated": 1618339065
    },
    {
      "id": "6075e4e2aff09e0000a64e74",
      "text": "     window.dataLayer = window.dataLayer || [];",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339043,
      "updated": 1618339065
    },
    {
      "id": "6075e4e2aff09e0000a64e75",
      "text": "     function gtag() { dataLayer.push(arguments); }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339043,
      "updated": 1618339065
    },
    {
      "id": "6075e4e2aff09e0000a64e76",
      "text": "     gtag('js', new Date());",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339043,
      "updated": 1618339065
    },
    {
      "id": "6075e4e2aff09e0000a64e77",
      "text": " \t",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339043,
      "updated": 1618339065
    },
    {
      "id": "6075e4e2aff09e0000a64e78",
      "text": "     gtag('config', 'G-GBX75RXXXX');",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339043,
      "updated": 1618339436
    },
    {
      "id": "6075e4e2aff09e0000a64e79",
      "text": "   </script>    ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339043,
      "updated": 1618339065
    },
    {
      "id": "6075e4e5aff09e0000a64e7b",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339046,
      "updated": 1618339046
    },
    {
      "id": "6075e4e2aff09e0000a64e7a",
      "text": "マニュアルの記述",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339043,
      "updated": 1618339694
    },
    {
      "id": "6075e771aff09e0000ace013",
      "text": "　3つ目の引数で色々追加の情報を送れるようだ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339698,
      "updated": 1618339735
    },
    {
      "id": "6075e79faff09e0000ace014",
      "text": "　何かを適切に設定しないといけないのかと思って混乱したが、回数をカウントするだけなら省略して良い",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339743,
      "updated": 1618342153
    },
    {
      "id": "6075e7d1aff09e0000a64e81",
      "text": " [Google アナリティクスのイベントを測定する  |  ウェブ向けユニバーサル アナリティクス（gtag.js） https://developers.google.com/analytics/devguides/collection/gtagjs/events]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339794,
      "updated": 1618339794
    },
    {
      "id": "60462b7caff09e000078ac59",
      "text": "  code:js",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615211388,
      "updated": 1618339800
    },
    {
      "id": "60462b91aff09e000078ac5b",
      "text": "   gtag('event', <action>, {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615211410,
      "updated": 1618339800
    },
    {
      "id": "60462b91aff09e000078ac5c",
      "text": "     'event_category': <category>,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615211410,
      "updated": 1618339800
    },
    {
      "id": "60462b91aff09e000078ac5d",
      "text": "     'event_label': <label>,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615211410,
      "updated": 1618339800
    },
    {
      "id": "60462b91aff09e000078ac5e",
      "text": "     'value': <value>",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615211410,
      "updated": 1618339800
    },
    {
      "id": "60462b91aff09e000078ac5f",
      "text": "   });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615211410,
      "updated": 1618339800
    },
    {
      "id": "60462b8faff09e000078ac5a",
      "text": "\t[gtag.js API リファレンス  |  グローバル サイトタグ（gtag.js）  |  Google Developers https://developers.google.com/gtagjs/reference/api#event]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615211408,
      "updated": 1618339807
    },
    {
      "id": "60463309aff09e000078ac66",
      "text": "  code:js",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615213322,
      "updated": 1618339809
    },
    {
      "id": "6046330baff09e000078ac67",
      "text": "   gtag('event', 'screen_view', {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615213324,
      "updated": 1618339809
    },
    {
      "id": "6046330caff09e000078ac68",
      "text": "     'app_name': 'myAppName',",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615213324,
      "updated": 1618339809
    },
    {
      "id": "6046330caff09e000078ac69",
      "text": "     'screen_name': 'Home'",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615213324,
      "updated": 1618339809
    },
    {
      "id": "6046330caff09e000078ac6a",
      "text": "   });",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615213324,
      "updated": 1618339809
    },
    {
      "id": "604632faaff09e000078ac63",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615213307,
      "updated": 1618339805
    },
    {
      "id": "6075e57eaff09e0000a64e7d",
      "text": "プロパティ追加について",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339199,
      "updated": 1618342187
    },
    {
      "id": "6075e833aff09e0000ace015",
      "text": "　プロパティって「属性」かと思って混乱したが、Google Analytics用語としてはアカウントの直下に複数個持つことができる情報をまとめる単位のようだ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339892,
      "updated": 1618340054
    },
    {
      "id": "6075e8d9aff09e0000ace016",
      "text": "　　新しいウェブサービスを作ったらプロパティも追加する、というイメージか",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618340058,
      "updated": 1618340083
    },
    {
      "id": "6075e57eaff09e0000a64e7e",
      "text": "  [https://gyazo.com/a1f2e39c513892511b0f8341f133a9dd]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339199,
      "updated": 1618342194
    },
    {
      "id": "6075e580aff09e0000a64e7f",
      "text": "  [https://gyazo.com/932bd389d5d9f04268c7636ebb07a06e]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339201,
      "updated": 1618342196
    },
    {
      "id": "6075e61aaff09e0000a64e80",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618339354,
      "updated": 1618339354
    },
    {
      "id": "607662fbaff09e0000e1e3f6",
      "text": "TypeScriptではgtagの型が不明だとエラーになるので下記のように宣言する",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371323,
      "updated": 1618371377
    },
    {
      "id": "607662f3aff09e0000e1e3ea",
      "text": "code:index.ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371315,
      "updated": 1618371382
    },
    {
      "id": "607662f7aff09e0000e1e3ec",
      "text": " declare global {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371319,
      "updated": 1618371319
    },
    {
      "id": "607662f7aff09e0000e1e3ed",
      "text": "   interface Window {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371319,
      "updated": 1618371319
    },
    {
      "id": "607662f7aff09e0000e1e3ee",
      "text": "     gtag: (",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371319,
      "updated": 1618371319
    },
    {
      "id": "607662f7aff09e0000e1e3ef",
      "text": "       a: string,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371319,
      "updated": 1618371319
    },
    {
      "id": "607662f7aff09e0000e1e3f0",
      "text": "       b: string,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371319,
      "updated": 1618371319
    },
    {
      "id": "607662f7aff09e0000e1e3f1",
      "text": "       c?: { event_category?: string; event_label?: string; value?: number }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371319,
      "updated": 1618371319
    },
    {
      "id": "607662f7aff09e0000e1e3f2",
      "text": "     ) => unknown;",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371319,
      "updated": 1618371319
    },
    {
      "id": "607662f7aff09e0000e1e3f3",
      "text": "   }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371319,
      "updated": 1618371319
    },
    {
      "id": "607662f7aff09e0000e1e3f4",
      "text": " }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371319,
      "updated": 1618371319
    },
    {
      "id": "607662f7aff09e0000e1e3f5",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371319,
      "updated": 1618371320
    },
    {
      "id": "607662f3aff09e0000e1e3eb",
      "text": "---",
      "userId": "582e63d27c56960011aff09e",
      "created": 1618371315,
      "updated": 1618371316
    },
    {
      "id": "604632fbaff09e000078ac65",
      "text": "イベントの設定をしないといけないのかと混乱したが、しなくていいようだ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615213307,
      "updated": 1618339849
    },
    {
      "id": "60462beeaff09e000078ac61",
      "text": "[https://gyazo.com/5cec00ab37f339eebab2e2eb5ca25a8a]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615211502,
      "updated": 1615211504
    },
    {
      "id": "60462bf0aff09e000078ac62",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1615211504,
      "updated": 1615211504
    }
  ]
}