{
  "id": "642a7a6599dce1001b4570cd",
  "title": "トークン数カウント思ったより厄介",
  "created": 1680505503,
  "updated": 1680505696,
  "lines": [
    {
      "id": "642a7a6599dce1001b4570cd",
      "text": "トークン数カウント思ったより厄介",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505528
    },
    {
      "id": "642a7a9eaff09e000069a6cc",
      "text": ">[nishio https://twitter.com/nishio/status/1641356506296909824] ChatGPT APIのstream=trueをすると、falseの時にはもらえてた消費トークン数などの情報が得られなくなるって理解であってますか？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6cd",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6ce",
      "text": ">[teramotodaiki https://twitter.com/teramotodaiki/status/1641417233162465280] たぶんそうです",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6cf",
      "text": "> これ困りますよね…OpenAI側からすれば「自分で数えろ」ということなのかも知れませんが",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6d0",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6d1",
      "text": ">[nishio https://twitter.com/nishio/status/1641431712331870214] 泣きながら数えた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6d2",
      "text": "> [https://pbs.twimg.com/card_img/1641431666811113474/Fo9SzE4D?format=jpg&name=medium#.png]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6d3",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6d4",
      "text": ">[nishio https://twitter.com/nishio/status/1641437886221516808] ストリームの最後につけてくれたらいいのにな…",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6d5",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6d6",
      "text": ">[nishio https://twitter.com/nishio/status/1641439360821366785] ああっ、これVercelにデプロイしたらコケるじゃん…",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6d7",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6d8",
      "text": ">[nishio https://twitter.com/nishio/status/1641441384950566916] APIとしてしか使ってないのだからサーバサイドで動いてくれそうなのに(よくわからない…",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6d9",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6da",
      "text": ">[nishio https://twitter.com/nishio/status/1641460004606853120] わかった。Astroの設定でVercelのEdge Functionを使うように指定されていたが、これは制限が厳しくてfsを使えないということみたいだ。じゃあServerless Functionに変えたらいいやん、とおもったら、なぜかstreamが通らなくなってしまった…",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6db",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6dc",
      "text": ">[nishio https://twitter.com/nishio/status/1641484059749797889] GPT4「Serverless FunctionはAWS Lambdaなのでstreamに対応してない」",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6dd",
      "text": "> そうなのか〜",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6de",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6df",
      "text": ">[techtalkjp https://twitter.com/techtalkjp/status/1641632088351993856] ちょうどおととい対応した的な記事が出てましたよ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6e0",
      "text": "> [https://pbs.twimg.com/card_img/1640817875966476291/eJ0x0a_Y?format=jpg&name=medium#.png]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6e1",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6e2",
      "text": ">[nishio https://twitter.com/nishio/status/1641636218327945216] ありがたい！おとといのことはGPT4は知らないので人間に教えてもらうのが大事ですね！",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6e3",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6e4",
      "text": ">[kenn https://twitter.com/kenn/status/1641643844583452673] これって、Edge経由ということは60秒ではなく30秒制限に引っかかるということはないんですかね？GPT-4の遅いレスポンスだと、30秒ぐらいダラダラ流れることも結構あると思うのですが。。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6e5",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6e6",
      "text": ">[jrsyo https://twitter.com/jrsyo/status/1641670036317417473] Edge Functionsに関して言うと、あくまでもinitial responseを30秒以内に返せば、その後のstreamレスポンスについて特にhard limitは設けておらず、ある程度長く流し続ける事は可能です。ただしServerless FunctionsはLambdaなので、同様の事をやっても、引き続きLambdaの最大実行時間が適用されます。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6e7",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6e8",
      "text": ">[jrsyo https://twitter.com/jrsyo/status/1641670584034816005] この辺りで一応触れています",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6e9",
      "text": "> https://vercel.com/docs/concepts/functions/edge-functions/limitations#maximum-initial-response-time…",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6ea",
      "text": "> ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6eb",
      "text": "> 利用例としてはこの辺りにも",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7a9eaff09e000069a6ec",
      "text": "> [https://pbs.twimg.com/card_img/1641067548702547969/qQBzHK8z?format=jpg&name=medium#.png]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505503
    },
    {
      "id": "642a7b5daff09e000069a6ef",
      "text": ">https://github.com/Nutlope/twitterbio/blob/main/utils/OpenAIStream.ts",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505694,
      "updated": 1680505696
    },
    {
      "id": "642a7a9eaff09e000069a6ed",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505503,
      "updated": 1680505670
    },
    {
      "id": "642a7b43aff09e000069a6ee",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1680505668,
      "updated": 1680505668
    }
  ]
}