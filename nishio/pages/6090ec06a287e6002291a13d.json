{
  "id": "6090ec06a287e6002291a13d",
  "title": "Hatena2011-02-03",
  "created": 1296658800,
  "updated": 1296658800,
  "lines": [
    {
      "id": "6090ec2aaff09e00003d805d",
      "text": "Hatena2011-02-03",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d805e",
      "text": "code:hatena",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d805f",
      "text": " <body>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8060",
      "text": " *1296690908*RT: 人捜しRTをしようとしている人に伝えてほしい140文字 | 日日俺酔狂",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8061",
      "text": " 人捜しRTをしようとしている人に伝えてほしい140文字 | 日日俺酔狂",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8062",
      "text": " http://suikyoh.net/entry-1481.html",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8063",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8064",
      "text": " >>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8065",
      "text": " 『拡散RTで人捜しをすると「発信者が誰だか分からなくなる」「情報の訂正ができない」「訂正しても解決しても最初の文章が広がり続ける」ので危険です。情報を集約できるBlogやwikiを用意して情報を載せ、拡散RTするのはURLだけにするのが効率的です』",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8066",
      "text": " <<",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8067",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8068",
      "text": " みんな何かを見聞きしたときに「一次情報源はどこだ？」って考える習慣をつけたほうがいいよね。",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8069",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d806a",
      "text": " *1296691104*Rediscover the Monte Carlo",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d806b",
      "text": " 僕個人はゲームの思考ルーチンを作ることなどには興味があるので、みんな知っていることだと思っていたのですが、意外と「現在世界最強の囲碁の思考ルーチンはモンテカルロ」ってのは知られてないみたいですね。うっかりすると「そんなわけないだろー」とか言われてしまう。その根底には「モンテカルロはとても収束が遅くて使いものにならない」という過去の記憶があるのかなー。ちょうどJavaScriptが使いものにならないおもちゃ言語だと思われていたように。",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d806c",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d806d",
      "text": " 囲碁の思考ルーチンを著しく進化させた新しいモンテカルロが昔の単純なモンテカルロとどう違うかというと、UCB1という評価関数で「もっと探索するとヨサゲな局面」を判断して、ヨサゲな局面から優先的に探索するという点なんだけど、そういう定性的な話をしてもピンと来ないよね。同じ発想をモンテカルロで円周率を求めるプログラムに適用したら収束の速さが定量的にはっきり見えて面白いんじゃないかなーと思って、空間を分割して調査する価値の高いところから優先的に調査するプログラムを作ってみました。",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d806e",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d806f",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8070",
      "text": " ** 結果",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8071",
      "text": " 理屈やソースを先に説明すると最後まで読まれないんじゃないかと危惧したのでまずは結果から(笑)",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8072",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8073",
      "text": " 単純なモンテカルロでは200万回の試行をしてもまだ3.14までしかわかっていないのに対し、改良版モンテカルロでは30万回で3.141まで到達して、20万回の試行の後には3.141593と、かなり近いところまで円周率を求められている。圧倒的じゃないか、我が軍は！",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8074",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8075",
      "text": " >||",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8076",
      "text": " 単純モンテカルロ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8077",
      "text": " 0: pi = 3.133040",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8078",
      "text": " 1: pi = 3.141780",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8079",
      "text": " 2: pi = 3.142373",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d807a",
      "text": " 3: pi = 3.141050",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d807b",
      "text": " 4: pi = 3.142184",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d807c",
      "text": " 5: pi = 3.142260",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d807d",
      "text": " 6: pi = 3.142771",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d807e",
      "text": " 7: pi = 3.143790",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d807f",
      "text": " 8: pi = 3.143636",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8080",
      "text": " 9: pi = 3.142952",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8081",
      "text": " 10: pi = 3.143011",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8082",
      "text": " 11: pi = 3.143880",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8083",
      "text": " 12: pi = 3.144342",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8084",
      "text": " 13: pi = 3.144023",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8085",
      "text": " 14: pi = 3.143701",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8086",
      "text": " 15: pi = 3.143102",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8087",
      "text": " 16: pi = 3.143104",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8088",
      "text": " 17: pi = 3.142973",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8089",
      "text": " 18: pi = 3.143078",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d808a",
      "text": " 19: pi = 3.143240",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d808b",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d808c",
      "text": " 改良モンテカルロ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d808d",
      "text": " 0: pi = 3.142376",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d808e",
      "text": " 1: pi = 3.142209",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d808f",
      "text": " 2: pi = 3.141998",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8090",
      "text": " 3: pi = 3.141850",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8091",
      "text": " 4: pi = 3.141732",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8092",
      "text": " 5: pi = 3.141667",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8093",
      "text": " 6: pi = 3.141708",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8094",
      "text": " 7: pi = 3.141727",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8095",
      "text": " 8: pi = 3.141715",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8096",
      "text": " 9: pi = 3.141703",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8097",
      "text": " 10: pi = 3.141722",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8098",
      "text": " 11: pi = 3.141702",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8099",
      "text": " 12: pi = 3.141652",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d809a",
      "text": " 13: pi = 3.141622",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d809b",
      "text": " 14: pi = 3.141634",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d809c",
      "text": " 15: pi = 3.141627",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d809d",
      "text": " 16: pi = 3.141620",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d809e",
      "text": " 17: pi = 3.141604",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d809f",
      "text": " 18: pi = 3.141598",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80a0",
      "text": " 19: pi = 3.141593",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80a1",
      "text": " ||<",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80a2",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80a3",
      "text": " 実行時間はさすがに4倍ほど遅くなった。しかし試行回数が4分の1になったとしてもまだ改良版モンテカルロの方が収束が速い。",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80a4",
      "text": " >||",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80a5",
      "text": " 単純モンテカルロ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80a6",
      "text": " real\t0m0.106s",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80a7",
      "text": " user\t0m0.038s",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80a8",
      "text": " sys\t0m0.003s",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80a9",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80aa",
      "text": " 改良版モンテカルロ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ab",
      "text": " real\t0m0.422s",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ac",
      "text": " user\t0m0.406s",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ad",
      "text": " sys\t0m0.005s",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ae",
      "text": " ||<",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80af",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80b0",
      "text": " ** 理屈",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80b1",
      "text": " 理屈の解説。要するにモンテカルロで探索する空間をWIDTH * WIDTHのメッシュに分割して、それぞれの升目をscoreが高い順に試行するってだけ。scoreは「その升目の中で1回試行をした場合にどれくらい結果が変動するかの平均値」にしてある。問題はそのscoreの計算方法なのだが…",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80b2",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80b3",
      "text": " まず、各々の試行ごとに「円の中にある/ない」の0/1の値が返ってくるわけなので、ベルヌーイ過程とみなせる。a + b回の試行をして1がa回、0がb回でたとすると、次の試行で1が出る確率はいくらか？ a / (a + b)じゃあないことは明らかだよね。これだと1回試行して1がでたら「次にも確実に1が出る」という誤った結論を出してしまう。",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80b4",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80b5",
      "text": " 1が出る確率、つまり元のベルヌーイ分布の平均値μ、の平均値がいくらであるのかという話になる。ここでμの共役事前分布はベータ分布で、a + b回の試行をして1がa回、0がb回でた後での事後分布はBeta(a + 1, b + 1)になるとか教科書に書いてあったので(ぇ)、1が出る確率pは(a + 1) / (a + b + 2)と結論できる。",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80b6",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80b7",
      "text": " 「このマスに円が占める割合」＝「このマスで試行したときに1が出る確率の最尤推定量」＝ a / (a + b)が次の試行でどうupdateされるか考えると、pの確率で(a + 1) / (a + b + 1)、(1 - p)の確率でa / (a + b + 1)に変わるわけだから普通にその2通りでのupdate量に確率を掛けて足しあわせてやればupdate量の平均値が求まる。これが下記コードのscore関数。",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80b8",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80b9",
      "text": " (ここ書いていて、今はa / (a + b)の変化量で計算しているけどもしかして(a + 1) / (a + b + 2)の方が適切なのかな？という気がした。マスに円が占める割合の最尤推定量がa / (a + b)なので今の方針であっているとは思うが一瞬不安に思ったので書き留めておく)",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ba",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80bb",
      "text": " (誤解がないように追記しておくと、この評価関数はUCB1ではない。囲碁では「勝てそうな手」を探すのに対しこの円周率推定では「白黒分かれる領域」を探すのでUCB1は使えなかった。)",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80bc",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80bd",
      "text": " ** コード",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80be",
      "text": " おかしなところがあれば容赦なく突っ込んでください。大筋では上で述べたように「探索空間をWIDTH * WIDTHに分割して、scoreの高いところから探索する」をやっているだけです。",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80bf",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80c0",
      "text": " >|cpp|",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80c1",
      "text": " #include <stdio.h>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80c2",
      "text": " #include <stdint.h>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80c3",
      "text": " #include <vector>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80c4",
      "text": " #include <queue>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80c5",
      "text": " using namespace std;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80c6",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80c7",
      "text": " // http://www.jstatsoft.org/v08/i14/xorshift.pdf",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80c8",
      "text": " uint32_t xor128() {     // 周期は 2^128-1",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80c9",
      "text": "     static uint32_t x=123456789,y=362436069,z=521288629,w=88675123;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ca",
      "text": "     uint32_t t;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80cb",
      "text": "     t=(x^(x<<11));x=y;y=z;z=w; return( w=(w^(w>>19))^(t^(t>>8)) );",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80cc",
      "text": " }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80cd",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ce",
      "text": " const size_t ITER_PER_PRINT = 100000;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80cf",
      "text": " const size_t NUM_ITER = 20;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80d0",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80d1",
      "text": " int monte(){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80d2",
      "text": "   size_t count = 0;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80d3",
      "text": "   for(size_t iter = 0; iter < NUM_ITER; iter++){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80d4",
      "text": "     for(size_t i = 0; i < ITER_PER_PRINT; i++){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80d5",
      "text": "       uint32_t v = xor128();",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80d6",
      "text": "       uint32_t u = xor128();",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80d7",
      "text": "       double x = v / 4294967295.0;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80d8",
      "text": "       double y = u / 4294967295.0;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80d9",
      "text": "       if(x * x + y * y < 1){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80da",
      "text": " \tcount++;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80db",
      "text": "       }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80dc",
      "text": "     }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80dd",
      "text": "     printf(\"%d: pi = %f\\n\", iter, double(count) / ITER_PER_PRINT / (iter + 1) * 4);",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80de",
      "text": "   }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80df",
      "text": " }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80e0",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80e1",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80e2",
      "text": " inline double score(size_t a_, size_t b_){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80e3",
      "text": "   double a = a_ + 1, b = b_ + 1;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80e4",
      "text": "   double n = a + b + 2;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80e5",
      "text": "   return double(2 * a * b + n) / n / (n + 1) / (n + 2);",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80e6",
      "text": " }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80e7",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80e8",
      "text": " int monte2(){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80e9",
      "text": "   size_t WIDTH = 100;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ea",
      "text": "   size_t N = WIDTH * WIDTH;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80eb",
      "text": "   vector<size_t> denom(N);",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ec",
      "text": "   vector<size_t> count(N);",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ed",
      "text": "   priority_queue<pair<double, size_t> > queue;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ee",
      "text": "   for(size_t i = 0; i < N; i++){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ef",
      "text": "     queue.push(make_pair(score(0, 0), i));",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80f0",
      "text": "   }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80f1",
      "text": "   for(size_t iter = 0; iter < NUM_ITER; iter++){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80f2",
      "text": "     for(size_t i = 0; i < ITER_PER_PRINT; i++){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80f3",
      "text": "       uint32_t v = xor128();",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80f4",
      "text": "       uint32_t u = xor128();",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80f5",
      "text": "       size_t index = queue.top().second;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80f6",
      "text": "       queue.pop();",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80f7",
      "text": "       double x = v / 4294967295.0 / WIDTH + 1.0 / WIDTH * (index % WIDTH);",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80f8",
      "text": "       double y = u / 4294967295.0 / WIDTH + 1.0 / WIDTH * (index / WIDTH);",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80f9",
      "text": "       denom[index]++;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80fa",
      "text": "       if(x * x + y * y < 1){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80fb",
      "text": " \tcount[index]++;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80fc",
      "text": "       }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80fd",
      "text": "       queue.push(make_pair(score(count[index], denom[index] - count[index]), index));",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80fe",
      "text": "     }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d80ff",
      "text": "     double area = 0.0;",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8100",
      "text": "     for(size_t i = 0; i < N; i++){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8101",
      "text": "       area += 1.0 / N * count[i] / denom[i];",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8102",
      "text": "     }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8103",
      "text": "     printf(\"%d: pi = %f\\n\", iter, area * 4);",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8104",
      "text": "   }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8105",
      "text": " }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8106",
      "text": " ",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8107",
      "text": " int main(){",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8108",
      "text": "   monte();",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8109",
      "text": "   monte2();",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d810a",
      "text": " }",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d810b",
      "text": " ||<",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d810c",
      "text": " </body>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d810d",
      "text": " <comments>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d810e",
      "text": " <comment>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d810f",
      "text": " <username>showyou</username>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8110",
      "text": " <body>よく読んでないけどMCMC使えば？とか</body>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8111",
      "text": " <timestamp>1296750855</timestamp>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8112",
      "text": " </comment>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8113",
      "text": " </comments>",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8114",
      "text": "",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    },
    {
      "id": "6090ec2aaff09e00003d8115",
      "text": "[はてなダイアリー 2011-02-03 https://nishiohirokazu.hatenadiary.org/archive/2011/02/03]",
      "created": 1296658800,
      "updated": 1296658800,
      "userId": "582e63d27c56960011aff09e"
    }
  ]
}